function si(i,n,e,t,r,a){return{tag:i,key:n,attrs:e,children:t,text:r,dom:a,domSize:void 0,state:void 0,events:void 0,instance:void 0}}si.normalize=function(i){return Array.isArray(i)?si("[",void 0,void 0,si.normalizeChildren(i),void 0,void 0):i==null||typeof i=="boolean"?null:typeof i=="object"?i:si("#",void 0,void 0,String(i),void 0,void 0)};si.normalizeChildren=function(i){var n=[];if(i.length){for(var e=i[0]!=null&&i[0].key!=null,t=1;t<i.length;t++)if((i[t]!=null&&i[t].key!=null)!==e)throw new TypeError("Vnodes must either always have keys or never have keys!");for(var t=0;t<i.length;t++)n[t]=si.normalize(i[t])}return n};var ut=si,bf=function(){var i=arguments[this],n=this+1,e;if(i==null?i={}:(typeof i!="object"||i.tag!=null||Array.isArray(i))&&(i={},n=this),arguments.length===n+1)e=arguments[n],Array.isArray(e)||(e=[e]);else for(e=[];n<arguments.length;)e.push(arguments[n++]);return ut("",i.key,i,e)},m0=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,wf={},Gi={}.hasOwnProperty;function _f(i){for(var n in i)if(Gi.call(i,n))return!1;return!0}function b0(i){for(var n,e="div",t=[],r={};n=m0.exec(i);){var a=n[1],o=n[2];if(a===""&&o!=="")e=o;else if(a==="#")r.id=o;else if(a===".")t.push(o);else if(n[3][0]==="["){var s=n[6];s&&(s=s.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),n[4]==="class"?t.push(s):r[n[4]]=s===""?s:s||!0}}return t.length>0&&(r.className=t.join(" ")),wf[i]={tag:e,attrs:r}}function w0(i,n){var e=n.attrs,t=ut.normalizeChildren(n.children),r=Gi.call(e,"class"),a=r?e.class:e.className;if(n.tag=i.tag,n.attrs=null,n.children=void 0,!_f(i.attrs)&&!_f(e)){var o={};for(var s in e)Gi.call(e,s)&&(o[s]=e[s]);e=o}for(var s in i.attrs)Gi.call(i.attrs,s)&&s!=="className"&&!Gi.call(e,s)&&(e[s]=i.attrs[s]);(a!=null||i.attrs.className!=null)&&(e.className=a!=null?i.attrs.className!=null?String(i.attrs.className)+" "+String(a):a:i.attrs.className!=null?i.attrs.className:null),r&&(e.class=null);for(var s in e)if(Gi.call(e,s)&&s!=="key"){n.attrs=e;break}return Array.isArray(t)&&t.length===1&&t[0]!=null&&t[0].tag==="#"?n.text=t[0].children:n.children=t,n}function _0(i){if(i==null||typeof i!="string"&&typeof i!="function"&&typeof i.view!="function")throw Error("The selector must be either a string or a component.");var n=bf.apply(1,arguments);return typeof i=="string"&&(n.children=ut.normalizeChildren(n.children),i!=="[")?w0(wf[i]||b0(i),n):(n.tag=i,n)}var uo=_0,E0=function(i){return i==null&&(i=""),ut("<",void 0,void 0,i,void 0,void 0)},S0=function(){var i=bf.apply(0,arguments);return i.tag="[",i.children=ut.normalizeChildren(i.children),i};uo.trust=E0;uo.fragment=S0;var lo=uo,qi=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function T0(i,n,e){return e={path:n,exports:{},require:function(t,r){return k0(t,r??e.path)}},i(e,e.exports),e.exports}function k0(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Ye=function(i){if(!(this instanceof Ye))throw new Error("Promise must be called with `new`");if(typeof i!="function")throw new TypeError("executor must be a function");var n=this,e=[],t=[],r=u(e,!0),a=u(t,!1),o=n._instance={resolvers:e,rejectors:t},s=typeof setImmediate=="function"?setImmediate:setTimeout;function u(h,f){return function d(c){var v;try{if(f&&c!=null&&(typeof c=="object"||typeof c=="function")&&typeof(v=c.then)=="function"){if(c===n)throw new TypeError("Promise can't be resolved w/ itself");l(v.bind(c))}else s(function(){!f&&h.length===0&&console.error("Possible unhandled promise rejection:",c);for(var m=0;m<h.length;m++)h[m](c);e.length=0,t.length=0,o.state=f,o.retry=function(){d(c)}})}catch(m){a(m)}}}function l(h){var f=0;function d(v){return function(m){f++>0||v(m)}}var c=d(a);try{h(d(r),c)}catch(v){c(v)}}l(i)};Ye.prototype.then=function(i,n){var e=this,t=e._instance;function r(u,l,h,f){l.push(function(d){if(typeof u!="function")h(d);else try{a(u(d))}catch(c){o&&o(c)}}),typeof t.retry=="function"&&f===t.state&&t.retry()}var a,o,s=new Ye(function(u,l){a=u,o=l});return r(i,t.resolvers,a,!0),r(n,t.rejectors,o,!1),s};Ye.prototype.catch=function(i){return this.then(null,i)};Ye.prototype.finally=function(i){return this.then(function(n){return Ye.resolve(i()).then(function(){return n})},function(n){return Ye.resolve(i()).then(function(){return Ye.reject(n)})})};Ye.resolve=function(i){return i instanceof Ye?i:new Ye(function(n){n(i)})};Ye.reject=function(i){return new Ye(function(n,e){e(i)})};Ye.all=function(i){return new Ye(function(n,e){var t=i.length,r=0,a=[];if(i.length===0)n([]);else for(var o=0;o<i.length;o++)(function(s){function u(l){r++,a[s]=l,r===t&&n(a)}i[s]!=null&&(typeof i[s]=="object"||typeof i[s]=="function")&&typeof i[s].then=="function"?i[s].then(u,e):u(i[s])})(o)})};Ye.race=function(i){return new Ye(function(n,e){for(var t=0;t<i.length;t++)i[t].then(n,e)})};var Ki=Ye,Ef=T0(function(i){typeof window!="undefined"?(typeof window.Promise=="undefined"?window.Promise=Ki:window.Promise.prototype.finally||(window.Promise.prototype.finally=Ki.prototype.finally),i.exports=window.Promise):typeof qi!="undefined"?(typeof qi.Promise=="undefined"?qi.Promise=Ki:qi.Promise.prototype.finally||(qi.Promise.prototype.finally=Ki.prototype.finally),i.exports=qi.Promise):i.exports=Ki}),O0=function(i){var n=i&&i.document,e,t={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function r(y){return y.attrs&&y.attrs.xmlns||t[y.tag]}function a(y,p){if(y.state!==p)throw new Error("`vnode.state` must not be modified")}function o(y){var p=y.state;try{return this.apply(p,arguments)}finally{a(y,p)}}function s(){try{return n.activeElement}catch(y){return null}}function u(y,p,b,A,M,V,oe){for(var he=b;he<A;he++){var J=p[he];J!=null&&l(y,J,M,oe,V)}}function l(y,p,b,A,M){var V=p.tag;if(typeof V=="string")switch(p.state={},p.attrs!=null&&hu(p.attrs,p,b),V){case"#":h(y,p,M);break;case"<":d(y,p,A,M);break;case"[":c(y,p,b,A,M);break;default:v(y,p,b,A,M)}else w(y,p,b,A,M)}function h(y,p,b){p.dom=n.createTextNode(p.children),Q(y,p.dom,b)}var f={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function d(y,p,b,A){var M=p.children.match(/^\s*?<(\w+)/im)||[],V=n.createElement(f[M[1]]||"div");b==="http://www.w3.org/2000/svg"?(V.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+p.children+"</svg>",V=V.firstChild):V.innerHTML=p.children,p.dom=V.firstChild,p.domSize=V.childNodes.length,p.instance=[];for(var oe=n.createDocumentFragment(),he;he=V.firstChild;)p.instance.push(he),oe.appendChild(he);Q(y,oe,A)}function c(y,p,b,A,M){var V=n.createDocumentFragment();if(p.children!=null){var oe=p.children;u(V,oe,0,oe.length,b,null,A)}p.dom=V.firstChild,p.domSize=V.childNodes.length,Q(y,V,M)}function v(y,p,b,A,M){var V=p.tag,oe=p.attrs,he=oe&&oe.is;A=r(p)||A;var J=A?he?n.createElementNS(A,V,{is:he}):n.createElementNS(A,V):he?n.createElement(V,{is:he}):n.createElement(V);if(p.dom=J,oe!=null&&X(p,oe,A),Q(y,J,M),!ee(p)&&(p.text!=null&&(p.text!==""?J.textContent=p.text:p.children=[ut("#",void 0,void 0,p.text,void 0,void 0)]),p.children!=null)){var be=p.children;u(J,be,0,be.length,b,null,A),p.tag==="select"&&oe!=null&&fe(p,oe)}}function m(y,p){var b;if(typeof y.tag.view=="function"){if(y.state=Object.create(y.tag),b=y.state.view,b.$$reentrantLock$$!=null)return;b.$$reentrantLock$$=!0}else{if(y.state=void 0,b=y.tag,b.$$reentrantLock$$!=null)return;b.$$reentrantLock$$=!0,y.state=y.tag.prototype!=null&&typeof y.tag.prototype.view=="function"?new y.tag(y):y.tag(y)}if(hu(y.state,y,p),y.attrs!=null&&hu(y.attrs,y,p),y.instance=ut.normalize(o.call(y.state.view,y)),y.instance===y)throw Error("A view cannot return the vnode it received as argument");b.$$reentrantLock$$=null}function w(y,p,b,A,M){m(p,b),p.instance!=null?(l(y,p.instance,b,A,M),p.dom=p.instance.dom,p.domSize=p.dom!=null?p.instance.domSize:0):p.domSize=0}function g(y,p,b,A,M,V){if(!(p===b||p==null&&b==null))if(p==null||p.length===0)u(y,b,0,b.length,A,M,V);else if(b==null||b.length===0)te(y,p,0,p.length);else{var oe=p[0]!=null&&p[0].key!=null,he=b[0]!=null&&b[0].key!=null,J=0,be=0;if(!oe)for(;be<p.length&&p[be]==null;)be++;if(!he)for(;J<b.length&&b[J]==null;)J++;if(he===null&&oe==null)return;if(oe!==he)te(y,p,be,p.length),u(y,b,J,b.length,A,M,V);else if(he){for(var ot=p.length-1,Xe=b.length-1,so,st,Me,it,Ie,cu;ot>=be&&Xe>=J&&(it=p[ot],Ie=b[Xe],it.key===Ie.key);)it!==Ie&&E(y,it,Ie,A,M,V),Ie.dom!=null&&(M=Ie.dom),ot--,Xe--;for(;ot>=be&&Xe>=J&&(st=p[be],Me=b[J],st.key===Me.key);)be++,J++,st!==Me&&E(y,st,Me,A,R(p,be,M),V);for(;ot>=be&&Xe>=J&&!(J===Xe||st.key!==Ie.key||it.key!==Me.key);)cu=R(p,be,M),W(y,it,cu),it!==Me&&E(y,it,Me,A,cu,V),++J<=--Xe&&W(y,st,M),st!==Ie&&E(y,st,Ie,A,M,V),Ie.dom!=null&&(M=Ie.dom),be++,ot--,it=p[ot],Ie=b[Xe],st=p[be],Me=b[J];for(;ot>=be&&Xe>=J&&it.key===Ie.key;)it!==Ie&&E(y,it,Ie,A,M,V),Ie.dom!=null&&(M=Ie.dom),ot--,Xe--,it=p[ot],Ie=b[Xe];if(J>Xe)te(y,p,be,ot+1);else if(be>ot)u(y,b,J,Xe+1,A,M,V);else{var y0=M,mf=Xe-J+1,Rn=new Array(mf),vu=0,xe=0,pu=2147483647,gu=0,so,yu;for(xe=0;xe<mf;xe++)Rn[xe]=-1;for(xe=Xe;xe>=J;xe--){so==null&&(so=I(p,be,ot+1)),Ie=b[xe];var Vi=so[Ie.key];Vi!=null&&(pu=Vi<pu?Vi:-1,Rn[xe-J]=Vi,it=p[Vi],p[Vi]=null,it!==Ie&&E(y,it,Ie,A,M,V),Ie.dom!=null&&(M=Ie.dom),gu++)}if(M=y0,gu!==ot-be+1&&te(y,p,be,ot+1),gu===0)u(y,b,J,Xe+1,A,M,V);else if(pu===-1)for(yu=P(Rn),vu=yu.length-1,xe=Xe;xe>=J;xe--)Me=b[xe],Rn[xe-J]===-1?l(y,Me,A,V,M):yu[vu]===xe-J?vu--:W(y,Me,M),Me.dom!=null&&(M=b[xe].dom);else for(xe=Xe;xe>=J;xe--)Me=b[xe],Rn[xe-J]===-1&&l(y,Me,A,V,M),Me.dom!=null&&(M=b[xe].dom)}}else{var du=p.length<b.length?p.length:b.length;for(J=J<be?J:be;J<du;J++)st=p[J],Me=b[J],!(st===Me||st==null&&Me==null)&&(st==null?l(y,Me,A,V,R(p,J+1,M)):Me==null?le(y,st):E(y,st,Me,A,R(p,J+1,M),V));p.length>du&&te(y,p,J,p.length),b.length>du&&u(y,b,J,b.length,A,M,V)}}}function E(y,p,b,A,M,V){var oe=p.tag,he=b.tag;if(oe===he){if(b.state=p.state,b.events=p.events,g0(b,p))return;if(typeof oe=="string")switch(b.attrs!=null&&fu(b.attrs,b,A),oe){case"#":_(p,b);break;case"<":S(y,p,b,V,M);break;case"[":k(y,p,b,A,M,V);break;default:O(p,b,A,V)}else C(y,p,b,A,M,V)}else le(y,p),l(y,b,A,V,M)}function _(y,p){y.children.toString()!==p.children.toString()&&(y.dom.nodeValue=p.children),p.dom=y.dom}function S(y,p,b,A,M){p.children!==b.children?(F(y,p),d(y,b,A,M)):(b.dom=p.dom,b.domSize=p.domSize,b.instance=p.instance)}function k(y,p,b,A,M,V){g(y,p.children,b.children,A,M,V);var oe=0,he=b.children;if(b.dom=null,he!=null){for(var J=0;J<he.length;J++){var be=he[J];be!=null&&be.dom!=null&&(b.dom==null&&(b.dom=be.dom),oe+=be.domSize||1)}oe!==1&&(b.domSize=oe)}}function O(y,p,b,A){var M=p.dom=y.dom;A=r(p)||A,p.tag==="textarea"&&(p.attrs==null&&(p.attrs={}),p.text!=null&&(p.attrs.value=p.text,p.text=void 0)),pe(p,y.attrs,p.attrs,A),ee(p)||(y.text!=null&&p.text!=null&&p.text!==""?y.text.toString()!==p.text.toString()&&(y.dom.firstChild.nodeValue=p.text):(y.text!=null&&(y.children=[ut("#",void 0,void 0,y.text,void 0,y.dom.firstChild)]),p.text!=null&&(p.children=[ut("#",void 0,void 0,p.text,void 0,void 0)]),g(M,y.children,p.children,b,null,A)))}function C(y,p,b,A,M,V){if(b.instance=ut.normalize(o.call(b.state.view,b)),b.instance===b)throw Error("A view cannot return the vnode it received as argument");fu(b.state,b,A),b.attrs!=null&&fu(b.attrs,b,A),b.instance!=null?(p.instance==null?l(y,b.instance,A,V,M):E(y,p.instance,b.instance,A,M,V),b.dom=b.instance.dom,b.domSize=b.instance.domSize):p.instance!=null?(le(y,p.instance),b.dom=void 0,b.domSize=0):(b.dom=p.dom,b.domSize=p.domSize)}function I(y,p,b){for(var A=Object.create(null);p<b;p++){var M=y[p];if(M!=null){var V=M.key;V!=null&&(A[V]=p)}}return A}var T=[];function P(y){for(var p=[0],b=0,A=0,M=0,V=T.length=y.length,M=0;M<V;M++)T[M]=y[M];for(var M=0;M<V;++M)if(y[M]!==-1){var oe=p[p.length-1];if(y[oe]<y[M]){T[M]=oe,p.push(M);continue}for(b=0,A=p.length-1;b<A;){var he=(b>>>1)+(A>>>1)+(b&A&1);y[p[he]]<y[M]?b=he+1:A=he}y[M]<y[p[b]]&&(b>0&&(T[M]=p[b-1]),p[b]=M)}for(b=p.length,A=p[b-1];b-- >0;)p[b]=A,A=T[A];return T.length=0,p}function R(y,p,b){for(;p<y.length;p++)if(y[p]!=null&&y[p].dom!=null)return y[p].dom;return b}function W(y,p,b){var A=n.createDocumentFragment();G(y,A,p),Q(y,A,b)}function G(y,p,b){for(;b.dom!=null&&b.dom.parentNode===y;){if(typeof b.tag!="string"){if(b=b.instance,b!=null)continue}else if(b.tag==="<")for(var A=0;A<b.instance.length;A++)p.appendChild(b.instance[A]);else if(b.tag!=="[")p.appendChild(b.dom);else if(b.children.length===1){if(b=b.children[0],b!=null)continue}else for(var A=0;A<b.children.length;A++){var M=b.children[A];M!=null&&G(y,p,M)}break}}function Q(y,p,b){b!=null?y.insertBefore(p,b):y.appendChild(p)}function ee(y){if(y.attrs==null||y.attrs.contenteditable==null&&y.attrs.contentEditable==null)return!1;var p=y.children;if(p!=null&&p.length===1&&p[0].tag==="<"){var b=p[0].children;y.dom.innerHTML!==b&&(y.dom.innerHTML=b)}else if(y.text!=null||p!=null&&p.length!==0)throw new Error("Child node of a contenteditable must be trusted");return!0}function te(y,p,b,A){for(var M=b;M<A;M++){var V=p[M];V!=null&&le(y,V)}}function le(y,p){var b=0,A=p.state,M,V;if(typeof p.tag!="string"&&typeof p.state.onbeforeremove=="function"){var oe=o.call(p.state.onbeforeremove,p);oe!=null&&typeof oe.then=="function"&&(b=1,M=oe)}if(p.attrs&&typeof p.attrs.onbeforeremove=="function"){var oe=o.call(p.attrs.onbeforeremove,p);oe!=null&&typeof oe.then=="function"&&(b|=2,V=oe)}if(a(p,A),!b)H(p),$(y,p);else{if(M!=null){var he=function(){b&1&&(b&=2,b||J())};M.then(he,he)}if(V!=null){var he=function(){b&2&&(b&=1,b||J())};V.then(he,he)}}function J(){a(p,A),H(p),$(y,p)}}function F(y,p){for(var b=0;b<p.instance.length;b++)y.removeChild(p.instance[b])}function $(y,p){for(;p.dom!=null&&p.dom.parentNode===y;){if(typeof p.tag!="string"){if(p=p.instance,p!=null)continue}else if(p.tag==="<")F(y,p);else{if(p.tag!=="["&&(y.removeChild(p.dom),!Array.isArray(p.children)))break;if(p.children.length===1){if(p=p.children[0],p!=null)continue}else for(var b=0;b<p.children.length;b++){var A=p.children[b];A!=null&&$(y,A)}}break}}function H(y){if(typeof y.tag!="string"&&typeof y.state.onremove=="function"&&o.call(y.state.onremove,y),y.attrs&&typeof y.attrs.onremove=="function"&&o.call(y.attrs.onremove,y),typeof y.tag!="string")y.instance!=null&&H(y.instance);else{var p=y.children;if(Array.isArray(p))for(var b=0;b<p.length;b++){var A=p[b];A!=null&&H(A)}}}function X(y,p,b){for(var A in p)U(y,A,null,p[A],b)}function U(y,p,b,A,M){if(!(p==="key"||p==="is"||A==null||_e(p)||b===A&&!Ne(y,p)&&typeof A!="object")){if(p[0]==="o"&&p[1]==="n")return yf(y,p,A);if(p.slice(0,6)==="xlink:")y.dom.setAttributeNS("http://www.w3.org/1999/xlink",p.slice(6),A);else if(p==="style")gf(y.dom,b,A);else if(Ue(y,p,M)){if(p==="value"&&((y.tag==="input"||y.tag==="textarea")&&y.dom.value===""+A&&y.dom===s()||y.tag==="select"&&b!==null&&y.dom.value===""+A||y.tag==="option"&&b!==null&&y.dom.value===""+A))return;y.tag==="input"&&p==="type"?y.dom.setAttribute(p,A):y.dom[p]=A}else typeof A=="boolean"?A?y.dom.setAttribute(p,""):y.dom.removeAttribute(p):y.dom.setAttribute(p==="className"?"class":p,A)}}function ne(y,p,b,A){if(!(p==="key"||p==="is"||b==null||_e(p)))if(p[0]==="o"&&p[1]==="n"&&!_e(p))yf(y,p,void 0);else if(p==="style")gf(y.dom,b,null);else if(Ue(y,p,A)&&p!=="className"&&!(p==="value"&&(y.tag==="option"||y.tag==="select"&&y.dom.selectedIndex===-1&&y.dom===s()))&&!(y.tag==="input"&&p==="type"))y.dom[p]=null;else{var M=p.indexOf(":");M!==-1&&(p=p.slice(M+1)),b!==!1&&y.dom.removeAttribute(p==="className"?"class":p)}}function fe(y,p){if("value"in p)if(p.value===null)y.dom.selectedIndex!==-1&&(y.dom.value=null);else{var b=""+p.value;(y.dom.value!==b||y.dom.selectedIndex===-1)&&(y.dom.value=b)}"selectedIndex"in p&&U(y,"selectedIndex",null,p.selectedIndex,void 0)}function pe(y,p,b,A){if(b!=null)for(var M in b)U(y,M,p&&p[M],b[M],A);var V;if(p!=null)for(var M in p)(V=p[M])!=null&&(b==null||b[M]==null)&&ne(y,M,V,A)}function Ne(y,p){return p==="value"||p==="checked"||p==="selectedIndex"||p==="selected"&&y.dom===s()||y.tag==="option"&&y.dom.parentNode===n.activeElement}function _e(y){return y==="oninit"||y==="oncreate"||y==="onupdate"||y==="onremove"||y==="onbeforeremove"||y==="onbeforeupdate"}function Ue(y,p,b){return b===void 0&&(y.tag.indexOf("-")>-1||y.attrs!=null&&y.attrs.is||p!=="href"&&p!=="list"&&p!=="form"&&p!=="width"&&p!=="height")&&p in y.dom}var cr=/[A-Z]/g;function vr(y){return"-"+y.toLowerCase()}function uu(y){return y[0]==="-"&&y[1]==="-"?y:y==="cssFloat"?"float":y.replace(cr,vr)}function gf(y,p,b){if(p!==b)if(b==null)y.style.cssText="";else if(typeof b!="object")y.style.cssText=b;else if(p==null||typeof p!="object"){y.style.cssText="";for(var A in b){var M=b[A];M!=null&&y.style.setProperty(uu(A),String(M))}}else{for(var A in b){var M=b[A];M!=null&&(M=String(M))!==String(p[A])&&y.style.setProperty(uu(A),M)}for(var A in p)p[A]!=null&&b[A]==null&&y.style.removeProperty(uu(A))}}function lu(){this._=e}lu.prototype=Object.create(null),lu.prototype.handleEvent=function(y){var p=this["on"+y.type],b;typeof p=="function"?b=p.call(y.currentTarget,y):typeof p.handleEvent=="function"&&p.handleEvent(y),this._&&y.redraw!==!1&&(0,this._)(),b===!1&&(y.preventDefault(),y.stopPropagation())};function yf(y,p,b){if(y.events!=null){if(y.events[p]===b)return;b!=null&&(typeof b=="function"||typeof b=="object")?(y.events[p]==null&&y.dom.addEventListener(p.slice(2),y.events,!1),y.events[p]=b):(y.events[p]!=null&&y.dom.removeEventListener(p.slice(2),y.events,!1),y.events[p]=void 0)}else b!=null&&(typeof b=="function"||typeof b=="object")&&(y.events=new lu,y.dom.addEventListener(p.slice(2),y.events,!1),y.events[p]=b)}function hu(y,p,b){typeof y.oninit=="function"&&o.call(y.oninit,p),typeof y.oncreate=="function"&&b.push(o.bind(y.oncreate,p))}function fu(y,p,b){typeof y.onupdate=="function"&&b.push(o.bind(y.onupdate,p))}function g0(y,p){do{if(y.attrs!=null&&typeof y.attrs.onbeforeupdate=="function"){var b=o.call(y.attrs.onbeforeupdate,y,p);if(b!==void 0&&!b)break}if(typeof y.tag!="string"&&typeof y.state.onbeforeupdate=="function"){var b=o.call(y.state.onbeforeupdate,y,p);if(b!==void 0&&!b)break}return!1}while(!1);return y.dom=p.dom,y.domSize=p.domSize,y.instance=p.instance,y.attrs=p.attrs,y.children=p.children,y.text=p.text,!0}return function(y,p,b){if(!y)throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var A=[],M=s(),V=y.namespaceURI;y.vnodes==null&&(y.textContent=""),p=ut.normalizeChildren(Array.isArray(p)?p:[p]);var oe=e;try{e=typeof b=="function"?b:void 0,g(y,y.vnodes,p,A,null,V==="http://www.w3.org/1999/xhtml"?void 0:V)}finally{e=oe}y.vnodes=p,M!=null&&s()!==M&&typeof M.focus=="function"&&M.focus();for(var he=0;he<A.length;he++)A[he]()}},Sf=O0(window),P0=function(i,n,e){var t=[],r=!1,a=!1;function o(){if(r)throw new Error("Nested m.redraw.sync() call");r=!0;for(var l=0;l<t.length;l+=2)try{i(t[l],ut(t[l+1]),s)}catch(h){e.error(h)}r=!1}function s(){a||(a=!0,n(function(){a=!1,o()}))}s.sync=o;function u(l,h){if(h!=null&&h.view==null&&typeof h!="function")throw new TypeError("m.mount(element, component) expects a component, not a vnode");var f=t.indexOf(l);f>=0&&(t.splice(f,2),i(l,[],s)),h!=null&&(t.push(l,h),i(l,ut(h),s))}return{mount:u,redraw:s}},ho=P0(Sf,requestAnimationFrame,console),kf=function(i){if(Object.prototype.toString.call(i)!=="[object Object]")return"";var n=[];for(var e in i)t(e,i[e]);return n.join("&");function t(r,a){if(Array.isArray(a))for(var o=0;o<a.length;o++)t(r+"["+o+"]",a[o]);else if(Object.prototype.toString.call(a)==="[object Object]")for(var o in a)t(r+"["+o+"]",a[o]);else n.push(encodeURIComponent(r)+(a!=null&&a!==""?"="+encodeURIComponent(a):""))}},mu=Object.assign||function(i,n){n&&Object.keys(n).forEach(function(e){i[e]=n[e]})},bu=function(i,n){if(/:([^\/\.-]+)(\.{3})?:/.test(i))throw new SyntaxError("Template parameter names *must* be separated");if(n==null)return i;var e=i.indexOf("?"),t=i.indexOf("#"),r=t<0?i.length:t,a=e<0?r:e,o=i.slice(0,a),s={};mu(s,n);var u=o.replace(/:([^\/\.-]+)(\.{3})?/g,function(m,w,g){return delete s[w],n[w]==null?m:g?n[w]:encodeURIComponent(String(n[w]))}),l=u.indexOf("?"),h=u.indexOf("#"),f=h<0?u.length:h,d=l<0?f:l,c=u.slice(0,d);e>=0&&(c+=i.slice(e,r)),l>=0&&(c+=(e<0?"?":"&")+u.slice(l,f));var v=kf(s);return v&&(c+=(e<0&&l<0?"?":"&")+v),t>=0&&(c+=i.slice(t)),h>=0&&(c+=(t<0?"":"&")+u.slice(h)),c},I0=function(i,n,e){var t=0;function r(s){return new n(s)}r.prototype=n.prototype,r.__proto__=n;function a(s){return function(u,l){typeof u!="string"?(l=u,u=u.url):l==null&&(l={});var h=new n(function(v,m){s(bu(u,l.params),l,function(w){if(typeof l.type=="function")if(Array.isArray(w))for(var g=0;g<w.length;g++)w[g]=new l.type(w[g]);else w=new l.type(w);v(w)},m)});if(l.background===!0)return h;var f=0;function d(){--f==0&&typeof e=="function"&&e()}return c(h);function c(v){var m=v.then;return v.constructor=r,v.then=function(){f++;var w=m.apply(v,arguments);return w.then(d,function(g){if(d(),f===0)throw g}),c(w)},v}}}function o(s,u){for(var l in s.headers)if({}.hasOwnProperty.call(s.headers,l)&&u.test(l))return!0;return!1}return{request:a(function(s,u,l,h){var f=u.method!=null?u.method.toUpperCase():"GET",d=u.body,c=(u.serialize==null||u.serialize===JSON.serialize)&&!(d instanceof i.FormData),v=u.responseType||(typeof u.extract=="function"?"":"json"),m=new i.XMLHttpRequest,w=!1,g=m,E,_=m.abort;m.abort=function(){w=!0,_.call(this)},m.open(f,s,u.async!==!1,typeof u.user=="string"?u.user:void 0,typeof u.password=="string"?u.password:void 0),c&&d!=null&&!o(u,/^content-type$/i)&&m.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof u.deserialize!="function"&&!o(u,/^accept$/i)&&m.setRequestHeader("Accept","application/json, text/*"),u.withCredentials&&(m.withCredentials=u.withCredentials),u.timeout&&(m.timeout=u.timeout),m.responseType=v;for(var S in u.headers)({}).hasOwnProperty.call(u.headers,S)&&m.setRequestHeader(S,u.headers[S]);m.onreadystatechange=function(k){if(!w&&k.target.readyState===4)try{var O=k.target.status>=200&&k.target.status<300||k.target.status===304||/^file:\/\//i.test(s),C=k.target.response,I;if(v==="json"?!k.target.responseType&&typeof u.extract!="function"&&(C=JSON.parse(k.target.responseText)):(!v||v==="text")&&C==null&&(C=k.target.responseText),typeof u.extract=="function"?(C=u.extract(k.target,u),O=!0):typeof u.deserialize=="function"&&(C=u.deserialize(C)),O)l(C);else{try{I=k.target.responseText}catch(P){I=C}var T=new Error(I);T.code=k.target.status,T.response=C,h(T)}}catch(P){h(P)}},typeof u.config=="function"&&(m=u.config(m,u,s)||m,m!==g&&(E=m.abort,m.abort=function(){w=!0,E.call(this)})),d==null?m.send():typeof u.serialize=="function"?m.send(u.serialize(d)):d instanceof i.FormData?m.send(d):m.send(JSON.stringify(d))}),jsonp:a(function(s,u,l,h){var f=u.callbackName||"_mithril_"+Math.round(Math.random()*1e16)+"_"+t++,d=i.document.createElement("script");i[f]=function(c){delete i[f],d.parentNode.removeChild(d),l(c)},d.onerror=function(){delete i[f],d.parentNode.removeChild(d),h(new Error("JSONP request failed"))},d.src=s+(s.indexOf("?")<0?"?":"&")+encodeURIComponent(u.callbackKey||"callback")+"="+encodeURIComponent(f),i.document.documentElement.appendChild(d)})}},Tf=I0(window,Ef,ho.redraw),Of=function(i){if(i===""||i==null)return{};i.charAt(0)==="?"&&(i=i.slice(1));for(var n=i.split("&"),e={},t={},r=0;r<n.length;r++){var a=n[r].split("="),o=decodeURIComponent(a[0]),s=a.length===2?decodeURIComponent(a[1]):"";s==="true"?s=!0:s==="false"&&(s=!1);var u=o.split(/\]\[?|\[/),l=t;o.indexOf("[")>-1&&u.pop();for(var h=0;h<u.length;h++){var f=u[h],d=u[h+1],c=d==""||!isNaN(parseInt(d,10));if(f===""){var o=u.slice(0,h).join();e[o]==null&&(e[o]=Array.isArray(l)?l.length:0),f=e[o]++}else if(f==="__proto__")break;if(h===u.length-1)l[f]=s;else{var v=Object.getOwnPropertyDescriptor(l,f);v!=null&&(v=v.value),v==null&&(l[f]=v=c?[]:{}),l=v}}}return t},fo=function(i){var n=i.indexOf("?"),e=i.indexOf("#"),t=e<0?i.length:e,r=n<0?t:n,a=i.slice(0,r).replace(/\/{2,}/g,"/");return a?(a[0]!=="/"&&(a="/"+a),a.length>1&&a[a.length-1]==="/"&&(a=a.slice(0,-1))):a="/",{path:a,params:n<0?{}:Of(i.slice(n+1,t))}},C0=function(i){var n=fo(i),e=Object.keys(n.params),t=[],r=new RegExp("^"+n.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(a,o,s){return o==null?"\\"+a:(t.push({k:o,r:s==="..."}),s==="..."?"(.*)":s==="."?"([^/]+)\\.":"([^/]+)"+(s||""))})+"$");return function(a){for(var o=0;o<e.length;o++)if(n.params[e[o]]!==a.params[e[o]])return!1;if(!t.length)return r.test(a.path);var s=r.exec(a.path);if(s==null)return!1;for(var o=0;o<t.length;o++)a.params[t[o].k]=t[o].r?s[o+1]:decodeURIComponent(s[o+1]);return!0}},wu={},x0=function(i,n){var e;function t(f,d,c){if(f=bu(f,d),e!=null){e();var v=c?c.state:null,m=c?c.title:null;c&&c.replace?i.history.replaceState(v,m,h.prefix+f):i.history.pushState(v,m,h.prefix+f)}else i.location.href=h.prefix+f}var r=wu,a,o,s,u,l=h.SKIP={};function h(f,d,c){if(f==null)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var v=0,m=Object.keys(c).map(function(O){if(O[0]!=="/")throw new SyntaxError("Routes must start with a `/`");if(/:([^\/\.-]+)(\.{3})?:/.test(O))throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");return{route:O,component:c[O],check:C0(O)}}),w=typeof setImmediate=="function"?setImmediate:setTimeout,g=Ef.resolve(),E=!1,_;if(e=null,d!=null){var S=fo(d);if(!m.some(function(O){return O.check(S)}))throw new ReferenceError("Default route doesn't match any known routes")}function k(){E=!1;var O=i.location.hash;h.prefix[0]!=="#"&&(O=i.location.search+O,h.prefix[0]!=="?"&&(O=i.location.pathname+O,O[0]!=="/"&&(O="/"+O)));var C=O.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent).slice(h.prefix.length),I=fo(C);mu(I.params,i.history.state);function T(){if(C===d)throw new Error("Could not resolve default route "+d);t(d,null,{replace:!0})}P(0);function P(R){for(;R<m.length;R++)if(m[R].check(I)){var W=m[R].component,G=m[R].route,Q=W,ee=u=function(te){if(ee===u){if(te===l)return P(R+1);a=te!=null&&(typeof te.view=="function"||typeof te=="function")?te:"div",o=I.params,s=C,u=null,r=W.render?W:null,v===2?n.redraw():(v=2,n.redraw.sync())}};W.view||typeof W=="function"?(W={},ee(Q)):W.onmatch?g.then(function(){return W.onmatch(I.params,C,G)}).then(ee,T):ee("div");return}T()}}return e=function(){E||(E=!0,w(k))},typeof i.history.pushState=="function"?(_=function(){i.removeEventListener("popstate",e,!1)},i.addEventListener("popstate",e,!1)):h.prefix[0]==="#"&&(e=null,_=function(){i.removeEventListener("hashchange",k,!1)},i.addEventListener("hashchange",k,!1)),n.mount(f,{onbeforeupdate:function(){return v=v?2:1,!(!v||wu===r)},oncreate:k,onremove:_,view:function(){if(!(!v||wu===r)){var O=[ut(a,o.key,o)];return r&&(O=r.render(O[0])),O}}})}return h.set=function(f,d,c){u!=null&&(c=c||{},c.replace=!0),u=null,t(f,d,c)},h.get=function(){return s},h.prefix="#!",h.Link={view:function(f){var d=f.attrs.options,c={},v,m;mu(c,f.attrs),c.selector=c.options=c.key=c.oninit=c.oncreate=c.onbeforeupdate=c.onupdate=c.onbeforeremove=c.onremove=null;var w=uo(f.attrs.selector||"a",c,f.children);return(w.attrs.disabled=Boolean(w.attrs.disabled))?(w.attrs.href=null,w.attrs["aria-disabled"]="true",w.attrs.onclick=null):(v=w.attrs.onclick,m=w.attrs.href,w.attrs.href=h.prefix+m,w.attrs.onclick=function(g){var E;typeof v=="function"?E=v.call(g.currentTarget,g):v==null||typeof v!="object"||typeof v.handleEvent=="function"&&v.handleEvent(g),E!==!1&&!g.defaultPrevented&&(g.button===0||g.which===0||g.which===1)&&(!g.currentTarget.target||g.currentTarget.target==="_self")&&!g.ctrlKey&&!g.metaKey&&!g.shiftKey&&!g.altKey&&(g.preventDefault(),g.redraw=!1,h.set(m,null,d))}),w}},h.param=function(f){return o&&f!=null?o[f]:o},h},A0=x0(window,ho),nt=function(){return lo.apply(this,arguments)};nt.m=lo;nt.trust=lo.trust;nt.fragment=lo.fragment;nt.mount=ho.mount;nt.route=A0;nt.render=Sf;nt.redraw=ho.redraw;nt.request=Tf.request;nt.jsonp=Tf.jsonp;nt.parseQueryString=Of;nt.buildQueryString=kf;nt.parsePathname=fo;nt.buildPathname=bu;nt.vnode=ut;nt.PromisePolyfill=Ki;var $0=nt,Xi=$0;var Pf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Qt(i){var n={exports:{}};return i(n,n.exports),n.exports}var co=function(i){return i&&i.Math==Math&&i},Ce=co(typeof globalThis=="object"&&globalThis)||co(typeof window=="object"&&window)||co(typeof self=="object"&&self)||co(typeof Pf=="object"&&Pf)||function(){return this}()||Function("return this")(),Pe=function(i){try{return!!i()}catch(n){return!0}},ye=!Pe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),If={}.propertyIsEnumerable,Cf=Object.getOwnPropertyDescriptor,D0=Cf&&!If.call({1:2},1),M0=D0?function(n){var e=Cf(this,n);return!!e&&e.enumerable}:If,Nn={f:M0},ui=function(i,n){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:n}},F0={}.toString,Nr=function(i){return F0.call(i).slice(8,-1)},R0="".split,vo=Pe(function(){return!Object("z").propertyIsEnumerable(0)})?function(i){return Nr(i)=="String"?R0.call(i,""):Object(i)}:Object,Bn=function(i){if(i==null)throw TypeError("Can't call method on "+i);return i},Ot=function(i){return vo(Bn(i))},Ve=function(i){return typeof i=="object"?i!==null:typeof i=="function"},Yi=function(i,n){if(!Ve(i))return i;var e,t;if(n&&typeof(e=i.toString)=="function"&&!Ve(t=e.call(i))||typeof(e=i.valueOf)=="function"&&!Ve(t=e.call(i))||!n&&typeof(e=i.toString)=="function"&&!Ve(t=e.call(i)))return t;throw TypeError("Can't convert object to primitive value")},N0={}.hasOwnProperty,ae=function(i,n){return N0.call(i,n)},_u=Ce.document,B0=Ve(_u)&&Ve(_u.createElement),xf=function(i){return B0?_u.createElement(i):{}},Af=!ye&&!Pe(function(){return Object.defineProperty(xf("div"),"a",{get:function(){return 7}}).a!=7}),$f=Object.getOwnPropertyDescriptor,L0=ye?$f:function(n,e){if(n=Ot(n),e=Yi(e,!0),Af)try{return $f(n,e)}catch(t){}if(ae(n,e))return ui(!Nn.f.call(n,e),n[e])},Ln={f:L0},z0=/#|\.prototype\./,zn=function(i,n){var e=H0[j0(i)];return e==U0?!0:e==W0?!1:typeof n=="function"?Pe(n):!!n},j0=zn.normalize=function(i){return String(i).replace(z0,".").toLowerCase()},H0=zn.data={},W0=zn.NATIVE="N",U0=zn.POLYFILL="P",V0=zn,de={},li=function(i){if(typeof i!="function")throw TypeError(String(i)+" is not a function");return i},hi=function(i,n,e){if(li(i),n===void 0)return i;switch(e){case 0:return function(){return i.call(n)};case 1:return function(t){return i.call(n,t)};case 2:return function(t,r){return i.call(n,t,r)};case 3:return function(t,r,a){return i.call(n,t,r,a)}}return function(){return i.apply(n,arguments)}},vt=function(i){if(!Ve(i))throw TypeError(String(i)+" is not an object");return i},Df=Object.defineProperty,G0=ye?Df:function(n,e,t){if(vt(n),e=Yi(e,!0),vt(t),Af)try{return Df(n,e,t)}catch(r){}if("get"in t||"set"in t)throw TypeError("Accessors not supported");return"value"in t&&(n[e]=t.value),n},$t={f:G0},Wt=ye?function(i,n,e){return $t.f(i,n,ui(1,e))}:function(i,n,e){return i[n]=e,i},q0=Ln.f,K0=function(i){var n=function(e,t,r){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(e);case 2:return new i(e,t)}return new i(e,t,r)}return i.apply(this,arguments)};return n.prototype=i.prototype,n},ie=function(i,n){var e=i.target,t=i.global,r=i.stat,a=i.proto,o=t?Ce:r?Ce[e]:(Ce[e]||{}).prototype,s=t?de:de[e]||(de[e]={}),u=s.prototype,l,h,f,d,c,v,m,w,g;for(d in n)l=V0(t?d:e+(r?".":"#")+d,i.forced),h=!l&&o&&ae(o,d),v=s[d],h&&(i.noTargetGet?(g=q0(o,d),m=g&&g.value):m=o[d]),c=h&&m?m:n[d],!(h&&typeof v==typeof c)&&(i.bind&&h?w=hi(c,Ce):i.wrap&&h?w=K0(c):a&&typeof c=="function"?w=hi(Function.call,c):w=c,(i.sham||c&&c.sham||v&&v.sham)&&Wt(w,"sham",!0),s[d]=w,a&&(f=e+"Prototype",ae(de,f)||Wt(de,f,{}),de[f][d]=c,i.real&&u&&!u[d]&&Wt(u,d,c)))},pr=Array.isArray||function(n){return Nr(n)=="Array"},X0=Math.ceil,Y0=Math.floor,po=function(i){return isNaN(i=+i)?0:(i>0?Y0:X0)(i)},Q0=Math.min,Ut=function(i){return i>0?Q0(po(i),9007199254740991):0},Mf=function(i,n,e,t,r,a,o,s){for(var u=r,l=0,h=o?hi(o,s,3):!1,f;l<t;){if(l in e){if(f=h?h(e[l],l,n):e[l],a>0&&pr(f))u=Mf(i,n,f,Ut(f.length),u,a-1)-1;else{if(u>=9007199254740991)throw TypeError("Exceed the acceptable array length");i[u]=f}u++}l++}return u},Z0=Mf,pt=function(i){return Object(Bn(i))},J0=function(i,n){try{Wt(Ce,i,n)}catch(e){Ce[i]=n}return n},Ff="__core-js_shared__",ew=Ce[Ff]||J0(Ff,{}),fi=ew,di=Qt(function(i){(i.exports=function(n,e){return fi[n]||(fi[n]=e!==void 0?e:{})})("versions",[]).push({version:"3.7.0",mode:"pure",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),tw=0,rw=Math.random(),jn=function(i){return"Symbol("+String(i===void 0?"":i)+")_"+(++tw+rw).toString(36)},gr=!!Object.getOwnPropertySymbols&&!Pe(function(){return!String(Symbol())}),Rf=gr&&!Symbol.sham&&typeof Symbol.iterator=="symbol",go=di("wks"),Hn=Ce.Symbol,iw=Rf?Hn:Hn&&Hn.withoutSetter||jn,Be=function(i){return ae(go,i)||(gr&&ae(Hn,i)?go[i]=Hn[i]:go[i]=iw("Symbol."+i)),go[i]},nw=Be("species"),yo=function(i,n){var e;return pr(i)&&(e=i.constructor,typeof e=="function"&&(e===Array||pr(e.prototype))?e=void 0:Ve(e)&&(e=e[nw],e===null&&(e=void 0))),new(e===void 0?Array:e)(n===0?0:n)};ie({target:"Array",proto:!0},{flatMap:function(n){var e=pt(this),t=Ut(e.length),r;return li(n),r=yo(e,0),r.length=Z0(r,e,e,t,0,1,n,arguments.length>1?arguments[1]:void 0),r}});var Le=function(i){return de[i+"Prototype"]},X3=Le("Array").flatMap,aw=[].push,ci=function(i){var n=i==1,e=i==2,t=i==3,r=i==4,a=i==6,o=i==5||a;return function(s,u,l,h){for(var f=pt(s),d=vo(f),c=hi(u,l,3),v=Ut(d.length),m=0,w=h||yo,g=n?w(s,v):e?w(s,0):void 0,E,_;v>m;m++)if((o||m in d)&&(E=d[m],_=c(E,m,f),i)){if(n)g[m]=_;else if(_)switch(i){case 3:return!0;case 5:return E;case 6:return m;case 2:aw.call(g,E)}else if(r)return!1}return a?-1:t||r?r:g}},Qi={forEach:ci(0),map:ci(1),filter:ci(2),some:ci(3),every:ci(4),find:ci(5),findIndex:ci(6)},Nf=function(i){return typeof i=="function"?i:void 0},vi=function(i,n){return arguments.length<2?Nf(de[i])||Nf(Ce[i]):de[i]&&de[i][n]||Ce[i]&&Ce[i][n]},mo=vi("navigator","userAgent")||"",Bf=Ce.process,Lf=Bf&&Bf.versions,zf=Lf&&Lf.v8,yr,bo;zf?(yr=zf.split("."),bo=yr[0]+yr[1]):mo&&(yr=mo.match(/Edge\/(\d+)/),(!yr||yr[1]>=74)&&(yr=mo.match(/Chrome\/(\d+)/),yr&&(bo=yr[1])));var wo=bo&&+bo,ow=Be("species"),Wn=function(i){return wo>=51||!Pe(function(){var n=[],e=n.constructor={};return e[ow]=function(){return{foo:1}},n[i](Boolean).foo!==1})},sw=Object.defineProperty,Eu={},jf=function(i){throw i},mr=function(i,n){if(ae(Eu,i))return Eu[i];n||(n={});var e=[][i],t=ae(n,"ACCESSORS")?n.ACCESSORS:!1,r=ae(n,0)?n[0]:jf,a=ae(n,1)?n[1]:void 0;return Eu[i]=!!e&&!Pe(function(){if(t&&!ye)return!0;var o={length:-1};t?sw(o,1,{enumerable:!0,get:jf}):o[1]=1,e.call(o,r,a)})},uw=Qi.map,lw=Wn("map"),hw=mr("map");ie({target:"Array",proto:!0,forced:!lw||!hw},{map:function(n){return uw(this,n,arguments.length>1?arguments[1]:void 0)}});var fw=Le("Array").map,Hf=Array.prototype,dw=function(i){var n=i.map;return i===Hf||i instanceof Array&&n===Hf.map?fw:n},cw=dw,Vt=cw,vw=Qi.filter,pw=Wn("filter"),gw=mr("filter");ie({target:"Array",proto:!0,forced:!pw||!gw},{filter:function(n){return vw(this,n,arguments.length>1?arguments[1]:void 0)}});var yw=Le("Array").filter,Wf=Array.prototype,mw=function(i){var n=i.filter;return i===Wf||i instanceof Array&&n===Wf.filter?yw:n},bw=mw,Zi=bw,Uf=function(i){return function(n,e,t,r){li(e);var a=pt(n),o=vo(a),s=Ut(a.length),u=i?s-1:0,l=i?-1:1;if(t<2)for(;;){if(u in o){r=o[u],u+=l;break}if(u+=l,i?u<0:s<=u)throw TypeError("Reduce of empty array with no initial value")}for(;i?u>=0:s>u;u+=l)u in o&&(r=e(r,o[u],u,a));return r}},ww={left:Uf(!1),right:Uf(!0)},Un=function(i,n){var e=[][i];return!!e&&Pe(function(){e.call(null,n||function(){throw 1},1)})},_w=Nr(Ce.process)=="process",Ew=ww.left,Sw=Un("reduce"),kw=mr("reduce",{1:0}),Tw=!_w&&wo>79&&wo<83;ie({target:"Array",proto:!0,forced:!Sw||!kw||Tw},{reduce:function(n){return Ew(this,n,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Ow=Le("Array").reduce,Vf=Array.prototype,Pw=function(i){var n=i.reduce;return i===Vf||i instanceof Array&&n===Vf.reduce?Ow:n},Iw=Pw,Cw=Iw,Gf=[].slice,Su={},xw=function(i,n,e){if(!(n in Su)){for(var t=[],r=0;r<n;r++)t[r]="a["+r+"]";Su[n]=Function("C,a","return new C("+t.join(",")+")")}return Su[n](i,e)},qf=Function.bind||function(n){var e=li(this),t=Gf.call(arguments,1),r=function(){var o=t.concat(Gf.call(arguments));return this instanceof r?xw(e,o.length,o):e.apply(n,o)};return Ve(e.prototype)&&(r.prototype=e.prototype),r};ie({target:"Function",proto:!0},{bind:qf});var Aw=Le("Function").bind,Kf=Function.prototype,$w=function(i){var n=i.bind;return i===Kf||i instanceof Function&&n===Kf.bind?Aw:n},Dw=$w,Xf=Dw;function Mw(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}var _o=Mw;ie({target:"Object",stat:!0,forced:!ye,sham:!ye},{defineProperty:$t.f});var Yf=Qt(function(i){var n=de.Object,e=i.exports=function(r,a,o){return n.defineProperty(r,a,o)};n.defineProperty.sham&&(e.sham=!0)}),Fw=Yf,Qf=Fw;function Zf(i,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Qf(i,t.key,t)}}function Rw(i,n,e){return n&&Zf(i.prototype,n),e&&Zf(i,e),i}var Eo=Rw,Nw=Yf,Bw=Nw,Lw=Math.max,zw=Math.min,Ji=function(i,n){var e=po(i);return e<0?Lw(e+n,0):zw(e,n)},Jf=function(i){return function(n,e,t){var r=Ot(n),a=Ut(r.length),o=Ji(t,a),s;if(i&&e!=e){for(;a>o;)if(s=r[o++],s!=s)return!0}else for(;a>o;o++)if((i||o in r)&&r[o]===e)return i||o||0;return!i&&-1}},ku={includes:Jf(!0),indexOf:Jf(!1)},en={},jw=ku.indexOf,ed=function(i,n){var e=Ot(i),t=0,r=[],a;for(a in e)!ae(en,a)&&ae(e,a)&&r.push(a);for(;n.length>t;)ae(e,a=n[t++])&&(~jw(r,a)||r.push(a));return r},So=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],br=Object.keys||function(n){return ed(n,So)},td=ye?Object.defineProperties:function(n,e){vt(n);for(var t=br(e),r=t.length,a=0,o;r>a;)$t.f(n,o=t[a++],e[o]);return n};ie({target:"Object",stat:!0,forced:!ye,sham:!ye},{defineProperties:td});var Hw=Qt(function(i){var n=de.Object,e=i.exports=function(r,a){return n.defineProperties(r,a)};n.defineProperties.sham&&(e.sham=!0)}),Ww=Hw,Uw=Ww,Vw=So.concat("length","prototype"),Gw=Object.getOwnPropertyNames||function(n){return ed(n,Vw)},Tu={f:Gw},qw=Object.getOwnPropertySymbols,Vn={f:qw},rd=vi("Reflect","ownKeys")||function(n){var e=Tu.f(vt(n)),t=Vn.f;return t?e.concat(t(n)):e},pi=function(i,n,e){var t=Yi(n);t in i?$t.f(i,t,ui(0,e)):i[t]=e};ie({target:"Object",stat:!0,sham:!ye},{getOwnPropertyDescriptors:function(n){for(var e=Ot(n),t=Ln.f,r=rd(e),a={},o=0,s,u;r.length>o;)u=t(e,s=r[o++]),u!==void 0&&pi(a,s,u);return a}});var Kw=de.Object.getOwnPropertyDescriptors,Xw=Kw,id=Xw,nd=Ln.f,Yw=Pe(function(){nd(1)}),Qw=!ye||Yw;ie({target:"Object",stat:!0,forced:Qw,sham:!ye},{getOwnPropertyDescriptor:function(n,e){return nd(Ot(n),e)}});var Zw=Qt(function(i){var n=de.Object,e=i.exports=function(r,a){return n.getOwnPropertyDescriptor(r,a)};n.getOwnPropertyDescriptor.sham&&(e.sham=!0)}),Jw=Zw,ad=Jw,e_=vi("document","documentElement"),od=di("keys"),ko=function(i){return od[i]||(od[i]=jn(i))},sd=">",ud="<",Ou="prototype",Pu="script",ld=ko("IE_PROTO"),Iu=function(){},hd=function(i){return ud+Pu+sd+i+ud+"/"+Pu+sd},t_=function(i){i.write(hd("")),i.close();var n=i.parentWindow.Object;return i=null,n},r_=function(){var i=xf("iframe"),n="java"+Pu+":",e;return i.style.display="none",e_.appendChild(i),i.src=String(n),e=i.contentWindow.document,e.open(),e.write(hd("document.F=Object")),e.close(),e.F},Cu,To=function(){try{Cu=document.domain&&new ActiveXObject("htmlfile")}catch(n){}To=Cu?t_(Cu):r_();for(var i=So.length;i--;)delete To[Ou][So[i]];return To()};en[ld]=!0;var wr=Object.create||function(n,e){var t;return n!==null?(Iu[Ou]=vt(n),t=new Iu,Iu[Ou]=null,t[ld]=n):t=To(),e===void 0?t:td(t,e)},fd=Tu.f,i_={}.toString,dd=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],n_=function(i){try{return fd(i)}catch(n){return dd.slice()}},a_=function(n){return dd&&i_.call(n)=="[object Window]"?n_(n):fd(Ot(n))},cd={f:a_},Oo=function(i,n,e,t){t&&t.enumerable?i[n]=e:Wt(i,n,e)},o_=Be,xu={f:o_},s_=$t.f,Ge=function(i){var n=de.Symbol||(de.Symbol={});ae(n,i)||s_(n,i,{value:xu.f(i)})},u_=Be("toStringTag"),vd={};vd[u_]="z";var Au=String(vd)==="[object z]",l_=Be("toStringTag"),h_=Nr(function(){return arguments}())=="Arguments",f_=function(i,n){try{return i[n]}catch(e){}},Br=Au?Nr:function(i){var n,e,t;return i===void 0?"Undefined":i===null?"Null":typeof(e=f_(n=Object(i),l_))=="string"?e:h_?Nr(n):(t=Nr(n))=="Object"&&typeof n.callee=="function"?"Arguments":t},d_=Au?{}.toString:function(){return"[object "+Br(this)+"]"},c_=$t.f,pd=Be("toStringTag"),Gn=function(i,n,e,t){if(i){var r=e?i:i.prototype;ae(r,pd)||c_(r,pd,{configurable:!0,value:n}),t&&!Au&&Wt(r,"toString",d_)}},v_=Function.toString;typeof fi.inspectSource!="function"&&(fi.inspectSource=function(i){return v_.call(i)});var p_=fi.inspectSource,gd=Ce.WeakMap,g_=typeof gd=="function"&&/native code/.test(p_(gd)),y_=Ce.WeakMap,Po,qn,Io,m_=function(i){return Io(i)?qn(i):Po(i,{})},b_=function(i){return function(n){var e;if(!Ve(n)||(e=qn(n)).type!==i)throw TypeError("Incompatible receiver, "+i+" required");return e}};g_?(gi=fi.state||(fi.state=new y_),yd=gi.get,md=gi.has,bd=gi.set,Po=function(i,n){return n.facade=i,bd.call(gi,i,n),n},qn=function(i){return yd.call(gi,i)||{}},Io=function(i){return md.call(gi,i)}):(tn=ko("state"),en[tn]=!0,Po=function(i,n){return n.facade=i,Wt(i,tn,n),n},qn=function(i){return ae(i,tn)?i[tn]:{}},Io=function(i){return ae(i,tn)});var gi,yd,md,bd,tn,Zt={set:Po,get:qn,has:Io,enforce:m_,getterFor:b_},Co=Qi.forEach,gt=ko("hidden"),xo="Symbol",_r="prototype",wd=Be("toPrimitive"),w_=Zt.set,_d=Zt.getterFor(xo),Gt=Object[_r],yt=Ce.Symbol,Kn=vi("JSON","stringify"),Ed=Ln.f,Lr=$t.f,Sd=cd.f,__=Nn.f,Er=di("symbols"),Xn=di("op-symbols"),$u=di("string-to-symbol-registry"),Du=di("symbol-to-string-registry"),E_=di("wks"),Mu=Ce.QObject,Fu=!Mu||!Mu[_r]||!Mu[_r].findChild,Ru=ye&&Pe(function(){return wr(Lr({},"a",{get:function(){return Lr(this,"a",{value:7}).a}})).a!=7})?function(i,n,e){var t=Ed(Gt,n);t&&delete Gt[n],Lr(i,n,e),t&&i!==Gt&&Lr(Gt,n,t)}:Lr,Nu=function(i,n){var e=Er[i]=wr(yt[_r]);return w_(e,{type:xo,tag:i,description:n}),ye||(e.description=n),e},Bu=Rf?function(i){return typeof i=="symbol"}:function(i){return Object(i)instanceof yt},Ao=function(n,e,t){n===Gt&&Ao(Xn,e,t),vt(n);var r=Yi(e,!0);return vt(t),ae(Er,r)?(t.enumerable?(ae(n,gt)&&n[gt][r]&&(n[gt][r]=!1),t=wr(t,{enumerable:ui(0,!1)})):(ae(n,gt)||Lr(n,gt,ui(1,{})),n[gt][r]=!0),Ru(n,r,t)):Lr(n,r,t)},Td=function(n,e){vt(n);var t=Ot(e),r=br(t).concat(Lu(t));return Co(r,function(a){(!ye||kd.call(t,a))&&Ao(n,a,t[a])}),n},S_=function(n,e){return e===void 0?wr(n):Td(wr(n),e)},kd=function(n){var e=Yi(n,!0),t=__.call(this,e);return this===Gt&&ae(Er,e)&&!ae(Xn,e)?!1:t||!ae(this,e)||!ae(Er,e)||ae(this,gt)&&this[gt][e]?t:!0},Od=function(n,e){var t=Ot(n),r=Yi(e,!0);if(!(t===Gt&&ae(Er,r)&&!ae(Xn,r))){var a=Ed(t,r);return a&&ae(Er,r)&&!(ae(t,gt)&&t[gt][r])&&(a.enumerable=!0),a}},Pd=function(n){var e=Sd(Ot(n)),t=[];return Co(e,function(r){!ae(Er,r)&&!ae(en,r)&&t.push(r)}),t},Lu=function(n){var e=n===Gt,t=Sd(e?Xn:Ot(n)),r=[];return Co(t,function(a){ae(Er,a)&&(!e||ae(Gt,a))&&r.push(Er[a])}),r};gr||(yt=function(){if(this instanceof yt)throw TypeError("Symbol is not a constructor");var n=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),e=jn(n),t=function(r){this===Gt&&t.call(Xn,r),ae(this,gt)&&ae(this[gt],e)&&(this[gt][e]=!1),Ru(this,e,ui(1,r))};return ye&&Fu&&Ru(Gt,e,{configurable:!0,set:t}),Nu(e,n)},Oo(yt[_r],"toString",function(){return _d(this).tag}),Oo(yt,"withoutSetter",function(i){return Nu(jn(i),i)}),Nn.f=kd,$t.f=Ao,Ln.f=Od,Tu.f=cd.f=Pd,Vn.f=Lu,xu.f=function(i){return Nu(Be(i),i)},ye&&Lr(yt[_r],"description",{configurable:!0,get:function(){return _d(this).description}}));ie({global:!0,wrap:!0,forced:!gr,sham:!gr},{Symbol:yt});Co(br(E_),function(i){Ge(i)});ie({target:xo,stat:!0,forced:!gr},{for:function(i){var n=String(i);if(ae($u,n))return $u[n];var e=yt(n);return $u[n]=e,Du[e]=n,e},keyFor:function(n){if(!Bu(n))throw TypeError(n+" is not a symbol");if(ae(Du,n))return Du[n]},useSetter:function(){Fu=!0},useSimple:function(){Fu=!1}});ie({target:"Object",stat:!0,forced:!gr,sham:!ye},{create:S_,defineProperty:Ao,defineProperties:Td,getOwnPropertyDescriptor:Od});ie({target:"Object",stat:!0,forced:!gr},{getOwnPropertyNames:Pd,getOwnPropertySymbols:Lu});ie({target:"Object",stat:!0,forced:Pe(function(){Vn.f(1)})},{getOwnPropertySymbols:function(n){return Vn.f(pt(n))}});Kn&&(Id=!gr||Pe(function(){var i=yt();return Kn([i])!="[null]"||Kn({a:i})!="{}"||Kn(Object(i))!="{}"}),ie({target:"JSON",stat:!0,forced:Id},{stringify:function(n,e,t){for(var r=[n],a=1,o;arguments.length>a;)r.push(arguments[a++]);if(o=e,!(!Ve(e)&&n===void 0||Bu(n)))return pr(e)||(e=function(s,u){if(typeof o=="function"&&(u=o.call(this,s,u)),!Bu(u))return u}),r[1]=e,Kn.apply(null,r)}}));var Id;yt[_r][wd]||Wt(yt[_r],wd,yt[_r].valueOf);Gn(yt,xo);en[gt]=!0;var k_=de.Object.getOwnPropertySymbols,T_=k_,Cd=T_,Jt={},xd=!Pe(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype}),Ad=ko("IE_PROTO"),O_=Object.prototype,Yn=xd?Object.getPrototypeOf:function(i){return i=pt(i),ae(i,Ad)?i[Ad]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?O_:null},Y3=Be("iterator"),$d=!1,$o,zu,ju;[].keys&&(ju=[].keys(),"next"in ju?(zu=Yn(Yn(ju)),zu!==Object.prototype&&($o=zu)):$d=!0);$o==null&&($o={});var Hu={IteratorPrototype:$o,BUGGY_SAFARI_ITERATORS:$d},P_=Hu.IteratorPrototype,I_=function(){return this},C_=function(i,n,e){var t=n+" Iterator";return i.prototype=wr(P_,{next:ui(1,e)}),Gn(i,t,!1,!0),Jt[t]=I_,i},x_=function(i){if(!Ve(i)&&i!==null)throw TypeError("Can't set "+String(i)+" as a prototype");return i},A_=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,n={},e;try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),i=n instanceof Array}catch(t){}return function(r,a){return vt(r),x_(a),i?e.call(r,a):r.__proto__=a,r}}():void 0),$_=Hu.IteratorPrototype,Do=Hu.BUGGY_SAFARI_ITERATORS,Wu=Be("iterator"),Dd="keys",Mo="values",Md="entries",D_=function(){return this},Uu=function(i,n,e,t,r,a,o){C_(e,n,t);var s=function(g){if(g===r&&d)return d;if(!Do&&g in h)return h[g];switch(g){case Dd:return function(){return new e(this,g)};case Mo:return function(){return new e(this,g)};case Md:return function(){return new e(this,g)}}return function(){return new e(this)}},u=n+" Iterator",l=!1,h=i.prototype,f=h[Wu]||h["@@iterator"]||r&&h[r],d=!Do&&f||s(r),c=n=="Array"&&h.entries||f,v,m,w;if(c&&(v=Yn(c.call(new i)),$_!==Object.prototype&&v.next&&(Gn(v,u,!0,!0),Jt[u]=D_)),r==Mo&&f&&f.name!==Mo&&(l=!0,d=function(){return f.call(this)}),o&&h[Wu]!==d&&Wt(h,Wu,d),Jt[n]=d,r)if(m={values:s(Mo),keys:a?d:s(Dd),entries:s(Md)},o)for(w in m)(Do||l||!(w in h))&&Oo(h,w,m[w]);else ie({target:n,proto:!0,forced:Do||l},m);return m},Fd="Array Iterator",M_=Zt.set,F_=Zt.getterFor(Fd),Q3=Uu(Array,"Array",function(i,n){M_(this,{type:Fd,target:Ot(i),index:0,kind:n})},function(){var i=F_(this),n=i.target,e=i.kind,t=i.index++;return!n||t>=n.length?(i.target=void 0,{value:void 0,done:!0}):e=="keys"?{value:t,done:!1}:e=="values"?{value:n[t],done:!1}:{value:[t,n[t]],done:!1}},"values");Jt.Arguments=Jt.Array;var R_={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Rd=Be("toStringTag");for(var Vu in R_)Gu=Ce[Vu],Fo=Gu&&Gu.prototype,Fo&&Br(Fo)!==Rd&&Wt(Fo,Rd,Vu),Jt[Vu]=Jt.Array;var Gu,Fo,Nd=function(i){return function(n,e){var t=String(Bn(n)),r=po(e),a=t.length,o,s;return r<0||r>=a?i?"":void 0:(o=t.charCodeAt(r),o<55296||o>56319||r+1===a||(s=t.charCodeAt(r+1))<56320||s>57343?i?t.charAt(r):o:i?t.slice(r,r+2):(o-55296<<10)+(s-56320)+65536)}},N_={codeAt:Nd(!1),charAt:Nd(!0)},B_=N_.charAt,Bd="String Iterator",L_=Zt.set,z_=Zt.getterFor(Bd);Uu(String,"String",function(i){L_(this,{type:Bd,string:String(i),index:0})},function(){var n=z_(this),e=n.string,t=n.index,r;return t>=e.length?{value:void 0,done:!0}:(r=B_(e,t),n.index+=r.length,{value:r,done:!1})});var j_=Be("iterator"),Ro=function(i){if(i!=null)return i[j_]||i["@@iterator"]||Jt[Br(i)]},H_=function(i){var n=Ro(i);if(typeof n!="function")throw TypeError(String(i)+" is not iterable");return vt(n.call(i))},W_=H_,yi=W_,U_=Ro,qu=U_,Ku=function(i){var n=i.return;if(n!==void 0)return vt(n.call(i)).value},V_=function(i,n,e,t){try{return t?n(vt(e)[0],e[1]):n(e)}catch(r){throw Ku(i),r}},G_=Be("iterator"),q_=Array.prototype,Ld=function(i){return i!==void 0&&(Jt.Array===i||q_[G_]===i)},K_=function(n){var e=pt(n),t=typeof this=="function"?this:Array,r=arguments.length,a=r>1?arguments[1]:void 0,o=a!==void 0,s=Ro(e),u=0,l,h,f,d,c,v;if(o&&(a=hi(a,r>2?arguments[2]:void 0,2)),s!=null&&!(t==Array&&Ld(s)))for(d=s.call(e),c=d.next,h=new t;!(f=c.call(d)).done;u++)v=o?V_(d,a,[f.value,u],!0):f.value,pi(h,u,v);else for(l=Ut(e.length),h=new t(l);l>u;u++)v=o?a(e[u],u):e[u],pi(h,u,v);return h.length=u,h},zd=Be("iterator"),jd=!1;try{Hd=0,Xu={next:function(){return{done:!!Hd++}},return:function(){jd=!0}},Xu[zd]=function(){return this},Array.from(Xu,function(){throw 2})}catch(i){}var Hd,Xu,X_=function(i,n){if(!n&&!jd)return!1;var e=!1;try{var t={};t[zd]=function(){return{next:function(){return{done:e=!0}}}},i(t)}catch(r){}return e},Y_=!X_(function(i){Array.from(i)});ie({target:"Array",stat:!0,forced:Y_},{from:K_});var Wd=de.Array.from,Q_=Wd,Yu=Q_,Z_=function(n){for(var e=pt(this),t=Ut(e.length),r=arguments.length,a=Ji(r>1?arguments[1]:void 0,t),o=r>2?arguments[2]:void 0,s=o===void 0?t:Ji(o,t);s>a;)e[a++]=n;return e};ie({target:"Array",proto:!0},{fill:Z_});var Z3=Le("Array").fill,J_=[].slice,eE=/MSIE .\./.test(mo),Ud=function(i){return function(n,e){var t=arguments.length>2,r=t?J_.call(arguments,2):void 0;return i(t?function(){(typeof n=="function"?n:Function(n)).apply(this,r)}:n,e)}};ie({global:!0,bind:!0,forced:eE},{setTimeout:Ud(Ce.setTimeout),setInterval:Ud(Ce.setInterval)});var tE=de.setTimeout,rE=tE,No=vi("JSON","stringify"),iE=/[\uD800-\uDFFF]/g,Vd=/^[\uD800-\uDBFF]$/,Gd=/^[\uDC00-\uDFFF]$/,nE=function(i,n,e){var t=e.charAt(n-1),r=e.charAt(n+1);return Vd.test(i)&&!Gd.test(r)||Gd.test(i)&&!Vd.test(t)?"\\u"+i.charCodeAt(0).toString(16):i},aE=Pe(function(){return No("\uDF06\uD834")!=='"\\udf06\\ud834"'||No("\uDEAD")!=='"\\udead"'});No&&ie({target:"JSON",stat:!0,forced:aE},{stringify:function(n,e,t){var r=No.apply(null,arguments);return typeof r=="string"?r.replace(iE,nE):r}});de.JSON||(de.JSON={stringify:JSON.stringify});var oE=function(n,e,t){return de.JSON.stringify.apply(null,arguments)},sE=oE,uE=sE;ie({target:"Object",stat:!0,sham:!ye},{create:wr});var lE=de.Object,qd=function(n,e){return lE.create(n,e)},hE=qd,fE=hE;function dE(i,n,e){return n in i?Qf(i,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[n]=e,i}var rn=dE,Qn=`	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF`,Bo="["+Qn+"]",cE=RegExp("^"+Bo+Bo+"*"),vE=RegExp(Bo+Bo+"*$"),Qu=function(i){return function(n){var e=String(Bn(n));return i&1&&(e=e.replace(cE,"")),i&2&&(e=e.replace(vE,"")),e}},Kd={start:Qu(1),end:Qu(2),trim:Qu(3)},Xd="âÂá ",pE=function(i){return Pe(function(){return!!Qn[i]()||Xd[i]()!=Xd||Qn[i].name!==i})},gE=Kd.trim;ie({target:"String",proto:!0,forced:pE("trim")},{trim:function(){return gE(this)}});var J3=Le("String").trim,yE=ku.indexOf,Yd=[].indexOf,Qd=!!Yd&&1/[1].indexOf(1,-0)<0,mE=Un("indexOf"),bE=mr("indexOf",{ACCESSORS:!0,1:0});ie({target:"Array",proto:!0,forced:Qd||!mE||!bE},{indexOf:function(n){return Qd?Yd.apply(this,arguments)||0:yE(this,n,arguments.length>1?arguments[1]:void 0)}});var eH=Le("Array").indexOf,wE=Kd.trim,Lo=Ce.parseInt,_E=/^[+-]?0[Xx]/,EE=Lo(Qn+"08")!==8||Lo(Qn+"0x16")!==22,Zd=EE?function(n,e){var t=wE(String(n));return Lo(t,e>>>0||(_E.test(t)?16:10))}:Lo;ie({global:!0,forced:parseInt!=Zd},{parseInt:Zd});var SE=Nn.f,Jd=function(i){return function(n){for(var e=Ot(n),t=br(e),r=t.length,a=0,o=[],s;r>a;)s=t[a++],(!ye||SE.call(e,s))&&o.push(i?[s,e[s]]:e[s]);return o}},kE={entries:Jd(!0),values:Jd(!1)},TE=kE.values;ie({target:"Object",stat:!0},{values:function(n){return TE(n)}});var tH=de.Object.values,OE=Pe(function(){Yn(1)});ie({target:"Object",stat:!0,forced:OE,sham:!xd},{getPrototypeOf:function(n){return Yn(pt(n))}});var PE=de.Object.getPrototypeOf,IE=ku.includes,CE=mr("indexOf",{ACCESSORS:!0,1:0});ie({target:"Array",proto:!0,forced:!CE},{includes:function(n){return IE(this,n,arguments.length>1?arguments[1]:void 0)}});var rH=Le("Array").includes,xE=Be("match"),AE=function(i){var n;return Ve(i)&&((n=i[xE])!==void 0?!!n:Nr(i)=="RegExp")},$E=function(i){if(AE(i))throw TypeError("The method doesn't accept regular expressions");return i},DE=Be("match"),ME=function(i){var n=/./;try{"/./"[i](n)}catch(e){try{return n[DE]=!1,"/./"[i](n)}catch(t){}}return!1};ie({target:"String",proto:!0,forced:!ME("includes")},{includes:function(n){return!!~String(Bn(this)).indexOf($E(n),arguments.length>1?arguments[1]:void 0)}});var iH=Le("String").includes,nn=Object.assign,ec=Object.defineProperty,tc=!nn||Pe(function(){if(ye&&nn({b:1},nn(ec({},"a",{enumerable:!0,get:function(){ec(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var i={},n={},e=Symbol(),t="abcdefghijklmnopqrst";return i[e]=7,t.split("").forEach(function(r){n[r]=r}),nn({},i)[e]!=7||br(nn({},n)).join("")!=t})?function(n,e){for(var t=pt(n),r=arguments.length,a=1,o=Vn.f,s=Nn.f;r>a;)for(var u=vo(arguments[a++]),l=o?br(u).concat(o(u)):br(u),h=l.length,f=0,d;h>f;)d=l[f++],(!ye||s.call(u,d))&&(t[d]=u[d]);return t}:nn;ie({target:"Object",stat:!0,forced:Object.assign!==tc},{assign:tc});var FE=de.Object.assign,RE=FE,NE=RE,BE=Wn("splice"),LE=mr("splice",{ACCESSORS:!0,0:0,1:2}),zE=Math.max,jE=Math.min,HE=9007199254740991,WE="Maximum allowed length exceeded";ie({target:"Array",proto:!0,forced:!BE||!LE},{splice:function(n,e){var t=pt(this),r=Ut(t.length),a=Ji(n,r),o=arguments.length,s,u,l,h,f,d;if(o===0?s=u=0:o===1?(s=0,u=r-a):(s=o-2,u=jE(zE(po(e),0),r-a)),r+s-u>HE)throw TypeError(WE);for(l=yo(t,u),h=0;h<u;h++)f=a+h,f in t&&pi(l,h,t[f]);if(l.length=u,s<u){for(h=a;h<r-u;h++)f=h+u,d=h+s,f in t?t[d]=t[f]:delete t[d];for(h=r;h>r-u+s;h--)delete t[h-1]}else if(s>u)for(h=r-u;h>a;h--)f=h+u-1,d=h+s-1,f in t?t[d]=t[f]:delete t[d];for(h=0;h<s;h++)t[h+a]=arguments[h+2];return t.length=r-u+s,l}});var UE=Le("Array").splice,rc=Array.prototype,VE=function(i){var n=i.splice;return i===rc||i instanceof Array&&n===rc.splice?UE:n},GE=VE,ic=GE,qE=[].reverse,nc=[1,2];ie({target:"Array",proto:!0,forced:String(nc)===String(nc.reverse())},{reverse:function(){return pr(this)&&(this.length=this.length),qE.call(this)}});var KE=Le("Array").reverse,ac=Array.prototype,XE=function(i){var n=i.reverse;return i===ac||i instanceof Array&&n===ac.reverse?KE:n},YE=XE,QE=YE,ZE=Qi.forEach,JE=Un("forEach"),e1=mr("forEach"),oc=!JE||!e1?function(n){return ZE(this,n,arguments.length>1?arguments[1]:void 0)}:[].forEach;ie({target:"Array",proto:!0,forced:[].forEach!=oc},{forEach:oc});var t1=Le("Array").forEach,r1=t1,sc=Array.prototype,i1={DOMTokenList:!0,NodeList:!0},n1=function(i){var n=i.forEach;return i===sc||i instanceof Array&&n===sc.forEach||i1.hasOwnProperty(Br(i))?r1:n},mi=n1;ie({target:"Array",stat:!0},{isArray:pr});var uc=de.Array.isArray,a1=uc,lc=a1;function o1(i){if(lc(i))return i}var s1=o1,u1=Be("iterator"),l1=function(i){var n=Object(i);return n[u1]!==void 0||"@@iterator"in n||Jt.hasOwnProperty(Br(n))},h1=l1,hc=h1,fc=Be("isConcatSpreadable"),dc=9007199254740991,cc="Maximum allowed index exceeded",f1=wo>=51||!Pe(function(){var i=[];return i[fc]=!1,i.concat()[0]!==i}),d1=Wn("concat"),c1=function(i){if(!Ve(i))return!1;var n=i[fc];return n!==void 0?!!n:pr(i)},v1=!f1||!d1;ie({target:"Array",proto:!0,forced:v1},{concat:function(n){var e=pt(this),t=yo(e,0),r=0,a,o,s,u,l;for(a=-1,s=arguments.length;a<s;a++)if(l=a===-1?e:arguments[a],c1(l)){if(u=Ut(l.length),r+u>dc)throw TypeError(cc);for(o=0;o<u;o++,r++)o in l&&pi(t,r,l[o])}else{if(r>=dc)throw TypeError(cc);pi(t,r++,l)}return t.length=r,t}});Ge("asyncIterator");Ge("hasInstance");Ge("isConcatSpreadable");Ge("iterator");Ge("match");Ge("matchAll");Ge("replace");Ge("search");Ge("species");Ge("split");Ge("toPrimitive");Ge("toStringTag");Ge("unscopables");Gn(Ce.JSON,"JSON",!0);var vc=de.Symbol;Ge("asyncDispose");Ge("dispose");Ge("observable");Ge("patternMatch");Ge("replaceAll");var p1=vc,an=p1;function g1(i,n){if(!(typeof an=="undefined"||!hc(Object(i)))){var e=[],t=!0,r=!1,a=void 0;try{for(var o=yi(i),s;!(t=(s=o.next()).done)&&(e.push(s.value),!(n&&e.length===n));t=!0);}catch(u){r=!0,a=u}finally{try{!t&&o.return!=null&&o.return()}finally{if(r)throw a}}return e}}var y1=g1,m1=Wd,pc=m1,b1=Wn("slice"),w1=mr("slice",{ACCESSORS:!0,0:0,1:2}),_1=Be("species"),E1=[].slice,S1=Math.max;ie({target:"Array",proto:!0,forced:!b1||!w1},{slice:function(n,e){var t=Ot(this),r=Ut(t.length),a=Ji(n,r),o=Ji(e===void 0?r:e,r),s,u,l;if(pr(t)&&(s=t.constructor,typeof s=="function"&&(s===Array||pr(s.prototype))?s=void 0:Ve(s)&&(s=s[_1],s===null&&(s=void 0)),s===Array||s===void 0))return E1.call(t,a,o);for(u=new(s===void 0?Array:s)(S1(o-a,0)),l=0;a<o;a++,l++)a in t&&pi(u,l,t[a]);return u.length=l,u}});var k1=Le("Array").slice,gc=Array.prototype,yc=function(i){var n=i.slice;return i===gc||i instanceof Array&&n===gc.slice?k1:n},T1=yc,O1=T1;function P1(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}var Zu=P1;function I1(i,n){var e;if(!!i){if(typeof i=="string")return Zu(i,n);var t=O1(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return pc(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Zu(i,n)}}var mc=I1;function C1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var x1=C1;function A1(i,n){return s1(i)||y1(i,n)||mc(i,n)||x1()}var mt=A1;ie({target:"Date",stat:!0},{now:function(){return new Date().getTime()}});var nH=de.Date.now,$1=Pe(function(){br(1)});ie({target:"Object",stat:!0,forced:$1},{keys:function(n){return br(pt(n))}});var D1=de.Object.keys,M1=D1,Ju=M1,F1=uc,Pt=F1,bc=xu.f("iterator"),R1=bc,N1=R1,Dt=Qt(function(i){function n(e){return typeof an=="function"&&typeof N1=="symbol"?i.exports=n=function(r){return typeof r}:i.exports=n=function(r){return r&&typeof an=="function"&&r.constructor===an&&r!==an.prototype?"symbol":typeof r},n(e)}i.exports=n});ie({target:"Reflect",stat:!0},{ownKeys:rd});var B1=de.Reflect.ownKeys,L1=B1,z1=L1,j1=yc,zo=j1;function H1(i){if(lc(i))return Zu(i)}var W1=H1;function U1(i){if(typeof an!="undefined"&&hc(Object(i)))return pc(i)}var V1=U1;function G1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q1=G1;function K1(i){return W1(i)||V1(i)||mc(i)||q1()}var bt=K1,X1=Le("Array").concat,wc=Array.prototype,Y1=function(i){var n=i.concat;return i===wc||i instanceof Array&&n===wc.concat?X1:n},Q1=Y1,jo=Q1,Z1=vc,Ho=Z1,J1=Qt(function(i){i.exports=n;function n(t){if(t)return e(t)}function e(t){for(var r in n.prototype)t[r]=n.prototype[r];return t}n.prototype.on=n.prototype.addEventListener=function(t,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(r),this},n.prototype.once=function(t,r){function a(){this.off(t,a),r.apply(this,arguments)}return a.fn=r,this.on(t,a),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+t];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var o,s=0;s<a.length;s++)if(o=a[s],o===r||o.fn===r){a.splice(s,1);break}return a.length===0&&delete this._callbacks["$"+t],this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),a=this._callbacks["$"+t],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(a){a=a.slice(0);for(var o=0,s=a.length;o<s;++o)a[o].apply(this,r)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}});function qt(){return qt=Object.assign||function(i){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}return i},qt.apply(this,arguments)}function Mt(i,n){i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n}function Wo(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var el;typeof Object.assign!="function"?el=function(n){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(n),t=1;t<arguments.length;t++){var r=arguments[t];if(r!=null)for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])}return e}:el=Object.assign;var bi=el,_c=["","webkit","Moz","MS","ms","o"],eS=typeof document=="undefined"?{style:{}}:document.createElement("div"),tS="function",on=Math.round,wi=Math.abs,tl=Date.now;function Uo(i,n){for(var e,t,r=n[0].toUpperCase()+n.slice(1),a=0;a<_c.length;){if(e=_c[a],t=e?e+r:n,t in i)return t;a++}}var Sr;typeof window=="undefined"?Sr={}:Sr=window;var Ec=Uo(eS.style,"touchAction"),Sc=Ec!==void 0;function rS(){if(!Sc)return!1;var i={},n=Sr.CSS&&Sr.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){return i[e]=n?Sr.CSS.supports("touch-action",e):!0}),i}var kc="compute",Tc="auto",rl="manipulation",_i="none",Zn="pan-x",Jn="pan-y",Vo=rS(),iS=/mobile|tablet|ip(ad|hone|od)|android/i,Oc="ontouchstart"in Sr,nS=Uo(Sr,"PointerEvent")!==void 0,aS=Oc&&iS.test(navigator.userAgent),ea="touch",oS="pen",il="mouse",sS="kinect",uS=25,lt=1,Ei=2,ze=4,wt=8,Go=1,ta=2,ra=4,ia=8,sn=16,er=ta|ra,Si=ia|sn,Pc=er|Si,Ic=["x","y"],qo=["clientX","clientY"];function kr(i,n,e){var t;if(!!i)if(i.forEach)i.forEach(n,e);else if(i.length!==void 0)for(t=0;t<i.length;)n.call(e,i[t],t,i),t++;else for(t in i)i.hasOwnProperty(t)&&n.call(e,i[t],t,i)}function Ko(i,n){return typeof i===tS?i.apply(n&&n[0]||void 0,n):i}function ki(i,n){return i.indexOf(n)>-1}function lS(i){if(ki(i,_i))return _i;var n=ki(i,Zn),e=ki(i,Jn);return n&&e?_i:n||e?n?Zn:Jn:ki(i,rl)?rl:Tc}var Cc=function(){function i(e,t){this.manager=e,this.set(t)}var n=i.prototype;return n.set=function(t){t===kc&&(t=this.compute()),Sc&&this.manager.element.style&&Vo[t]&&(this.manager.element.style[Ec]=t),this.actions=t.toLowerCase().trim()},n.update=function(){this.set(this.manager.options.touchAction)},n.compute=function(){var t=[];return kr(this.manager.recognizers,function(r){Ko(r.options.enable,[r])&&(t=t.concat(r.getTouchAction()))}),lS(t.join(" "))},n.preventDefaults=function(t){var r=t.srcEvent,a=t.offsetDirection;if(this.manager.session.prevented){r.preventDefault();return}var o=this.actions,s=ki(o,_i)&&!Vo[_i],u=ki(o,Jn)&&!Vo[Jn],l=ki(o,Zn)&&!Vo[Zn];if(s){var h=t.pointers.length===1,f=t.distance<2,d=t.deltaTime<250;if(h&&f&&d)return}if(!(l&&u)&&(s||u&&a&er||l&&a&Si))return this.preventSrc(r)},n.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},i}();function nl(i,n){for(;i;){if(i===n)return!0;i=i.parentNode}return!1}function xc(i){var n=i.length;if(n===1)return{x:on(i[0].clientX),y:on(i[0].clientY)};for(var e=0,t=0,r=0;r<n;)e+=i[r].clientX,t+=i[r].clientY,r++;return{x:on(e/n),y:on(t/n)}}function Ac(i){for(var n=[],e=0;e<i.pointers.length;)n[e]={clientX:on(i.pointers[e].clientX),clientY:on(i.pointers[e].clientY)},e++;return{timeStamp:tl(),pointers:n,center:xc(n),deltaX:i.deltaX,deltaY:i.deltaY}}function Xo(i,n,e){e||(e=Ic);var t=n[e[0]]-i[e[0]],r=n[e[1]]-i[e[1]];return Math.sqrt(t*t+r*r)}function al(i,n,e){e||(e=Ic);var t=n[e[0]]-i[e[0]],r=n[e[1]]-i[e[1]];return Math.atan2(r,t)*180/Math.PI}function $c(i,n){return i===n?Go:wi(i)>=wi(n)?i<0?ta:ra:n<0?ia:sn}function hS(i,n){var e=n.center,t=i.offsetDelta||{},r=i.prevDelta||{},a=i.prevInput||{};(n.eventType===lt||a.eventType===ze)&&(r=i.prevDelta={x:a.deltaX||0,y:a.deltaY||0},t=i.offsetDelta={x:e.x,y:e.y}),n.deltaX=r.x+(e.x-t.x),n.deltaY=r.y+(e.y-t.y)}function Dc(i,n,e){return{x:n/i||0,y:e/i||0}}function fS(i,n){return Xo(n[0],n[1],qo)/Xo(i[0],i[1],qo)}function dS(i,n){return al(n[1],n[0],qo)+al(i[1],i[0],qo)}function cS(i,n){var e=i.lastInterval||n,t=n.timeStamp-e.timeStamp,r,a,o,s;if(n.eventType!==wt&&(t>uS||e.velocity===void 0)){var u=n.deltaX-e.deltaX,l=n.deltaY-e.deltaY,h=Dc(t,u,l);a=h.x,o=h.y,r=wi(h.x)>wi(h.y)?h.x:h.y,s=$c(u,l),i.lastInterval=n}else r=e.velocity,a=e.velocityX,o=e.velocityY,s=e.direction;n.velocity=r,n.velocityX=a,n.velocityY=o,n.direction=s}function vS(i,n){var e=i.session,t=n.pointers,r=t.length;e.firstInput||(e.firstInput=Ac(n)),r>1&&!e.firstMultiple?e.firstMultiple=Ac(n):r===1&&(e.firstMultiple=!1);var a=e.firstInput,o=e.firstMultiple,s=o?o.center:a.center,u=n.center=xc(t);n.timeStamp=tl(),n.deltaTime=n.timeStamp-a.timeStamp,n.angle=al(s,u),n.distance=Xo(s,u),hS(e,n),n.offsetDirection=$c(n.deltaX,n.deltaY);var l=Dc(n.deltaTime,n.deltaX,n.deltaY);n.overallVelocityX=l.x,n.overallVelocityY=l.y,n.overallVelocity=wi(l.x)>wi(l.y)?l.x:l.y,n.scale=o?fS(o.pointers,t):1,n.rotation=o?dS(o.pointers,t):0,n.maxPointers=e.prevInput?n.pointers.length>e.prevInput.maxPointers?n.pointers.length:e.prevInput.maxPointers:n.pointers.length,cS(e,n);var h=i.element,f=n.srcEvent,d;f.composedPath?d=f.composedPath()[0]:f.path?d=f.path[0]:d=f.target,nl(d,h)&&(h=d),n.target=h}function pS(i,n,e){var t=e.pointers.length,r=e.changedPointers.length,a=n&lt&&t-r==0,o=n&(ze|wt)&&t-r==0;e.isFirst=!!a,e.isFinal=!!o,a&&(i.session={}),e.eventType=n,vS(i,e),i.emit("hammer.input",e),i.recognize(e),i.session.prevInput=e}function na(i){return i.trim().split(/\s+/g)}function aa(i,n,e){kr(na(n),function(t){i.addEventListener(t,e,!1)})}function oa(i,n,e){kr(na(n),function(t){i.removeEventListener(t,e,!1)})}function Mc(i){var n=i.ownerDocument||i;return n.defaultView||n.parentWindow||window}var un=function(){function i(e,t){var r=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(a){Ko(e.options.enable,[e])&&r.handler(a)},this.init()}var n=i.prototype;return n.handler=function(){},n.init=function(){this.evEl&&aa(this.element,this.evEl,this.domHandler),this.evTarget&&aa(this.target,this.evTarget,this.domHandler),this.evWin&&aa(Mc(this.element),this.evWin,this.domHandler)},n.destroy=function(){this.evEl&&oa(this.element,this.evEl,this.domHandler),this.evTarget&&oa(this.target,this.evTarget,this.domHandler),this.evWin&&oa(Mc(this.element),this.evWin,this.domHandler)},i}();function Ti(i,n,e){if(i.indexOf&&!e)return i.indexOf(n);for(var t=0;t<i.length;){if(e&&i[t][e]==n||!e&&i[t]===n)return t;t++}return-1}var gS={pointerdown:lt,pointermove:Ei,pointerup:ze,pointercancel:wt,pointerout:wt},yS={2:ea,3:oS,4:il,5:sS},Fc="pointerdown",Rc="pointermove pointerup pointercancel";Sr.MSPointerEvent&&!Sr.PointerEvent&&(Fc="MSPointerDown",Rc="MSPointerMove MSPointerUp MSPointerCancel");var Nc=function(i){Mt(n,i);function n(){var t,r=n.prototype;return r.evEl=Fc,r.evWin=Rc,t=i.apply(this,arguments)||this,t.store=t.manager.session.pointerEvents=[],t}var e=n.prototype;return e.handler=function(r){var a=this.store,o=!1,s=r.type.toLowerCase().replace("ms",""),u=gS[s],l=yS[r.pointerType]||r.pointerType,h=l===ea,f=Ti(a,r.pointerId,"pointerId");u&lt&&(r.button===0||h)?f<0&&(a.push(r),f=a.length-1):u&(ze|wt)&&(o=!0),!(f<0)&&(a[f]=r,this.callback(this.manager,u,{pointers:a,changedPointers:[r],pointerType:l,srcEvent:r}),o&&a.splice(f,1))},n}(un);function sa(i){return Array.prototype.slice.call(i,0)}function ol(i,n,e){for(var t=[],r=[],a=0;a<i.length;){var o=n?i[a][n]:i[a];Ti(r,o)<0&&t.push(i[a]),r[a]=o,a++}return e&&(n?t=t.sort(function(s,u){return s[n]>u[n]}):t=t.sort()),t}var mS={touchstart:lt,touchmove:Ei,touchend:ze,touchcancel:wt},bS="touchstart touchmove touchend touchcancel",sl=function(i){Mt(n,i);function n(){var t;return n.prototype.evTarget=bS,t=i.apply(this,arguments)||this,t.targetIds={},t}var e=n.prototype;return e.handler=function(r){var a=mS[r.type],o=wS.call(this,r,a);!o||this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:ea,srcEvent:r})},n}(un);function wS(i,n){var e=sa(i.touches),t=this.targetIds;if(n&(lt|Ei)&&e.length===1)return t[e[0].identifier]=!0,[e,e];var r,a,o=sa(i.changedTouches),s=[],u=this.target;if(a=e.filter(function(l){return nl(l.target,u)}),n===lt)for(r=0;r<a.length;)t[a[r].identifier]=!0,r++;for(r=0;r<o.length;)t[o[r].identifier]&&s.push(o[r]),n&(ze|wt)&&delete t[o[r].identifier],r++;if(!!s.length)return[ol(a.concat(s),"identifier",!0),s]}var _S={mousedown:lt,mousemove:Ei,mouseup:ze},ES="mousedown",SS="mousemove mouseup",ul=function(i){Mt(n,i);function n(){var t,r=n.prototype;return r.evEl=ES,r.evWin=SS,t=i.apply(this,arguments)||this,t.pressed=!1,t}var e=n.prototype;return e.handler=function(r){var a=_S[r.type];a&lt&&r.button===0&&(this.pressed=!0),a&Ei&&r.which!==1&&(a=ze),!!this.pressed&&(a&ze&&(this.pressed=!1),this.callback(this.manager,a,{pointers:[r],changedPointers:[r],pointerType:il,srcEvent:r}))},n}(un),kS=2500,Bc=25;function Lc(i){var n=i.changedPointers,e=n[0];if(e.identifier===this.primaryTouch){var t={x:e.clientX,y:e.clientY},r=this.lastTouches;this.lastTouches.push(t);var a=function(){var s=r.indexOf(t);s>-1&&r.splice(s,1)};setTimeout(a,kS)}}function TS(i,n){i&lt?(this.primaryTouch=n.changedPointers[0].identifier,Lc.call(this,n)):i&(ze|wt)&&Lc.call(this,n)}function OS(i){for(var n=i.srcEvent.clientX,e=i.srcEvent.clientY,t=0;t<this.lastTouches.length;t++){var r=this.lastTouches[t],a=Math.abs(n-r.x),o=Math.abs(e-r.y);if(a<=Bc&&o<=Bc)return!0}return!1}var zc=function(){var i=function(n){Mt(e,n);function e(r,a){var o;return o=n.call(this,r,a)||this,o.handler=function(s,u,l){var h=l.pointerType===ea,f=l.pointerType===il;if(!(f&&l.sourceCapabilities&&l.sourceCapabilities.firesTouchEvents)){if(h)TS.call(Wo(Wo(o)),u,l);else if(f&&OS.call(Wo(Wo(o)),l))return;o.callback(s,u,l)}},o.touch=new sl(o.manager,o.handler),o.mouse=new ul(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var t=e.prototype;return t.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(un);return i}();function PS(i){var n,e=i.options.inputClass;return e?n=e:nS?n=Nc:aS?n=sl:Oc?n=zc:n=ul,new n(i,pS)}function ln(i,n,e){return Array.isArray(i)?(kr(i,e[n],e),!0):!1}var Yo=1,Ft=2,hn=4,zr=8,Tr=zr,ua=16,tr=32,IS=1;function CS(){return IS++}function Qo(i,n){var e=n.manager;return e?e.get(i):i}function jc(i){return i&ua?"cancel":i&zr?"end":i&hn?"move":i&Ft?"start":""}var la=function(){function i(e){e===void 0&&(e={}),this.options=qt({enable:!0},e),this.id=CS(),this.manager=null,this.state=Yo,this.simultaneous={},this.requireFail=[]}var n=i.prototype;return n.set=function(t){return bi(this.options,t),this.manager&&this.manager.touchAction.update(),this},n.recognizeWith=function(t){if(ln(t,"recognizeWith",this))return this;var r=this.simultaneous;return t=Qo(t,this),r[t.id]||(r[t.id]=t,t.recognizeWith(this)),this},n.dropRecognizeWith=function(t){return ln(t,"dropRecognizeWith",this)?this:(t=Qo(t,this),delete this.simultaneous[t.id],this)},n.requireFailure=function(t){if(ln(t,"requireFailure",this))return this;var r=this.requireFail;return t=Qo(t,this),Ti(r,t)===-1&&(r.push(t),t.requireFailure(this)),this},n.dropRequireFailure=function(t){if(ln(t,"dropRequireFailure",this))return this;t=Qo(t,this);var r=Ti(this.requireFail,t);return r>-1&&this.requireFail.splice(r,1),this},n.hasRequireFailures=function(){return this.requireFail.length>0},n.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},n.emit=function(t){var r=this,a=this.state;function o(s){r.manager.emit(s,t)}a<zr&&o(r.options.event+jc(a)),o(r.options.event),t.additionalEvent&&o(t.additionalEvent),a>=zr&&o(r.options.event+jc(a))},n.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=tr},n.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(tr|Yo)))return!1;t++}return!0},n.recognize=function(t){var r=bi({},t);if(!Ko(this.options.enable,[this,r])){this.reset(),this.state=tr;return}this.state&(Tr|ua|tr)&&(this.state=Yo),this.state=this.process(r),this.state&(Ft|hn|zr|ua)&&this.tryEmit(r)},n.process=function(t){},n.getTouchAction=function(){},n.reset=function(){},i}(),ll=function(i){Mt(n,i);function n(t){var r;return t===void 0&&(t={}),r=i.call(this,qt({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},t))||this,r.pTime=!1,r.pCenter=!1,r._timer=null,r._input=null,r.count=0,r}var e=n.prototype;return e.getTouchAction=function(){return[rl]},e.process=function(r){var a=this,o=this.options,s=r.pointers.length===o.pointers,u=r.distance<o.threshold,l=r.deltaTime<o.time;if(this.reset(),r.eventType&lt&&this.count===0)return this.failTimeout();if(u&&l&&s){if(r.eventType!==ze)return this.failTimeout();var h=this.pTime?r.timeStamp-this.pTime<o.interval:!0,f=!this.pCenter||Xo(this.pCenter,r.center)<o.posThreshold;this.pTime=r.timeStamp,this.pCenter=r.center,!f||!h?this.count=1:this.count+=1,this._input=r;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){a.state=Tr,a.tryEmit()},o.interval),Ft):Tr}return tr},e.failTimeout=function(){var r=this;return this._timer=setTimeout(function(){r.state=tr},this.options.interval),tr},e.reset=function(){clearTimeout(this._timer)},e.emit=function(){this.state===Tr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},n}(la),fn=function(i){Mt(n,i);function n(t){return t===void 0&&(t={}),i.call(this,qt({pointers:1},t))||this}var e=n.prototype;return e.attrTest=function(r){var a=this.options.pointers;return a===0||r.pointers.length===a},e.process=function(r){var a=this.state,o=r.eventType,s=a&(Ft|hn),u=this.attrTest(r);return s&&(o&wt||!u)?a|ua:s||u?o&ze?a|zr:a&Ft?a|hn:Ft:tr},n}(la);function Hc(i){return i===sn?"down":i===ia?"up":i===ta?"left":i===ra?"right":""}var hl=function(i){Mt(n,i);function n(t){var r;return t===void 0&&(t={}),r=i.call(this,qt({event:"pan",threshold:10,pointers:1,direction:Pc},t))||this,r.pX=null,r.pY=null,r}var e=n.prototype;return e.getTouchAction=function(){var r=this.options.direction,a=[];return r&er&&a.push(Jn),r&Si&&a.push(Zn),a},e.directionTest=function(r){var a=this.options,o=!0,s=r.distance,u=r.direction,l=r.deltaX,h=r.deltaY;return u&a.direction||(a.direction&er?(u=l===0?Go:l<0?ta:ra,o=l!==this.pX,s=Math.abs(r.deltaX)):(u=h===0?Go:h<0?ia:sn,o=h!==this.pY,s=Math.abs(r.deltaY))),r.direction=u,o&&s>a.threshold&&u&a.direction},e.attrTest=function(r){return fn.prototype.attrTest.call(this,r)&&(this.state&Ft||!(this.state&Ft)&&this.directionTest(r))},e.emit=function(r){this.pX=r.deltaX,this.pY=r.deltaY;var a=Hc(r.direction);a&&(r.additionalEvent=this.options.event+a),i.prototype.emit.call(this,r)},n}(fn),Wc=function(i){Mt(n,i);function n(t){return t===void 0&&(t={}),i.call(this,qt({event:"swipe",threshold:10,velocity:.3,direction:er|Si,pointers:1},t))||this}var e=n.prototype;return e.getTouchAction=function(){return hl.prototype.getTouchAction.call(this)},e.attrTest=function(r){var a=this.options.direction,o;return a&(er|Si)?o=r.overallVelocity:a&er?o=r.overallVelocityX:a&Si&&(o=r.overallVelocityY),i.prototype.attrTest.call(this,r)&&a&r.offsetDirection&&r.distance>this.options.threshold&&r.maxPointers===this.options.pointers&&wi(o)>this.options.velocity&&r.eventType&ze},e.emit=function(r){var a=Hc(r.offsetDirection);a&&this.manager.emit(this.options.event+a,r),this.manager.emit(this.options.event,r)},n}(fn),Uc=function(i){Mt(n,i);function n(t){return t===void 0&&(t={}),i.call(this,qt({event:"pinch",threshold:0,pointers:2},t))||this}var e=n.prototype;return e.getTouchAction=function(){return[_i]},e.attrTest=function(r){return i.prototype.attrTest.call(this,r)&&(Math.abs(r.scale-1)>this.options.threshold||this.state&Ft)},e.emit=function(r){if(r.scale!==1){var a=r.scale<1?"in":"out";r.additionalEvent=this.options.event+a}i.prototype.emit.call(this,r)},n}(fn),Vc=function(i){Mt(n,i);function n(t){return t===void 0&&(t={}),i.call(this,qt({event:"rotate",threshold:0,pointers:2},t))||this}var e=n.prototype;return e.getTouchAction=function(){return[_i]},e.attrTest=function(r){return i.prototype.attrTest.call(this,r)&&(Math.abs(r.rotation)>this.options.threshold||this.state&Ft)},n}(fn),Gc=function(i){Mt(n,i);function n(t){var r;return t===void 0&&(t={}),r=i.call(this,qt({event:"press",pointers:1,time:251,threshold:9},t))||this,r._timer=null,r._input=null,r}var e=n.prototype;return e.getTouchAction=function(){return[Tc]},e.process=function(r){var a=this,o=this.options,s=r.pointers.length===o.pointers,u=r.distance<o.threshold,l=r.deltaTime>o.time;if(this._input=r,!u||!s||r.eventType&(ze|wt)&&!l)this.reset();else if(r.eventType&lt)this.reset(),this._timer=setTimeout(function(){a.state=Tr,a.tryEmit()},o.time);else if(r.eventType&ze)return Tr;return tr},e.reset=function(){clearTimeout(this._timer)},e.emit=function(r){this.state===Tr&&(r&&r.eventType&ze?this.manager.emit(this.options.event+"up",r):(this._input.timeStamp=tl(),this.manager.emit(this.options.event,this._input)))},n}(la),qc={domEvents:!1,touchAction:kc,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Kc=[[Vc,{enable:!1}],[Uc,{enable:!1},["rotate"]],[Wc,{direction:er}],[hl,{direction:er},["swipe"]],[ll],[ll,{event:"doubletap",taps:2},["tap"]],[Gc]],xS=1,Xc=2;function Yc(i,n){var e=i.element;if(!!e.style){var t;kr(i.options.cssProps,function(r,a){t=Uo(e.style,a),n?(i.oldCssProps[t]=e.style[t],e.style[t]=r):e.style[t]=i.oldCssProps[t]||""}),n||(i.oldCssProps={})}}function AS(i,n){var e=document.createEvent("Event");e.initEvent(i,!0,!0),e.gesture=n,n.target.dispatchEvent(e)}var Qc=function(){function i(e,t){var r=this;this.options=bi({},qc,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=PS(this),this.touchAction=new Cc(this,this.options.touchAction),Yc(this,!0),kr(this.options.recognizers,function(a){var o=r.add(new a[0](a[1]));a[2]&&o.recognizeWith(a[2]),a[3]&&o.requireFailure(a[3])},this)}var n=i.prototype;return n.set=function(t){return bi(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},n.stop=function(t){this.session.stopped=t?Xc:xS},n.recognize=function(t){var r=this.session;if(!r.stopped){this.touchAction.preventDefaults(t);var a,o=this.recognizers,s=r.curRecognizer;(!s||s&&s.state&Tr)&&(r.curRecognizer=null,s=null);for(var u=0;u<o.length;)a=o[u],r.stopped!==Xc&&(!s||a===s||a.canRecognizeWith(s))?a.recognize(t):a.reset(),!s&&a.state&(Ft|hn|zr)&&(r.curRecognizer=a,s=a),u++}},n.get=function(t){if(t instanceof la)return t;for(var r=this.recognizers,a=0;a<r.length;a++)if(r[a].options.event===t)return r[a];return null},n.add=function(t){if(ln(t,"add",this))return this;var r=this.get(t.options.event);return r&&this.remove(r),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},n.remove=function(t){if(ln(t,"remove",this))return this;var r=this.get(t);if(t){var a=this.recognizers,o=Ti(a,r);o!==-1&&(a.splice(o,1),this.touchAction.update())}return this},n.on=function(t,r){if(t===void 0||r===void 0)return this;var a=this.handlers;return kr(na(t),function(o){a[o]=a[o]||[],a[o].push(r)}),this},n.off=function(t,r){if(t===void 0)return this;var a=this.handlers;return kr(na(t),function(o){r?a[o]&&a[o].splice(Ti(a[o],r),1):delete a[o]}),this},n.emit=function(t,r){this.options.domEvents&&AS(t,r);var a=this.handlers[t]&&this.handlers[t].slice();if(!(!a||!a.length)){r.type=t,r.preventDefault=function(){r.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](r),o++}},n.destroy=function(){this.element&&Yc(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},i}(),$S={touchstart:lt,touchmove:Ei,touchend:ze,touchcancel:wt},DS="touchstart",MS="touchstart touchmove touchend touchcancel",RS=function(i){Mt(n,i);function n(){var t,r=n.prototype;return r.evTarget=DS,r.evWin=MS,t=i.apply(this,arguments)||this,t.started=!1,t}var e=n.prototype;return e.handler=function(r){var a=$S[r.type];if(a===lt&&(this.started=!0),!!this.started){var o=FS.call(this,r,a);a&(ze|wt)&&o[0].length-o[1].length==0&&(this.started=!1),this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:ea,srcEvent:r})}},n}(un);function FS(i,n){var e=sa(i.touches),t=sa(i.changedTouches);return n&(ze|wt)&&(e=ol(e.concat(t),"identifier",!0)),[e,t]}function Zc(i,n,e){var t="DEPRECATED METHOD: "+n+`
`+e+` AT 
`;return function(){var r=new Error("get-stack-trace"),a=r&&r.stack?r.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,t,a),i.apply(this,arguments)}}var Jc=Zc(function(i,n,e){for(var t=Object.keys(n),r=0;r<t.length;)(!e||e&&i[t[r]]===void 0)&&(i[t[r]]=n[t[r]]),r++;return i},"extend","Use `assign`."),NS=Zc(function(i,n){return Jc(i,n,!0)},"merge","Use `assign`.");function BS(i,n,e){var t=n.prototype,r;r=i.prototype=Object.create(t),r.constructor=i,r._super=t,e&&bi(r,e)}function ev(i,n){return function(){return i.apply(n,arguments)}}var LS=function(){var i=function(e,t){return t===void 0&&(t={}),new Qc(e,qt({recognizers:Kc.concat()},t))};return i.VERSION="2.0.17-rc",i.DIRECTION_ALL=Pc,i.DIRECTION_DOWN=sn,i.DIRECTION_LEFT=ta,i.DIRECTION_RIGHT=ra,i.DIRECTION_UP=ia,i.DIRECTION_HORIZONTAL=er,i.DIRECTION_VERTICAL=Si,i.DIRECTION_NONE=Go,i.DIRECTION_DOWN=sn,i.INPUT_START=lt,i.INPUT_MOVE=Ei,i.INPUT_END=ze,i.INPUT_CANCEL=wt,i.STATE_POSSIBLE=Yo,i.STATE_BEGAN=Ft,i.STATE_CHANGED=hn,i.STATE_ENDED=zr,i.STATE_RECOGNIZED=Tr,i.STATE_CANCELLED=ua,i.STATE_FAILED=tr,i.Manager=Qc,i.Input=un,i.TouchAction=Cc,i.TouchInput=sl,i.MouseInput=ul,i.PointerEventInput=Nc,i.TouchMouseInput=zc,i.SingleTouchInput=RS,i.Recognizer=la,i.AttrRecognizer=fn,i.Tap=ll,i.Pan=hl,i.Swipe=Wc,i.Pinch=Uc,i.Rotate=Vc,i.Press=Gc,i.on=aa,i.off=oa,i.each=kr,i.merge=NS,i.extend=Jc,i.bindFn=ev,i.assign=bi,i.inherit=BS,i.bindFn=ev,i.prefixed=Uo,i.toArray=sa,i.inArray=Ti,i.uniqueArray=ol,i.splitStr=na,i.boolOrFn=Ko,i.hasParent=nl,i.addEventListeners=aa,i.removeEventListeners=oa,i.defaults=bi({},qc,{preset:Kc}),i}();function tv(i,n){var e;if(typeof Ho=="undefined"||qu(i)==null){if(Pt(i)||(e=zS(i))||n&&i&&typeof i.length=="number"){e&&(i=e);var t=0,r=function(){};return{s:r,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=yi(i)},n:function(){var l=e.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function zS(i,n){var e;if(!!i){if(typeof i=="string")return rv(i,n);var t=zo(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Yu(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rv(i,n)}}function rv(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}var iv=Ho("DELETE");function jS(i){for(var n,e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return nv.apply(void 0,jo(n=[{},i]).call(n,t))}function nv(){var i=Zo.apply(void 0,arguments);return av(i),i}function Zo(){for(var i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];if(n.length<2)return n[0];if(n.length>2){var t;return Zo.apply(void 0,jo(t=[nv(n[0],n[1])]).call(t,bt(zo(n).call(n,2))))}var r=n[0],a=n[1],o=tv(z1(a)),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;Object.prototype.propertyIsEnumerable.call(a,u)&&(a[u]===iv?delete r[u]:r[u]!==null&&a[u]!==null&&Dt(r[u])==="object"&&Dt(a[u])==="object"&&!Pt(r[u])&&!Pt(a[u])?r[u]=Zo(r[u],a[u]):r[u]=ov(a[u]))}}catch(l){o.e(l)}finally{o.f()}return r}function ov(i){return Pt(i)?Vt(i).call(i,function(n){return ov(n)}):Dt(i)==="object"&&i!==null?Zo({},i):i}function av(i){for(var n=0,e=Ju(i);n<e.length;n++){var t=e[n];i[t]===iv?delete i[t]:Dt(i[t])==="object"&&i[t]!==null&&av(i[t])}}function HS(){var i=function(){};return{on:i,off:i,destroy:i,emit:i,get:function(){return{set:i}}}}var WS=typeof window!="undefined"?window.Hammer||LS:function(){return HS()};function Or(i){var n=this,e;this._cleanupQueue=[],this.active=!1,this._dom={container:i,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){n._dom.overlay.parentNode.removeChild(n._dom.overlay)});var t=WS(this._dom.overlay);t.on("tap",Xf(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(function(){t.destroy()});var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];mi(r).call(r,function(a){t.on(a,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(a){US(a.target,i)||n.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",n._onClick)})),this._escListener=function(a){("key"in a?a.key==="Escape":a.keyCode===27)&&n.deactivate()}}J1(Or.prototype);Or.current=null;Or.prototype.destroy=function(){var i,n;this.deactivate();var e=tv(QE(i=ic(n=this._cleanupQueue).call(n,0)).call(i)),t;try{for(e.s();!(t=e.n()).done;){var r=t.value;r()}}catch(a){e.e(a)}finally{e.f()}};Or.prototype.activate=function(){Or.current&&Or.current.deactivate(),Or.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Or.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Or.prototype._onTapOverlay=function(i){this.activate(),i.srcEvent.stopPropagation()};function US(i,n){for(;i;){if(i===n)return!0;i=i.parentNode}return!1}var fl=vi("Reflect","construct"),sv=Pe(function(){function i(){}return!(fl(function(){},[],i)instanceof i)}),uv=!Pe(function(){fl(function(){})}),lv=sv||uv;ie({target:"Reflect",stat:!0,forced:lv,sham:lv},{construct:function(n,e){li(n),vt(e);var t=arguments.length<3?n:li(arguments[2]);if(uv&&!sv)return fl(n,e,t);if(n==t){switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(qf.apply(n,r))}var a=t.prototype,o=wr(Ve(a)?a:Object.prototype),s=Function.apply.call(n,o,e);return Ve(s)?s:o}});var VS=de.Reflect.construct,GS=VS,Jo=GS,qS=Le("Array").entries,KS=qS,hv=Array.prototype,XS={DOMTokenList:!0,NodeList:!0},YS=function(i){var n=i.entries;return i===hv||i instanceof Array&&n===hv.entries||XS.hasOwnProperty(Br(i))?KS:n},QS=YS,ZS=Qt(function(i){var n=function(e){var t=Object.prototype,r=t.hasOwnProperty,a,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function h(F,$,H){return Object.defineProperty(F,$,{value:H,enumerable:!0,configurable:!0,writable:!0}),F[$]}try{h({},"")}catch(F){h=function($,H,X){return $[H]=X}}function f(F,$,H,X){var U=$&&$.prototype instanceof E?$:E,ne=Object.create(U.prototype),fe=new ee(X||[]);return ne._invoke=R(F,H,fe),ne}e.wrap=f;function d(F,$,H){try{return{type:"normal",arg:F.call($,H)}}catch(X){return{type:"throw",arg:X}}}var c="suspendedStart",v="suspendedYield",m="executing",w="completed",g={};function E(){}function _(){}function S(){}var k={};k[s]=function(){return this};var O=Object.getPrototypeOf,C=O&&O(O(te([])));C&&C!==t&&r.call(C,s)&&(k=C);var I=S.prototype=E.prototype=Object.create(k);_.prototype=I.constructor=S,S.constructor=_,_.displayName=h(S,l,"GeneratorFunction");function T(F){["next","throw","return"].forEach(function($){h(F,$,function(H){return this._invoke($,H)})})}e.isGeneratorFunction=function(F){var $=typeof F=="function"&&F.constructor;return $?$===_||($.displayName||$.name)==="GeneratorFunction":!1},e.mark=function(F){return Object.setPrototypeOf?Object.setPrototypeOf(F,S):(F.__proto__=S,h(F,l,"GeneratorFunction")),F.prototype=Object.create(I),F},e.awrap=function(F){return{__await:F}};function P(F,$){function H(ne,fe,pe,Ne){var _e=d(F[ne],F,fe);if(_e.type==="throw")Ne(_e.arg);else{var Ue=_e.arg,cr=Ue.value;return cr&&typeof cr=="object"&&r.call(cr,"__await")?$.resolve(cr.__await).then(function(vr){H("next",vr,pe,Ne)},function(vr){H("throw",vr,pe,Ne)}):$.resolve(cr).then(function(vr){Ue.value=vr,pe(Ue)},function(vr){return H("throw",vr,pe,Ne)})}}var X;function U(ne,fe){function pe(){return new $(function(Ne,_e){H(ne,fe,Ne,_e)})}return X=X?X.then(pe,pe):pe()}this._invoke=U}T(P.prototype),P.prototype[u]=function(){return this},e.AsyncIterator=P,e.async=function(F,$,H,X,U){U===void 0&&(U=Promise);var ne=new P(f(F,$,H,X),U);return e.isGeneratorFunction($)?ne:ne.next().then(function(fe){return fe.done?fe.value:ne.next()})};function R(F,$,H){var X=c;return function(ne,fe){if(X===m)throw new Error("Generator is already running");if(X===w){if(ne==="throw")throw fe;return le()}for(H.method=ne,H.arg=fe;;){var pe=H.delegate;if(pe){var Ne=W(pe,H);if(Ne){if(Ne===g)continue;return Ne}}if(H.method==="next")H.sent=H._sent=H.arg;else if(H.method==="throw"){if(X===c)throw X=w,H.arg;H.dispatchException(H.arg)}else H.method==="return"&&H.abrupt("return",H.arg);X=m;var _e=d(F,$,H);if(_e.type==="normal"){if(X=H.done?w:v,_e.arg===g)continue;return{value:_e.arg,done:H.done}}else _e.type==="throw"&&(X=w,H.method="throw",H.arg=_e.arg)}}}function W(F,$){var H=F.iterator[$.method];if(H===a){if($.delegate=null,$.method==="throw"){if(F.iterator.return&&($.method="return",$.arg=a,W(F,$),$.method==="throw"))return g;$.method="throw",$.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var X=d(H,F.iterator,$.arg);if(X.type==="throw")return $.method="throw",$.arg=X.arg,$.delegate=null,g;var U=X.arg;if(!U)return $.method="throw",$.arg=new TypeError("iterator result is not an object"),$.delegate=null,g;if(U.done)$[F.resultName]=U.value,$.next=F.nextLoc,$.method!=="return"&&($.method="next",$.arg=a);else return U;return $.delegate=null,g}T(I),h(I,l,"Generator"),I[s]=function(){return this},I.toString=function(){return"[object Generator]"};function G(F){var $={tryLoc:F[0]};1 in F&&($.catchLoc=F[1]),2 in F&&($.finallyLoc=F[2],$.afterLoc=F[3]),this.tryEntries.push($)}function Q(F){var $=F.completion||{};$.type="normal",delete $.arg,F.completion=$}function ee(F){this.tryEntries=[{tryLoc:"root"}],F.forEach(G,this),this.reset(!0)}e.keys=function(F){var $=[];for(var H in F)$.push(H);return $.reverse(),function X(){for(;$.length;){var U=$.pop();if(U in F)return X.value=U,X.done=!1,X}return X.done=!0,X}};function te(F){if(F){var $=F[s];if($)return $.call(F);if(typeof F.next=="function")return F;if(!isNaN(F.length)){var H=-1,X=function U(){for(;++H<F.length;)if(r.call(F,H))return U.value=F[H],U.done=!1,U;return U.value=a,U.done=!0,U};return X.next=X}}return{next:le}}e.values=te;function le(){return{value:a,done:!0}}return ee.prototype={constructor:ee,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(Q),!F)for(var $ in this)$.charAt(0)==="t"&&r.call(this,$)&&!isNaN(+$.slice(1))&&(this[$]=a)},stop:function(){this.done=!0;var F=this.tryEntries[0],$=F.completion;if($.type==="throw")throw $.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var $=this;function H(Ne,_e){return ne.type="throw",ne.arg=F,$.next=Ne,_e&&($.method="next",$.arg=a),!!_e}for(var X=this.tryEntries.length-1;X>=0;--X){var U=this.tryEntries[X],ne=U.completion;if(U.tryLoc==="root")return H("end");if(U.tryLoc<=this.prev){var fe=r.call(U,"catchLoc"),pe=r.call(U,"finallyLoc");if(fe&&pe){if(this.prev<U.catchLoc)return H(U.catchLoc,!0);if(this.prev<U.finallyLoc)return H(U.finallyLoc)}else if(fe){if(this.prev<U.catchLoc)return H(U.catchLoc,!0)}else if(pe){if(this.prev<U.finallyLoc)return H(U.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(F,$){for(var H=this.tryEntries.length-1;H>=0;--H){var X=this.tryEntries[H];if(X.tryLoc<=this.prev&&r.call(X,"finallyLoc")&&this.prev<X.finallyLoc){var U=X;break}}U&&(F==="break"||F==="continue")&&U.tryLoc<=$&&$<=U.finallyLoc&&(U=null);var ne=U?U.completion:{};return ne.type=F,ne.arg=$,U?(this.method="next",this.next=U.finallyLoc,g):this.complete(ne)},complete:function(F,$){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&$&&(this.next=$),g},finish:function(F){for(var $=this.tryEntries.length-1;$>=0;--$){var H=this.tryEntries[$];if(H.finallyLoc===F)return this.complete(H.completion,H.afterLoc),Q(H),g}},catch:function(F){for(var $=this.tryEntries.length-1;$>=0;--$){var H=this.tryEntries[$];if(H.tryLoc===F){var X=H.completion;if(X.type==="throw"){var U=X.arg;Q(H)}return U}}throw new Error("illegal catch attempt")},delegateYield:function(F,$,H){return this.delegate={iterator:te(F),resultName:$,nextLoc:H},this.method==="next"&&(this.arg=a),g}},e}(i.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}}),_t=ZS,JS=bc,dn=JS,ek=Le("Array").values,tk=ek,fv=Array.prototype,rk={DOMTokenList:!0,NodeList:!0},ik=function(i){var n=i.values;return i===fv||i instanceof Array&&n===fv.values||rk.hasOwnProperty(Br(i))?tk:n},dv=ik,dl=[],cv=dl.sort,nk=Pe(function(){dl.sort(void 0)}),ak=Pe(function(){dl.sort(null)}),ok=Un("sort"),sk=nk||!ak||!ok;ie({target:"Array",proto:!0,forced:sk},{sort:function(n){return n===void 0?cv.call(pt(this)):cv.call(pt(this),li(n))}});var uk=Le("Array").sort,vv=Array.prototype,lk=function(i){var n=i.sort;return i===vv||i instanceof Array&&n===vv.sort?uk:n},hk=lk,cl=hk,fk=Le("Array").keys,dk=fk,pv=Array.prototype,ck={DOMTokenList:!0,NodeList:!0},vk=function(i){var n=i.keys;return i===pv||i instanceof Array&&n===pv.keys||ck.hasOwnProperty(Br(i))?dk:n},cn=vk,pk=Qi.some,gk=Un("some"),yk=mr("some");ie({target:"Array",proto:!0,forced:!gk||!yk},{some:function(n){return pk(this,n,arguments.length>1?arguments[1]:void 0)}});var mk=Le("Array").some,gv=Array.prototype,bk=function(i){var n=i.some;return i===gv||i instanceof Array&&n===gv.some?mk:n},wk=bk,_k=wk,Ek=!Pe(function(){return Object.isExtensible(Object.preventExtensions({}))}),yv=Qt(function(i){var n=$t.f,e=jn("meta"),t=0,r=Object.isExtensible||function(){return!0},a=function(h){n(h,e,{value:{objectID:"O"+ ++t,weakData:{}}})},o=function(h,f){if(!Ve(h))return typeof h=="symbol"?h:(typeof h=="string"?"S":"P")+h;if(!ae(h,e)){if(!r(h))return"F";if(!f)return"E";a(h)}return h[e].objectID},s=function(h,f){if(!ae(h,e)){if(!r(h))return!0;if(!f)return!1;a(h)}return h[e].weakData},u=function(h){return Ek&&l.REQUIRED&&r(h)&&!ae(h,e)&&a(h),h},l=i.exports={REQUIRED:!1,fastKey:o,getWeakData:s,onFreeze:u};en[e]=!0}),ha=function(i,n){this.stopped=i,this.result=n},mv=function(i,n,e){var t=e&&e.that,r=!!(e&&e.AS_ENTRIES),a=!!(e&&e.IS_ITERATOR),o=!!(e&&e.INTERRUPTED),s=hi(n,t,1+r+o),u,l,h,f,d,c,v,m=function(g){return u&&Ku(u),new ha(!0,g)},w=function(g){return r?(vt(g),o?s(g[0],g[1],m):s(g[0],g[1])):o?s(g,m):s(g)};if(a)u=i;else{if(l=Ro(i),typeof l!="function")throw TypeError("Target is not iterable");if(Ld(l)){for(h=0,f=Ut(i.length);f>h;h++)if(d=w(i[h]),d&&d instanceof ha)return d;return new ha(!1)}u=l.call(i)}for(c=u.next;!(v=c.call(u)).done;){try{d=w(v.value)}catch(g){throw Ku(u),g}if(typeof d=="object"&&d&&d instanceof ha)return d}return new ha(!1)},bv=function(i,n,e){if(!(i instanceof n))throw TypeError("Incorrect "+(e?e+" ":"")+"invocation");return i},Sk=$t.f,kk=Qi.forEach,Tk=Zt.set,Ok=Zt.getterFor,wv=function(i,n,e){var t=i.indexOf("Map")!==-1,r=i.indexOf("Weak")!==-1,a=t?"set":"add",o=Ce[i],s=o&&o.prototype,u={},l;if(!ye||typeof o!="function"||!(r||s.forEach&&!Pe(function(){new o().entries().next()})))l=e.getConstructor(n,i,t,a),yv.REQUIRED=!0;else{l=n(function(f,d){Tk(bv(f,l,i),{type:i,collection:new o}),d!=null&&mv(d,f[a],{that:f,AS_ENTRIES:t})});var h=Ok(i);kk(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(f){var d=f=="add"||f=="set";f in s&&!(r&&f=="clear")&&Wt(l.prototype,f,function(c,v){var m=h(this).collection;if(!d&&r&&!Ve(c))return f=="get"?void 0:!1;var w=m[f](c===0?0:c,v);return d?this:w})}),r||Sk(l.prototype,"size",{configurable:!0,get:function(){return h(this).collection.size}})}return Gn(l,i,!1,!0),u[i]=l,ie({global:!0,forced:!0},u),r||e.setStrong(l,i,t),l},_v=function(i,n,e){for(var t in n)e&&e.unsafe&&i[t]?i[t]=n[t]:Oo(i,t,n[t],e);return i},Ev=Be("species"),Pk=function(i){var n=vi(i),e=$t.f;ye&&n&&!n[Ev]&&e(n,Ev,{configurable:!0,get:function(){return this}})},Ik=$t.f,Sv=yv.fastKey,kv=Zt.set,vl=Zt.getterFor,Tv={getConstructor:function(i,n,e,t){var r=i(function(u,l){bv(u,r,n),kv(u,{type:n,index:wr(null),first:void 0,last:void 0,size:0}),ye||(u.size=0),l!=null&&mv(l,u[t],{that:u,AS_ENTRIES:e})}),a=vl(n),o=function(u,l,h){var f=a(u),d=s(u,l),c,v;return d?d.value=h:(f.last=d={index:v=Sv(l,!0),key:l,value:h,previous:c=f.last,next:void 0,removed:!1},f.first||(f.first=d),c&&(c.next=d),ye?f.size++:u.size++,v!=="F"&&(f.index[v]=d)),u},s=function(u,l){var h=a(u),f=Sv(l),d;if(f!=="F")return h.index[f];for(d=h.first;d;d=d.next)if(d.key==l)return d};return _v(r.prototype,{clear:function(){for(var l=this,h=a(l),f=h.index,d=h.first;d;)d.removed=!0,d.previous&&(d.previous=d.previous.next=void 0),delete f[d.index],d=d.next;h.first=h.last=void 0,ye?h.size=0:l.size=0},delete:function(u){var l=this,h=a(l),f=s(l,u);if(f){var d=f.next,c=f.previous;delete h.index[f.index],f.removed=!0,c&&(c.next=d),d&&(d.previous=c),h.first==f&&(h.first=d),h.last==f&&(h.last=c),ye?h.size--:l.size--}return!!f},forEach:function(l){for(var h=a(this),f=hi(l,arguments.length>1?arguments[1]:void 0,3),d;d=d?d.next:h.first;)for(f(d.value,d.key,this);d&&d.removed;)d=d.previous},has:function(l){return!!s(this,l)}}),_v(r.prototype,e?{get:function(l){var h=s(this,l);return h&&h.value},set:function(l,h){return o(this,l===0?0:l,h)}}:{add:function(l){return o(this,l=l===0?0:l,l)}}),ye&&Ik(r.prototype,"size",{get:function(){return a(this).size}}),r},setStrong:function(i,n,e){var t=n+" Iterator",r=vl(n),a=vl(t);Uu(i,n,function(o,s){kv(this,{type:t,target:o,state:r(o),kind:s,last:void 0})},function(){for(var o=a(this),s=o.kind,u=o.last;u&&u.removed;)u=u.previous;return!o.target||!(o.last=u=u?u.next:o.state.first)?(o.target=void 0,{value:void 0,done:!0}):s=="keys"?{value:u.key,done:!1}:s=="values"?{value:u.value,done:!1}:{value:[u.key,u.value],done:!1}},e?"entries":"values",!e,!0),Pk(n)}},aH=wv("Map",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},Tv),Ck=de.Map,xk=Ck,Ov=xk,Ak=qd,$k=Ak;ie({target:"Object",stat:!0},{setPrototypeOf:A_});var Dk=de.Object.setPrototypeOf,Mk=Dk,Pv=Mk,Fk=Qt(function(i){function n(e,t){return i.exports=n=Pv||function(a,o){return a.__proto__=o,a},n(e,t)}i.exports=n});function Rk(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=$k(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),n&&Fk(i,n)}var Nk=Rk;function Bk(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var Lk=Bk;function zk(i,n){return n&&(Dt(n)==="object"||typeof n=="function")?n:Lk(i)}var jk=zk,Hk=PE,Iv=Hk,Cv=Qt(function(i){function n(e){return i.exports=n=Pv?Iv:function(r){return r.__proto__||Iv(r)},n(e)}i.exports=n}),es,Wk=new Uint8Array(16);function Uk(){if(!es&&(es=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!es))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return es(Wk)}var Vk=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Gk(i){return typeof i=="string"&&Vk.test(i)}var tt=[];for(var pl=0;pl<256;++pl)tt.push((pl+256).toString(16).substr(1));function qk(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(tt[i[n+0]]+tt[i[n+1]]+tt[i[n+2]]+tt[i[n+3]]+"-"+tt[i[n+4]]+tt[i[n+5]]+"-"+tt[i[n+6]]+tt[i[n+7]]+"-"+tt[i[n+8]]+tt[i[n+9]]+"-"+tt[i[n+10]]+tt[i[n+11]]+tt[i[n+12]]+tt[i[n+13]]+tt[i[n+14]]+tt[i[n+15]]).toLowerCase();if(!Gk(e))throw TypeError("Stringified UUID is invalid");return e}function Kk(i,n,e){i=i||{};var t=i.random||(i.rng||Uk)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,n){e=e||0;for(var r=0;r<16;++r)n[e+r]=t[r];return n}return qk(t)}function xv(i){return typeof i=="string"||typeof i=="number"}var Xk=function(){function i(n){_o(this,i),this._queue=[],this._timeout=null,this._extended=null,this.delay=null,this.max=Infinity,this.setOptions(n)}return Eo(i,[{key:"setOptions",value:function(e){e&&typeof e.delay!="undefined"&&(this.delay=e.delay),e&&typeof e.max!="undefined"&&(this.max=e.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var e=this._extended.object,t=this._extended.methods,r=0;r<t.length;r++){var a=t[r];a.original?e[a.name]=a.original:delete e[a.name]}this._extended=null}}},{key:"replace",value:function(e,t){var r=this,a=e[t];if(!a)throw new Error("Method "+t+" undefined");e[t]=function(){for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];r.queue({args:s,fn:a,context:this})}}},{key:"queue",value:function(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var e=this;this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=rE(function(){e.flush()},this.delay))}},{key:"flush",value:function(){var e,t;mi(e=ic(t=this._queue).call(t,0)).call(e,function(r){r.fn.apply(r.context||r.fn,r.args||[])})}}],[{key:"extend",value:function(e,t){var r=new i(t);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=function(){r.flush()};var a=[{name:"flush",original:void 0}];if(t&&t.replace)for(var o=0;o<t.replace.length;o++){var s=t.replace[o];a.push({name:s,original:e[s]}),r.replace(e,s)}return r._extended={object:e,methods:a},r}}]),i}(),Yk=function(){function i(){_o(this,i),this._subscribers={"*":[],add:[],remove:[],update:[]},this.subscribe=i.prototype.on,this.unsubscribe=i.prototype.off}return Eo(i,[{key:"_trigger",value:function(e,t,r){var a,o;if(e==="*")throw new Error("Cannot trigger event *");mi(a=jo(o=[]).call(o,bt(this._subscribers[e]),bt(this._subscribers["*"]))).call(a,function(s){s(e,t,r??null)})}},{key:"on",value:function(e,t){typeof t=="function"&&this._subscribers[e].push(t)}},{key:"off",value:function(e,t){var r;this._subscribers[e]=Zi(r=this._subscribers[e]).call(r,function(a){return a!==t})}}]),i}(),oH=wv("Set",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},Tv),Qk=de.Set,Zk=Qk,gl=Zk;function rr(i,n){var e;if(typeof Ho=="undefined"||qu(i)==null){if(Pt(i)||(e=Jk(i))||n&&i&&typeof i.length=="number"){e&&(i=e);var t=0,r=function(){};return{s:r,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=yi(i)},n:function(){var l=e.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Jk(i,n){var e;if(!!i){if(typeof i=="string")return Av(i,n);var t=zo(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Yu(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Av(i,n)}}function Av(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}var $v=function(){function i(n){_o(this,i),this._pairs=n}return Eo(i,[{key:dn,value:_t.mark(function n(){var e,t,r,a,o;return _t.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=rr(this._pairs),u.prev=1,e.s();case 3:if((t=e.n()).done){u.next=9;break}return r=mt(t.value,2),a=r[0],o=r[1],u.next=7,[a,o];case 7:u.next=3;break;case 9:u.next=14;break;case 11:u.prev=11,u.t0=u.catch(1),e.e(u.t0);case 14:return u.prev=14,e.f(),u.finish(14);case 17:case"end":return u.stop()}},n,this,[[1,11,14,17]])})},{key:"entries",value:_t.mark(function n(){var e,t,r,a,o;return _t.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=rr(this._pairs),u.prev=1,e.s();case 3:if((t=e.n()).done){u.next=9;break}return r=mt(t.value,2),a=r[0],o=r[1],u.next=7,[a,o];case 7:u.next=3;break;case 9:u.next=14;break;case 11:u.prev=11,u.t0=u.catch(1),e.e(u.t0);case 14:return u.prev=14,e.f(),u.finish(14);case 17:case"end":return u.stop()}},n,this,[[1,11,14,17]])})},{key:"keys",value:_t.mark(function n(){var e,t,r,a;return _t.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e=rr(this._pairs),s.prev=1,e.s();case 3:if((t=e.n()).done){s.next=9;break}return r=mt(t.value,1),a=r[0],s.next=7,a;case 7:s.next=3;break;case 9:s.next=14;break;case 11:s.prev=11,s.t0=s.catch(1),e.e(s.t0);case 14:return s.prev=14,e.f(),s.finish(14);case 17:case"end":return s.stop()}},n,this,[[1,11,14,17]])})},{key:"values",value:_t.mark(function n(){var e,t,r,a;return _t.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e=rr(this._pairs),s.prev=1,e.s();case 3:if((t=e.n()).done){s.next=9;break}return r=mt(t.value,2),a=r[1],s.next=7,a;case 7:s.next=3;break;case 9:s.next=14;break;case 11:s.prev=11,s.t0=s.catch(1),e.e(s.t0);case 14:return s.prev=14,e.f(),s.finish(14);case 17:case"end":return s.stop()}},n,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var e;return Vt(e=bt(this._pairs)).call(e,function(t){return t[0]})}},{key:"toItemArray",value:function(){var e;return Vt(e=bt(this._pairs)).call(e,function(t){return t[1]})}},{key:"toEntryArray",value:function(){return bt(this._pairs)}},{key:"toObjectMap",value:function(){var e=fE(null),t=rr(this._pairs),r;try{for(t.s();!(r=t.n()).done;){var a=mt(r.value,2),o=a[0],s=a[1];e[o]=s}}catch(u){t.e(u)}finally{t.f()}return e}},{key:"toMap",value:function(){return new Ov(this._pairs)}},{key:"toIdSet",value:function(){return new gl(this.toIdArray())}},{key:"toItemSet",value:function(){return new gl(this.toItemArray())}},{key:"cache",value:function(){return new i(bt(this._pairs))}},{key:"distinct",value:function(e){var t=new gl,r=rr(this._pairs),a;try{for(r.s();!(a=r.n()).done;){var o=mt(a.value,2),s=o[0],u=o[1];t.add(e(u,s))}}catch(l){r.e(l)}finally{r.f()}return t}},{key:"filter",value:function(e){var t=this._pairs;return new i(rn({},dn,_t.mark(function r(){var a,o,s,u,l;return _t.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=rr(t),f.prev=1,a.s();case 3:if((o=a.n()).done){f.next=10;break}if(s=mt(o.value,2),u=s[0],l=s[1],!e(l,u)){f.next=8;break}return f.next=8,[u,l];case 8:f.next=3;break;case 10:f.next=15;break;case 12:f.prev=12,f.t0=f.catch(1),a.e(f.t0);case 15:return f.prev=15,a.f(),f.finish(15);case 18:case"end":return f.stop()}},r,null,[[1,12,15,18]])})))}},{key:"forEach",value:function(e){var t=rr(this._pairs),r;try{for(t.s();!(r=t.n()).done;){var a=mt(r.value,2),o=a[0],s=a[1];e(s,o)}}catch(u){t.e(u)}finally{t.f()}}},{key:"map",value:function(e){var t=this._pairs;return new i(rn({},dn,_t.mark(function r(){var a,o,s,u,l;return _t.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=rr(t),f.prev=1,a.s();case 3:if((o=a.n()).done){f.next=9;break}return s=mt(o.value,2),u=s[0],l=s[1],f.next=7,[u,e(l,u)];case 7:f.next=3;break;case 9:f.next=14;break;case 11:f.prev=11,f.t0=f.catch(1),a.e(f.t0);case 14:return f.prev=14,a.f(),f.finish(14);case 17:case"end":return f.stop()}},r,null,[[1,11,14,17]])})))}},{key:"max",value:function(e){var t=yi(this._pairs),r=t.next();if(r.done)return null;for(var a=r.value[1],o=e(r.value[1],r.value[0]);!(r=t.next()).done;){var s=mt(r.value,2),u=s[0],l=s[1],h=e(l,u);h>o&&(o=h,a=l)}return a}},{key:"min",value:function(e){var t=yi(this._pairs),r=t.next();if(r.done)return null;for(var a=r.value[1],o=e(r.value[1],r.value[0]);!(r=t.next()).done;){var s=mt(r.value,2),u=s[0],l=s[1],h=e(l,u);h<o&&(o=h,a=l)}return a}},{key:"reduce",value:function(e,t){var r=rr(this._pairs),a;try{for(r.s();!(a=r.n()).done;){var o=mt(a.value,2),s=o[0],u=o[1];t=e(t,u,s)}}catch(l){r.e(l)}finally{r.f()}return t}},{key:"sort",value:function(e){var t=this;return new i(rn({},dn,function(){var r;return yi(cl(r=bt(t._pairs)).call(r,function(a,o){var s=mt(a,2),u=s[0],l=s[1],h=mt(o,2),f=h[0],d=h[1];return e(l,d,u,f)}))}))}}]),i}();function Dv(i,n){var e=Ju(i);if(Cd){var t=Cd(i);n&&(t=Zi(t).call(t,function(r){return ad(i,r).enumerable})),e.push.apply(e,t)}return e}function Mv(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};if(n%2){var t;mi(t=Dv(Object(e),!0)).call(t,function(a){rn(i,a,e[a])})}else if(id)Uw(i,id(e));else{var r;mi(r=Dv(Object(e))).call(r,function(a){Bw(i,a,ad(e,a))})}}return i}function yl(i,n){var e;if(typeof Ho=="undefined"||qu(i)==null){if(Pt(i)||(e=eT(i))||n&&i&&typeof i.length=="number"){e&&(i=e);var t=0,r=function(){};return{s:r,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=yi(i)},n:function(){var l=e.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function eT(i,n){var e;if(!!i){if(typeof i=="string")return Fv(i,n);var t=zo(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Yu(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Fv(i,n)}}function Fv(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}function rT(i){var n=tT();return function(){var t=Cv(i),r;if(n){var a=Cv(this).constructor;r=Jo(t,arguments,a)}else r=t.apply(this,arguments);return jk(this,r)}}function tT(){if(typeof Reflect=="undefined"||!Jo||Jo.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Jo(Date,[],function(){})),!0}catch(i){return!1}}function iT(i,n){return i[n]==null&&(i[n]=Kk()),i}var Pr=function(i){Nk(e,i);var n=rT(e);function e(t,r){var a;return _o(this,e),a=n.call(this),a._queue=null,t&&!Pt(t)&&(r=t,t=[]),a._options=r||{},a._data=new Ov,a.length=0,a._idProp=a._options.fieldId||"id",t&&t.length&&a.add(t),a.setOptions(r),a}return Eo(e,[{key:"setOptions",value:function(r){r&&r.queue!==void 0&&(r.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=Xk.extend(this,{replace:["add","update","remove"]})),r.queue&&Dt(r.queue)==="object"&&this._queue.setOptions(r.queue)))}},{key:"add",value:function(r,a){var o=this,s=[],u;if(Pt(r)){var l=Vt(r).call(r,function(d){return d[o._idProp]});if(_k(l).call(l,function(d){return o._data.has(d)}))throw new Error("A duplicate id was found in the parameter array.");for(var h=0,f=r.length;h<f;h++)u=this._addItem(r[h]),s.push(u)}else if(r&&Dt(r)==="object")u=this._addItem(r),s.push(u);else throw new Error("Unknown dataType");return s.length&&this._trigger("add",{items:s},a),s}},{key:"update",value:function(r,a){var o=this,s=[],u=[],l=[],h=[],f=this._idProp,d=function(g){var E=g[f];if(E!=null&&o._data.has(E)){var _=g,S=NE({},o._data.get(E)),k=o._updateItem(_);u.push(k),h.push(_),l.push(S)}else{var O=o._addItem(g);s.push(O)}};if(Pt(r))for(var c=0,v=r.length;c<v;c++)r[c]&&Dt(r[c])==="object"?d(r[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(r&&Dt(r)==="object")d(r);else throw new Error("Unknown dataType");if(s.length&&this._trigger("add",{items:s},a),u.length){var m={items:u,oldData:l,data:h};this._trigger("update",m,a)}return jo(s).call(s,u)}},{key:"updateOnly",value:function(r,a){var o,s=this;Pt(r)||(r=[r]);var u=Vt(o=Vt(r).call(r,function(h){var f=s._data.get(h[s._idProp]);if(f==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:f,update:h}})).call(o,function(h){var f=h.oldData,d=h.update,c=f[s._idProp],v=jS(f,d);return s._data.set(c,v),{id:c,oldData:f,updatedData:v}});if(u.length){var l={items:Vt(u).call(u,function(h){return h.id}),oldData:Vt(u).call(u,function(h){return h.oldData}),data:Vt(u).call(u,function(h){return h.updatedData})};return this._trigger("update",l,a),l.items}else return[]}},{key:"get",value:function(r,a){var o=void 0,s=void 0,u=void 0;xv(r)?(o=r,u=a):Pt(r)?(s=r,u=a):u=r;var l=u&&u.returnType==="Object"?"Object":"Array",h=u&&Zi(u),f=[],d=void 0,c=void 0,v=void 0;if(o!=null)d=this._data.get(o),d&&h&&!h(d)&&(d=void 0);else if(s!=null)for(var m=0,w=s.length;m<w;m++)d=this._data.get(s[m]),d!=null&&(!h||h(d))&&f.push(d);else{var g;c=bt(cn(g=this._data).call(g));for(var E=0,_=c.length;E<_;E++)v=c[E],d=this._data.get(v),d!=null&&(!h||h(d))&&f.push(d)}if(u&&u.order&&o==null&&this._sort(f,u.order),u&&u.fields){var S=u.fields;if(o!=null&&d!=null)d=this._filterFields(d,S);else for(var k=0,O=f.length;k<O;k++)f[k]=this._filterFields(f[k],S)}if(l=="Object"){for(var C={},I=0,T=f.length;I<T;I++){var P=f[I],R=P[this._idProp];C[R]=P}return C}else if(o!=null){var W;return(W=d)!==null&&W!==void 0?W:null}else return f}},{key:"getIds",value:function(r){var a=this._data,o=r&&Zi(r),s=r&&r.order,u=bt(cn(a).call(a)),l=[];if(o)if(s){for(var h=[],f=0,d=u.length;f<d;f++){var c=u[f],v=this._data.get(c);v!=null&&o(v)&&h.push(v)}this._sort(h,s);for(var m=0,w=h.length;m<w;m++)l.push(h[m][this._idProp])}else for(var g=0,E=u.length;g<E;g++){var _=u[g],S=this._data.get(_);S!=null&&o(S)&&l.push(S[this._idProp])}else if(s){for(var k=[],O=0,C=u.length;O<C;O++){var I=u[O];k.push(a.get(I))}this._sort(k,s);for(var T=0,P=k.length;T<P;T++)l.push(k[T][this._idProp])}else for(var R=0,W=u.length;R<W;R++){var G=u[R],Q=a.get(G);Q!=null&&l.push(Q[this._idProp])}return l}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(r,a){var o=a&&Zi(a),s=this._data,u=bt(cn(s).call(s));if(a&&a.order)for(var l=this.get(a),h=0,f=l.length;h<f;h++){var d=l[h],c=d[this._idProp];r(d,c)}else for(var v=0,m=u.length;v<m;v++){var w=u[v],g=this._data.get(w);g!=null&&(!o||o(g))&&r(g,w)}}},{key:"map",value:function(r,a){for(var o=a&&Zi(a),s=[],u=this._data,l=bt(cn(u).call(u)),h=0,f=l.length;h<f;h++){var d=l[h],c=this._data.get(d);c!=null&&(!o||o(c))&&s.push(r(c,d))}return a&&a.order&&this._sort(s,a.order),s}},{key:"_filterFields",value:function(r,a){var o;return r&&Cw(o=Pt(a)?a:Ju(a)).call(o,function(s,u){return s[u]=r[u],s},{})}},{key:"_sort",value:function(r,a){if(typeof a=="string"){var o=a;cl(r).call(r,function(s,u){var l=s[o],h=u[o];return l>h?1:l<h?-1:0})}else if(typeof a=="function")cl(r).call(r,a);else throw new TypeError("Order must be a function or a string")}},{key:"remove",value:function(r,a){for(var o=[],s=[],u=Pt(r)?r:[r],l=0,h=u.length;l<h;l++){var f=this._remove(u[l]);if(f){var d=f[this._idProp];d!=null&&(o.push(d),s.push(f))}}return o.length&&this._trigger("remove",{items:o,oldData:s},a),o}},{key:"_remove",value:function(r){var a;if(xv(r)?a=r:r&&Dt(r)==="object"&&(a=r[this._idProp]),a!=null&&this._data.has(a)){var o=this._data.get(a)||null;return this._data.delete(a),--this.length,o}return null}},{key:"clear",value:function(r){for(var a,o=bt(cn(a=this._data).call(a)),s=[],u=0,l=o.length;u<l;u++)s.push(this._data.get(o[u]));return this._data.clear(),this.length=0,this._trigger("remove",{items:o,oldData:s},r),o}},{key:"max",value:function(r){var a,o=null,s=null,u=yl(dv(a=this._data).call(a)),l;try{for(u.s();!(l=u.n()).done;){var h=l.value,f=h[r];typeof f=="number"&&(s==null||f>s)&&(o=h,s=f)}}catch(d){u.e(d)}finally{u.f()}return o||null}},{key:"min",value:function(r){var a,o=null,s=null,u=yl(dv(a=this._data).call(a)),l;try{for(u.s();!(l=u.n()).done;){var h=l.value,f=h[r];typeof f=="number"&&(s==null||f<s)&&(o=h,s=f)}}catch(d){u.e(d)}finally{u.f()}return o||null}},{key:"distinct",value:function(r){for(var a=this._data,o=bt(cn(a).call(a)),s=[],u=0,l=0,h=o.length;l<h;l++){for(var f=o[l],d=a.get(f),c=d[r],v=!1,m=0;m<u;m++)if(s[m]==c){v=!0;break}!v&&c!==void 0&&(s[u]=c,u++)}return s}},{key:"_addItem",value:function(r){var a=iT(r,this._idProp),o=a[this._idProp];if(this._data.has(o))throw new Error("Cannot add item: item with id "+o+" already exists");return this._data.set(o,a),++this.length,o}},{key:"_updateItem",value:function(r){var a=r[this._idProp];if(a==null)throw new Error("Cannot update item: item has no id (item: "+uE(r)+")");var o=this._data.get(a);if(!o)throw new Error("Cannot update item: no item with id "+a+" found");return this._data.set(a,Mv(Mv({},o),r)),a}},{key:"stream",value:function(r){if(r){var a=this._data;return new $v(rn({},dn,_t.mark(function s(){var u,l,h,f;return _t.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:u=yl(r),c.prev=1,u.s();case 3:if((l=u.n()).done){c.next=11;break}if(h=l.value,f=a.get(h),f==null){c.next=9;break}return c.next=9,[h,f];case 9:c.next=3;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(1),u.e(c.t0);case 16:return c.prev=16,u.f(),c.finish(16);case 19:case"end":return c.stop()}},s,null,[[1,13,16,19]])})))}else{var o;return new $v(rn({},dn,Xf(o=QS(this._data)).call(o,this._data)))}}},{key:"idProp",get:function(){return this._idProp}}]),e}(Yk);function nT(i,n){return Dt(n)==="object"&&n!==null&&i===n.idProp&&typeof n.add=="function"&&typeof n.clear=="function"&&typeof n.distinct=="function"&&typeof mi(n)=="function"&&typeof n.get=="function"&&typeof n.getDataSet=="function"&&typeof n.getIds=="function"&&typeof n.length=="number"&&typeof Vt(n)=="function"&&typeof n.max=="function"&&typeof n.min=="function"&&typeof n.off=="function"&&typeof n.on=="function"&&typeof n.remove=="function"&&typeof n.setOptions=="function"&&typeof n.stream=="function"&&typeof n.update=="function"&&typeof n.updateOnly=="function"}function ml(i,n){return Dt(n)==="object"&&n!==null&&i===n.idProp&&typeof mi(n)=="function"&&typeof n.get=="function"&&typeof n.getDataSet=="function"&&typeof n.getIds=="function"&&typeof n.length=="number"&&typeof Vt(n)=="function"&&typeof n.off=="function"&&typeof n.on=="function"&&typeof n.stream=="function"&&nT(i,n.getDataSet())}var bl=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ts=function(i){return i&&i.Math==Math&&i},qe=ts(typeof globalThis=="object"&&globalThis)||ts(typeof window=="object"&&window)||ts(typeof self=="object"&&self)||ts(typeof bl=="object"&&bl)||function(){return this}()||Function("return this")(),vn={},Ae=function(i){try{return!!i()}catch(n){return!0}},aT=Ae,at=!aT(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),fa={},Rv={}.propertyIsEnumerable,Nv=Object.getOwnPropertyDescriptor,oT=Nv&&!Rv.call({1:2},1);fa.f=oT?function(n){var e=Nv(this,n);return!!e&&e.enumerable}:Rv;var da=function(i,n){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:n}},sT={}.toString,ca=function(i){return sT.call(i).slice(8,-1)},uT=Ae,lT=ca,hT="".split,rs=uT(function(){return!Object("z").propertyIsEnumerable(0)})?function(i){return lT(i)=="String"?hT.call(i,""):Object(i)}:Object,va=function(i){if(i==null)throw TypeError("Can't call method on "+i);return i},fT=rs,dT=va,ir=function(i){return fT(dT(i))},Qe=function(i){return typeof i=="object"?i!==null:typeof i=="function"},ce={},wl=ce,_l=qe,Bv=function(i){return typeof i=="function"?i:void 0},jr=function(i,n){return arguments.length<2?Bv(wl[i])||Bv(_l[i]):wl[i]&&wl[i][n]||_l[i]&&_l[i][n]},cT=jr,pa=cT("navigator","userAgent")||"",Lv=qe,El=pa,zv=Lv.process,jv=Lv.Deno,Hv=zv&&zv.versions||jv&&jv.version,Wv=Hv&&Hv.v8,nr,is;Wv?(nr=Wv.split("."),is=nr[0]<4?1:nr[0]+nr[1]):El&&(nr=El.match(/Edge\/(\d+)/),(!nr||nr[1]>=74)&&(nr=El.match(/Chrome\/(\d+)/),nr&&(is=nr[1])));var ga=is&&+is,Uv=ga,vT=Ae,Sl=!!Object.getOwnPropertySymbols&&!vT(function(){var i=Symbol();return!String(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&Uv&&Uv<41}),pT=Sl,Vv=pT&&!Symbol.sham&&typeof Symbol.iterator=="symbol",gT=jr,yT=Vv,ns=yT?function(i){return typeof i=="symbol"}:function(i){var n=gT("Symbol");return typeof n=="function"&&Object(i)instanceof n},kl=Qe,mT=function(i,n){var e,t;if(n==="string"&&typeof(e=i.toString)=="function"&&!kl(t=e.call(i))||typeof(e=i.valueOf)=="function"&&!kl(t=e.call(i))||n!=="string"&&typeof(e=i.toString)=="function"&&!kl(t=e.call(i)))return t;throw TypeError("Can't convert object to primitive value")},as={exports:{}},Gv=qe,bT=function(i,n){try{Object.defineProperty(Gv,i,{value:n,configurable:!0,writable:!0})}catch(e){Gv[i]=n}return n},wT=qe,_T=bT,qv="__core-js_shared__",ET=wT[qv]||_T(qv,{}),Tl=ET,Kv=Tl;(as.exports=function(i,n){return Kv[i]||(Kv[i]=n!==void 0?n:{})})("versions",[]).push({version:"3.16.1",mode:"pure",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"});var ST=va,It=function(i){return Object(ST(i))},kT=It,TT={}.hasOwnProperty,Ct=Object.hasOwn||function(n,e){return TT.call(kT(n),e)},OT=0,PT=Math.random(),os=function(i){return"Symbol("+String(i===void 0?"":i)+")_"+(++OT+PT).toString(36)},IT=qe,CT=as.exports,Xv=Ct,xT=os,Yv=Sl,AT=Vv,ya=CT("wks"),ma=IT.Symbol,$T=AT?ma:ma&&ma.withoutSetter||xT,Ke=function(i){return(!Xv(ya,i)||!(Yv||typeof ya[i]=="string"))&&(Yv&&Xv(ma,i)?ya[i]=ma[i]:ya[i]=$T("Symbol."+i)),ya[i]},Qv=Qe,Zv=ns,DT=mT,MT=Ke,FT=MT("toPrimitive"),RT=function(i,n){if(!Qv(i)||Zv(i))return i;var e=i[FT],t;if(e!==void 0){if(n===void 0&&(n="default"),t=e.call(i,n),!Qv(t)||Zv(t))return t;throw TypeError("Can't convert object to primitive value")}return n===void 0&&(n="number"),DT(i,n)},NT=RT,BT=ns,ss=function(i){var n=NT(i,"string");return BT(n)?n:String(n)},LT=qe,Jv=Qe,Ol=LT.document,zT=Jv(Ol)&&Jv(Ol.createElement),ep=function(i){return zT?Ol.createElement(i):{}},jT=at,HT=Ae,WT=ep,tp=!jT&&!HT(function(){return Object.defineProperty(WT("div"),"a",{get:function(){return 7}}).a!=7}),UT=at,VT=fa,GT=da,qT=ir,KT=ss,XT=Ct,YT=tp,rp=Object.getOwnPropertyDescriptor;vn.f=UT?rp:function(n,e){if(n=qT(n),e=KT(e),YT)try{return rp(n,e)}catch(t){}if(XT(n,e))return GT(!VT.f.call(n,e),n[e])};var QT=Ae,ZT=/#|\.prototype\./,ba=function(i,n){var e=eO[JT(i)];return e==rO?!0:e==tO?!1:typeof n=="function"?QT(n):!!n},JT=ba.normalize=function(i){return String(i).replace(ZT,".").toLowerCase()},eO=ba.data={},tO=ba.NATIVE="N",rO=ba.POLYFILL="P",iO=ba,wa=function(i){if(typeof i!="function")throw TypeError(String(i)+" is not a function");return i},nO=wa,_a=function(i,n,e){if(nO(i),n===void 0)return i;switch(e){case 0:return function(){return i.call(n)};case 1:return function(t){return i.call(n,t)};case 2:return function(t,r){return i.call(n,t,r)};case 3:return function(t,r,a){return i.call(n,t,r,a)}}return function(){return i.apply(n,arguments)}},Rt={},aO=Qe,Nt=function(i){if(!aO(i))throw TypeError(String(i)+" is not an object");return i},oO=at,sO=tp,ip=Nt,uO=ss,np=Object.defineProperty;Rt.f=oO?np:function(n,e,t){if(ip(n),e=uO(e),ip(t),sO)try{return np(n,e,t)}catch(r){}if("get"in t||"set"in t)throw TypeError("Accessors not supported");return"value"in t&&(n[e]=t.value),n};var lO=at,hO=Rt,fO=da,Ir=lO?function(i,n,e){return hO.f(i,n,fO(1,e))}:function(i,n,e){return i[n]=e,i},us=qe,dO=vn.f,cO=iO,pn=ce,ap=_a,Pl=Ir,op=Ct,vO=function(i){var n=function(e,t,r){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(e);case 2:return new i(e,t)}return new i(e,t,r)}return i.apply(this,arguments)};return n.prototype=i.prototype,n},re=function(i,n){var e=i.target,t=i.global,r=i.stat,a=i.proto,o=t?us:r?us[e]:(us[e]||{}).prototype,s=t?pn:pn[e]||(pn[e]={}),u=s.prototype,l,h,f,d,c,v,m,w,g;for(d in n)l=cO(t?d:e+(r?".":"#")+d,i.forced),h=!l&&o&&op(o,d),v=s[d],h&&(i.noTargetGet?(g=dO(o,d),m=g&&g.value):m=o[d]),c=h&&m?m:n[d],!(h&&typeof v==typeof c)&&(i.bind&&h?w=ap(c,us):i.wrap&&h?w=vO(c):a&&typeof c=="function"?w=ap(Function.call,c):w=c,(i.sham||c&&c.sham||v&&v.sham)&&Pl(w,"sham",!0),s[d]=w,a&&(f=e+"Prototype",op(pn,f)||Pl(pn,f,{}),pn[f][d]=c,i.real&&u&&!u[d]&&Pl(u,d,c)))},pO=Math.ceil,gO=Math.floor,ls=function(i){return isNaN(i=+i)?0:(i>0?gO:pO)(i)},yO=ls,mO=Math.min,ar=function(i){return i>0?mO(yO(i),9007199254740991):0},bO=ls,wO=Math.max,_O=Math.min,hs=function(i,n){var e=bO(i);return e<0?wO(e+n,0):_O(e,n)},EO=ir,SO=ar,kO=hs,sp=function(i){return function(n,e,t){var r=EO(n),a=SO(r.length),o=kO(t,a),s;if(i&&e!=e){for(;a>o;)if(s=r[o++],s!=s)return!0}else for(;a>o;o++)if((i||o in r)&&r[o]===e)return i||o||0;return!i&&-1}},Il={includes:sp(!0),indexOf:sp(!1)},Ea={},Cl=Ct,TO=ir,OO=Il.indexOf,PO=Ea,up=function(i,n){var e=TO(i),t=0,r=[],a;for(a in e)!Cl(PO,a)&&Cl(e,a)&&r.push(a);for(;n.length>t;)Cl(e,a=n[t++])&&(~OO(r,a)||r.push(a));return r},xl=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],IO=up,CO=xl,Sa=Object.keys||function(n){return IO(n,CO)},fs={};fs.f=Object.getOwnPropertySymbols;var lp=at,xO=Ae,Al=Sa,AO=fs,$O=fa,DO=It,MO=rs,gn=Object.assign,hp=Object.defineProperty,FO=!gn||xO(function(){if(lp&&gn({b:1},gn(hp({},"a",{enumerable:!0,get:function(){hp(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var i={},n={},e=Symbol(),t="abcdefghijklmnopqrst";return i[e]=7,t.split("").forEach(function(r){n[r]=r}),gn({},i)[e]!=7||Al(gn({},n)).join("")!=t})?function(n,e){for(var t=DO(n),r=arguments.length,a=1,o=AO.f,s=$O.f;r>a;)for(var u=MO(arguments[a++]),l=o?Al(u).concat(o(u)):Al(u),h=l.length,f=0,d;h>f;)d=l[f++],(!lp||s.call(u,d))&&(t[d]=u[d]);return t}:gn,RO=re,fp=FO;RO({target:"Object",stat:!0,forced:Object.assign!==fp},{assign:fp});var NO=ce,BO=NO.Object.assign,LO=BO,zO=LO,je=zO,jO=wa,HO=Qe,dp=[].slice,$l={},WO=function(i,n,e){if(!(n in $l)){for(var t=[],r=0;r<n;r++)t[r]="a["+r+"]";$l[n]=Function("C,a","return new C("+t.join(",")+")")}return $l[n](i,e)},cp=Function.bind||function(n){var e=jO(this),t=dp.call(arguments,1),r=function(){var o=t.concat(dp.call(arguments));return this instanceof r?WO(e,o.length,o):e.apply(n,o)};return HO(e.prototype)&&(r.prototype=e.prototype),r},UO=re,VO=cp;UO({target:"Function",proto:!0},{bind:VO});var GO=ce,Ze=function(i){return GO[i+"Prototype"]},qO=Ze,KO=qO("Function").bind,XO=KO,vp=Function.prototype,YO=function(i){var n=i.bind;return i===vp||i instanceof Function&&n===vp.bind?XO:n},QO=YO,ZO=QO,B=ZO;function Dl(i,n,e,t){i.beginPath(),i.arc(n,e,t,0,2*Math.PI,!1),i.closePath()}function JO(i,n,e,t){i.beginPath(),i.rect(n-t,e-t,t*2,t*2),i.closePath()}function eP(i,n,e,t){i.beginPath(),t*=1.15,e+=.275*t;var r=t*2,a=r/2,o=Math.sqrt(3)/6*r,s=Math.sqrt(r*r-a*a);i.moveTo(n,e-(s-o)),i.lineTo(n+a,e+o),i.lineTo(n-a,e+o),i.lineTo(n,e-(s-o)),i.closePath()}function tP(i,n,e,t){i.beginPath(),t*=1.15,e-=.275*t;var r=t*2,a=r/2,o=Math.sqrt(3)/6*r,s=Math.sqrt(r*r-a*a);i.moveTo(n,e+(s-o)),i.lineTo(n+a,e-o),i.lineTo(n-a,e-o),i.lineTo(n,e+(s-o)),i.closePath()}function rP(i,n,e,t){i.beginPath(),t*=.82,e+=.1*t;for(var r=0;r<10;r++){var a=r%2==0?t*1.3:t*.5;i.lineTo(n+a*Math.sin(r*2*Math.PI/10),e-a*Math.cos(r*2*Math.PI/10))}i.closePath()}function iP(i,n,e,t){i.beginPath(),i.lineTo(n,e+t),i.lineTo(n+t,e),i.lineTo(n,e-t),i.lineTo(n-t,e),i.closePath()}function pp(i,n,e,t,r,a){var o=Math.PI/180;t-2*a<0&&(a=t/2),r-2*a<0&&(a=r/2),i.beginPath(),i.moveTo(n+a,e),i.lineTo(n+t-a,e),i.arc(n+t-a,e+a,a,o*270,o*360,!1),i.lineTo(n+t,e+r-a),i.arc(n+t-a,e+r-a,a,0,o*90,!1),i.lineTo(n+a,e+r),i.arc(n+a,e+r-a,a,o*90,o*180,!1),i.lineTo(n,e+a),i.arc(n+a,e+a,a,o*180,o*270,!1),i.closePath()}function Ml(i,n,e,t,r){var a=.5522848,o=t/2*a,s=r/2*a,u=n+t,l=e+r,h=n+t/2,f=e+r/2;i.beginPath(),i.moveTo(n,f),i.bezierCurveTo(n,f-s,h-o,e,h,e),i.bezierCurveTo(h+o,e,u,f-s,u,f),i.bezierCurveTo(u,f+s,h+o,l,h,l),i.bezierCurveTo(h-o,l,n,f+s,n,f),i.closePath()}function gp(i,n,e,t,r){var a=1/3,o=t,s=r*a,u=.5522848,l=o/2*u,h=s/2*u,f=n+o,d=e+s,c=n+o/2,v=e+s/2,m=e+(r-s/2),w=e+r;i.beginPath(),i.moveTo(f,v),i.bezierCurveTo(f,v+h,c+l,d,c,d),i.bezierCurveTo(c-l,d,n,v+h,n,v),i.bezierCurveTo(n,v-h,c-l,e,c,e),i.bezierCurveTo(c+l,e,f,v-h,f,v),i.lineTo(f,m),i.bezierCurveTo(f,m+h,c+l,w,c,w),i.bezierCurveTo(c-l,w,n,m+h,n,m),i.lineTo(n,v)}function yp(i,n,e,t,r,a){i.beginPath(),i.moveTo(n,e);for(var o=a.length,s=t-n,u=r-e,l=u/s,h=Math.sqrt(s*s+u*u),f=0,d=!0,c=0,v=+a[0];h>=.1;)v=+a[f++%o],v>h&&(v=h),c=Math.sqrt(v*v/(1+l*l)),c=s<0?-c:c,n+=c,e+=l*c,d===!0?i.lineTo(n,e):i.moveTo(n,e),h-=v,d=!d}function nP(i,n,e,t){i.beginPath();var r=6,a=Math.PI*2/r;i.moveTo(n+t,e);for(var o=1;o<r;o++)i.lineTo(n+t*Math.cos(a*o),e+t*Math.sin(a*o));i.closePath()}var mp={circle:Dl,dashedLine:yp,database:gp,diamond:iP,ellipse:Ml,ellipse_vis:Ml,hexagon:nP,roundRect:pp,square:JO,star:rP,triangle:eP,triangleDown:tP};function aP(i){return Object.prototype.hasOwnProperty.call(mp,i)?mp[i]:function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];CanvasRenderingContext2D.prototype[i].call(n,t)}}var bp={exports:{}};(function(i){i.exports=n;function n(t){if(t)return e(t)}function e(t){for(var r in n.prototype)t[r]=n.prototype[r];return t}n.prototype.on=n.prototype.addEventListener=function(t,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(r),this},n.prototype.once=function(t,r){function a(){this.off(t,a),r.apply(this,arguments)}return a.fn=r,this.on(t,a),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+t];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var o,s=0;s<a.length;s++)if(o=a[s],o===r||o.fn===r){a.splice(s,1);break}return a.length===0&&delete this._callbacks["$"+t],this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),a=this._callbacks["$"+t],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(a){a=a.slice(0);for(var o=0,s=a.length;o<s;++o)a[o].apply(this,r)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}})(bp);var wp=bp.exports,oP=ns,Hr=function(i){if(oP(i))throw TypeError("Cannot convert a Symbol value to a string");return String(i)},sP=ls,uP=Hr,lP=va,_p=function(i){return function(n,e){var t=uP(lP(n)),r=sP(e),a=t.length,o,s;return r<0||r>=a?i?"":void 0:(o=t.charCodeAt(r),o<55296||o>56319||r+1===a||(s=t.charCodeAt(r+1))<56320||s>57343?i?t.charAt(r):o:i?t.slice(r,r+2):(o-55296<<10)+(s-56320)+65536)}},hP={codeAt:_p(!1),charAt:_p(!0)},Fl=Tl,fP=Function.toString;typeof Fl.inspectSource!="function"&&(Fl.inspectSource=function(i){return fP.call(i)});var dP=Fl.inspectSource,cP=qe,vP=dP,Ep=cP.WeakMap,Sp=typeof Ep=="function"&&/native code/.test(vP(Ep)),pP=as.exports,gP=os,kp=pP("keys"),ds=function(i){return kp[i]||(kp[i]=gP(i))},yP=Sp,mP=qe,bP=Qe,wP=Ir,Rl=Ct,Nl=Tl,_P=ds,EP=Ea,Tp="Object already initialized",SP=mP.WeakMap,cs,ka,vs,kP=function(i){return vs(i)?ka(i):cs(i,{})},TP=function(i){return function(n){var e;if(!bP(n)||(e=ka(n)).type!==i)throw TypeError("Incompatible receiver, "+i+" required");return e}};yP||Nl.state?(Wr=Nl.state||(Nl.state=new SP),Op=Wr.get,Bl=Wr.has,Pp=Wr.set,cs=function(i,n){if(Bl.call(Wr,i))throw new TypeError(Tp);return n.facade=i,Pp.call(Wr,i,n),n},ka=function(i){return Op.call(Wr,i)||{}},vs=function(i){return Bl.call(Wr,i)}):(Oi=_P("state"),EP[Oi]=!0,cs=function(i,n){if(Rl(i,Oi))throw new TypeError(Tp);return n.facade=i,wP(i,Oi,n),n},ka=function(i){return Rl(i,Oi)?i[Oi]:{}},vs=function(i){return Rl(i,Oi)});var Wr,Op,Bl,Pp,Oi,Pi={set:cs,get:ka,has:vs,enforce:kP,getterFor:TP},OP=Ae,Ip=!OP(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype}),PP=Ct,IP=It,CP=ds,xP=Ip,Cp=CP("IE_PROTO"),AP=Object.prototype,ps=xP?Object.getPrototypeOf:function(i){return i=IP(i),PP(i,Cp)?i[Cp]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?AP:null},$P=Ae,xp=ps,DP=Ir,MP=Ct,FP=Ke,Ll=FP("iterator"),Ap=!1,RP=function(){return this},Ii,zl,jl;[].keys&&(jl=[].keys(),"next"in jl?(zl=xp(xp(jl)),zl!==Object.prototype&&(Ii=zl)):Ap=!0);var $p=Ii==null||$P(function(){var i={};return Ii[Ll].call(i)!==i});$p&&(Ii={});$p&&!MP(Ii,Ll)&&DP(Ii,Ll,RP);var Dp={IteratorPrototype:Ii,BUGGY_SAFARI_ITERATORS:Ap},NP=at,BP=Rt,LP=Nt,zP=Sa,Mp=NP?Object.defineProperties:function(n,e){LP(n);for(var t=zP(e),r=t.length,a=0,o;r>a;)BP.f(n,o=t[a++],e[o]);return n},jP=jr,HP=jP("document","documentElement"),WP=Nt,UP=Mp,Fp=xl,VP=Ea,GP=HP,qP=ep,KP=ds,Rp=">",Np="<",Hl="prototype",Wl="script",Bp=KP("IE_PROTO"),Ul=function(){},Lp=function(i){return Np+Wl+Rp+i+Np+"/"+Wl+Rp},zp=function(i){i.write(Lp("")),i.close();var n=i.parentWindow.Object;return i=null,n},XP=function(){var i=qP("iframe"),n="java"+Wl+":",e;if(i.style)return i.style.display="none",GP.appendChild(i),i.src=String(n),e=i.contentWindow.document,e.open(),e.write(Lp("document.F=Object")),e.close(),e.F},gs,ys=function(){try{gs=new ActiveXObject("htmlfile")}catch(n){}ys=document.domain&&gs?zp(gs):XP()||zp(gs);for(var i=Fp.length;i--;)delete ys[Hl][Fp[i]];return ys()};VP[Bp]=!0;var Ta=Object.create||function(n,e){var t;return n!==null?(Ul[Hl]=WP(n),t=new Ul,Ul[Hl]=null,t[Bp]=n):t=ys(),e===void 0?t:UP(t,e)},YP=Ke,QP=YP("toStringTag"),jp={};jp[QP]="z";var Vl=String(jp)==="[object z]",ZP=Vl,ms=ca,JP=Ke,eI=JP("toStringTag"),tI=ms(function(){return arguments}())=="Arguments",rI=function(i,n){try{return i[n]}catch(e){}},Oa=ZP?ms:function(i){var n,e,t;return i===void 0?"Undefined":i===null?"Null":typeof(e=rI(n=Object(i),eI))=="string"?e:tI?ms(n):(t=ms(n))=="Object"&&typeof n.callee=="function"?"Arguments":t},iI=Vl,nI=Oa,aI=iI?{}.toString:function(){return"[object "+nI(this)+"]"},oI=Vl,sI=Rt.f,uI=Ir,lI=Ct,hI=aI,fI=Ke,Hp=fI("toStringTag"),Pa=function(i,n,e,t){if(i){var r=e?i:i.prototype;lI(r,Hp)||sI(r,Hp,{configurable:!0,value:n}),t&&!oI&&uI(r,"toString",hI)}},yn={},dI=Dp.IteratorPrototype,cI=Ta,vI=da,pI=Pa,gI=yn,yI=function(){return this},mI=function(i,n,e){var t=n+" Iterator";return i.prototype=cI(dI,{next:vI(1,e)}),pI(i,t,!1,!0),gI[t]=yI,i},bI=Qe,wI=function(i){if(!bI(i)&&i!==null)throw TypeError("Can't set "+String(i)+" as a prototype");return i},_I=Nt,EI=wI,SI=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,n={},e;try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),i=n instanceof Array}catch(t){}return function(r,a){return _I(r),EI(a),i?e.call(r,a):r.__proto__=a,r}}():void 0),kI=Ir,Gl=function(i,n,e,t){t&&t.enumerable?i[n]=e:kI(i,n,e)},TI=re,OI=mI,PI=ps,II=Pa,CI=Ir,xI=Gl,AI=Ke,Wp=yn,Up=Dp,$I=Up.IteratorPrototype,bs=Up.BUGGY_SAFARI_ITERATORS,ql=AI("iterator"),Vp="keys",ws="values",Gp="entries",DI=function(){return this},Kl=function(i,n,e,t,r,a,o){OI(e,n,t);var s=function(g){if(g===r&&d)return d;if(!bs&&g in h)return h[g];switch(g){case Vp:return function(){return new e(this,g)};case ws:return function(){return new e(this,g)};case Gp:return function(){return new e(this,g)}}return function(){return new e(this)}},u=n+" Iterator",l=!1,h=i.prototype,f=h[ql]||h["@@iterator"]||r&&h[r],d=!bs&&f||s(r),c=n=="Array"&&h.entries||f,v,m,w;if(c&&(v=PI(c.call(new i)),$I!==Object.prototype&&v.next&&(II(v,u,!0,!0),Wp[u]=DI)),r==ws&&f&&f.name!==ws&&(l=!0,d=function(){return f.call(this)}),o&&h[ql]!==d&&CI(h,ql,d),Wp[n]=d,r)if(m={values:s(ws),keys:a?d:s(Vp),entries:s(Gp)},o)for(w in m)(bs||l||!(w in h))&&xI(h,w,m[w]);else TI({target:n,proto:!0,forced:bs||l},m);return m},MI=hP.charAt,FI=Hr,qp=Pi,RI=Kl,Kp="String Iterator",NI=qp.set,BI=qp.getterFor(Kp);RI(String,"String",function(i){NI(this,{type:Kp,string:FI(i),index:0})},function(){var n=BI(this),e=n.string,t=n.index,r;return t>=e.length?{value:void 0,done:!0}:(r=MI(e,t),n.index+=r.length,{value:r,done:!1})});var LI=Nt,Xp=function(i){var n=i.return;if(n!==void 0)return LI(n.call(i)).value},zI=Nt,jI=Xp,HI=function(i,n,e,t){try{return t?n(zI(e)[0],e[1]):n(e)}catch(r){throw jI(i),r}},WI=Ke,UI=yn,VI=WI("iterator"),GI=Array.prototype,Yp=function(i){return i!==void 0&&(UI.Array===i||GI[VI]===i)},qI=ss,KI=Rt,XI=da,Ia=function(i,n,e){var t=qI(n);t in i?KI.f(i,t,XI(0,e)):i[t]=e},YI=Oa,QI=yn,ZI=Ke,JI=ZI("iterator"),Xl=function(i){if(i!=null)return i[JI]||i["@@iterator"]||QI[YI(i)]},eC=_a,tC=It,rC=HI,iC=Yp,nC=ar,Qp=Ia,aC=Xl,oC=function(n){var e=tC(n),t=typeof this=="function"?this:Array,r=arguments.length,a=r>1?arguments[1]:void 0,o=a!==void 0,s=aC(e),u=0,l,h,f,d,c,v;if(o&&(a=eC(a,r>2?arguments[2]:void 0,2)),s!=null&&!(t==Array&&iC(s)))for(d=s.call(e),c=d.next,h=new t;!(f=c.call(d)).done;u++)v=o?rC(d,a,[f.value,u],!0):f.value,Qp(h,u,v);else for(l=nC(e.length),h=new t(l);l>u;u++)v=o?a(e[u],u):e[u],Qp(h,u,v);return h.length=u,h},sC=Ke,Zp=sC("iterator"),Jp=!1;try{eg=0,Yl={next:function(){return{done:!!eg++}},return:function(){Jp=!0}},Yl[Zp]=function(){return this},Array.from(Yl,function(){throw 2})}catch(i){}var eg,Yl,uC=function(i,n){if(!n&&!Jp)return!1;var e=!1;try{var t={};t[Zp]=function(){return{next:function(){return{done:e=!0}}}},i(t)}catch(r){}return e},lC=re,hC=oC,fC=uC,dC=!fC(function(i){Array.from(i)});lC({target:"Array",stat:!0,forced:dC},{from:hC});var cC=ce,vC=cC.Array.from,pC=vC,tg=pC,Ur=tg,gC=ir,rg=yn,ig=Pi,yC=Kl,ng="Array Iterator",mC=ig.set,bC=ig.getterFor(ng);yC(Array,"Array",function(i,n){mC(this,{type:ng,target:gC(i),index:0,kind:n})},function(){var i=bC(this),n=i.target,e=i.kind,t=i.index++;return!n||t>=n.length?(i.target=void 0,{value:void 0,done:!0}):e=="keys"?{value:t,done:!1}:e=="values"?{value:n[t],done:!1}:{value:[t,n[t]],done:!1}},"values");rg.Arguments=rg.Array;var wC=Xl,_C=wC,EC={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},SC=EC,kC=qe,TC=Oa,OC=Ir,ag=yn,PC=Ke,og=PC("toStringTag");for(var Ql in SC)Zl=kC[Ql],_s=Zl&&Zl.prototype,_s&&TC(_s)!==og&&OC(_s,og,Ql),ag[Ql]=ag.Array;var Zl,_s,IC=_C,CC=IC,xC=CC,AC=xC,or=AC,$C=ca,mn=Array.isArray||function(n){return $C(n)=="Array"},Ca={},DC=up,MC=xl,FC=MC.concat("length","prototype");Ca.f=Object.getOwnPropertyNames||function(n){return DC(n,FC)};var Es={},RC=ir,sg=Ca.f,NC={}.toString,ug=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],BC=function(i){try{return sg(i)}catch(n){return ug.slice()}};Es.f=function(n){return ug&&NC.call(n)=="[object Window]"?BC(n):sg(RC(n))};var Ss={},LC=Ke;Ss.f=LC;var lg=ce,zC=Ct,jC=Ss,HC=Rt.f,Fe=function(i){var n=lg.Symbol||(lg.Symbol={});zC(n,i)||HC(n,i,{value:jC.f(i)})},WC=Qe,hg=mn,UC=Ke,VC=UC("species"),GC=function(i){var n;return hg(i)&&(n=i.constructor,typeof n=="function"&&(n===Array||hg(n.prototype))?n=void 0:WC(n)&&(n=n[VC],n===null&&(n=void 0))),n===void 0?Array:n},qC=GC,Jl=function(i,n){return new(qC(i))(n===0?0:n)},KC=_a,XC=rs,YC=It,QC=ar,ZC=Jl,fg=[].push,Vr=function(i){var n=i==1,e=i==2,t=i==3,r=i==4,a=i==6,o=i==7,s=i==5||a;return function(u,l,h,f){for(var d=YC(u),c=XC(d),v=KC(l,h,3),m=QC(c.length),w=0,g=f||ZC,E=n?g(u,m):e||o?g(u,0):void 0,_,S;m>w;w++)if((s||w in c)&&(_=c[w],S=v(_,w,d),i))if(n)E[w]=S;else if(S)switch(i){case 3:return!0;case 5:return _;case 6:return w;case 2:fg.call(E,_)}else switch(i){case 4:return!1;case 7:fg.call(E,_)}return a?-1:t||r?r:E}},Gr={forEach:Vr(0),map:Vr(1),filter:Vr(2),some:Vr(3),every:Vr(4),find:Vr(5),findIndex:Vr(6),filterReject:Vr(7)},bn=re,dg=qe,JC=jr,wn=at,Ci=Sl,eh=Ae,He=Ct,ex=mn,tx=Qe,th=ns,rh=Nt,rx=It,ks=ir,ih=ss,cg=Hr,nh=da,xa=Ta,vg=Sa,ix=Ca,pg=Es,ah=fs,gg=vn,yg=Rt,mg=fa,nx=Ir,bg=Gl,Aa=as.exports,ax=ds,wg=Ea,_g=os,Eg=Ke,ox=Ss,sx=Fe,ux=Pa,Sg=Pi,Ts=Gr.forEach,Et=ax("hidden"),Os="Symbol",Cr="prototype",kg=Eg("toPrimitive"),lx=Sg.set,Tg=Sg.getterFor(Os),Kt=Object[Cr],xt=dg.Symbol,$a=JC("JSON","stringify"),Og=gg.f,qr=yg.f,Pg=pg.f,hx=mg.f,xr=Aa("symbols"),Da=Aa("op-symbols"),oh=Aa("string-to-symbol-registry"),sh=Aa("symbol-to-string-registry"),fx=Aa("wks"),uh=dg.QObject,lh=!uh||!uh[Cr]||!uh[Cr].findChild,hh=wn&&eh(function(){return xa(qr({},"a",{get:function(){return qr(this,"a",{value:7}).a}})).a!=7})?function(i,n,e){var t=Og(Kt,n);t&&delete Kt[n],qr(i,n,e),t&&i!==Kt&&qr(Kt,n,t)}:qr,fh=function(i,n){var e=xr[i]=xa(xt[Cr]);return lx(e,{type:Os,tag:i,description:n}),wn||(e.description=n),e},Ps=function(n,e,t){n===Kt&&Ps(Da,e,t),rh(n);var r=ih(e);return rh(t),He(xr,r)?(t.enumerable?(He(n,Et)&&n[Et][r]&&(n[Et][r]=!1),t=xa(t,{enumerable:nh(0,!1)})):(He(n,Et)||qr(n,Et,nh(1,{})),n[Et][r]=!0),hh(n,r,t)):qr(n,r,t)},Cg=function(n,e){rh(n);var t=ks(e),r=vg(t).concat(dh(t));return Ts(r,function(a){(!wn||Ig.call(t,a))&&Ps(n,a,t[a])}),n},dx=function(n,e){return e===void 0?xa(n):Cg(xa(n),e)},Ig=function(n){var e=ih(n),t=hx.call(this,e);return this===Kt&&He(xr,e)&&!He(Da,e)?!1:t||!He(this,e)||!He(xr,e)||He(this,Et)&&this[Et][e]?t:!0},xg=function(n,e){var t=ks(n),r=ih(e);if(!(t===Kt&&He(xr,r)&&!He(Da,r))){var a=Og(t,r);return a&&He(xr,r)&&!(He(t,Et)&&t[Et][r])&&(a.enumerable=!0),a}},Ag=function(n){var e=Pg(ks(n)),t=[];return Ts(e,function(r){!He(xr,r)&&!He(wg,r)&&t.push(r)}),t},dh=function(n){var e=n===Kt,t=Pg(e?Da:ks(n)),r=[];return Ts(t,function(a){He(xr,a)&&(!e||He(Kt,a))&&r.push(xr[a])}),r};Ci||(xt=function(){if(this instanceof xt)throw TypeError("Symbol is not a constructor");var n=!arguments.length||arguments[0]===void 0?void 0:cg(arguments[0]),e=_g(n),t=function(r){this===Kt&&t.call(Da,r),He(this,Et)&&He(this[Et],e)&&(this[Et][e]=!1),hh(this,e,nh(1,r))};return wn&&lh&&hh(Kt,e,{configurable:!0,set:t}),fh(e,n)},bg(xt[Cr],"toString",function(){return Tg(this).tag}),bg(xt,"withoutSetter",function(i){return fh(_g(i),i)}),mg.f=Ig,yg.f=Ps,gg.f=xg,ix.f=pg.f=Ag,ah.f=dh,ox.f=function(i){return fh(Eg(i),i)},wn&&qr(xt[Cr],"description",{configurable:!0,get:function(){return Tg(this).description}}));bn({global:!0,wrap:!0,forced:!Ci,sham:!Ci},{Symbol:xt});Ts(vg(fx),function(i){sx(i)});bn({target:Os,stat:!0,forced:!Ci},{for:function(i){var n=cg(i);if(He(oh,n))return oh[n];var e=xt(n);return oh[n]=e,sh[e]=n,e},keyFor:function(n){if(!th(n))throw TypeError(n+" is not a symbol");if(He(sh,n))return sh[n]},useSetter:function(){lh=!0},useSimple:function(){lh=!1}});bn({target:"Object",stat:!0,forced:!Ci,sham:!wn},{create:dx,defineProperty:Ps,defineProperties:Cg,getOwnPropertyDescriptor:xg});bn({target:"Object",stat:!0,forced:!Ci},{getOwnPropertyNames:Ag,getOwnPropertySymbols:dh});bn({target:"Object",stat:!0,forced:eh(function(){ah.f(1)})},{getOwnPropertySymbols:function(n){return ah.f(rx(n))}});$a&&($g=!Ci||eh(function(){var i=xt();return $a([i])!="[null]"||$a({a:i})!="{}"||$a(Object(i))!="{}"}),bn({target:"JSON",stat:!0,forced:$g},{stringify:function(n,e,t){for(var r=[n],a=1,o;arguments.length>a;)r.push(arguments[a++]);if(o=e,!(!tx(e)&&n===void 0||th(n)))return ex(e)||(e=function(s,u){if(typeof o=="function"&&(u=o.call(this,s,u)),!th(u))return u}),r[1]=e,$a.apply(null,r)}}));var $g;xt[Cr][kg]||nx(xt[Cr],kg,xt[Cr].valueOf);ux(xt,Os);wg[Et]=!0;var cx=ce,vx=cx.Object.getOwnPropertySymbols,px=vx,gx=px,Kr=gx,Dg={exports:{}},yx=re,mx=Ae,bx=ir,Mg=vn.f,Fg=at,wx=mx(function(){Mg(1)}),_x=!Fg||wx;yx({target:"Object",stat:!0,forced:_x,sham:!Fg},{getOwnPropertyDescriptor:function(n,e){return Mg(bx(n),e)}});var Ex=ce,Rg=Ex.Object,Sx=Dg.exports=function(n,e){return Rg.getOwnPropertyDescriptor(n,e)};Rg.getOwnPropertyDescriptor.sham&&(Sx.sham=!0);var kx=Dg.exports,Ng=kx,Xr=Ng,Tx=jr,Ox=Ca,Px=fs,Ix=Nt,Bg=Tx("Reflect","ownKeys")||function(n){var e=Ox.f(Ix(n)),t=Px.f;return t?e.concat(t(n)):e},Cx=re,xx=at,Ax=Bg,$x=ir,Dx=vn,Mx=Ia;Cx({target:"Object",stat:!0,sham:!xx},{getOwnPropertyDescriptors:function(n){for(var e=$x(n),t=Dx.f,r=Ax(e),a={},o=0,s,u;r.length>o;)u=t(e,s=r[o++]),u!==void 0&&Mx(a,s,u);return a}});var Fx=ce,Rx=Fx.Object.getOwnPropertyDescriptors,Nx=Rx,Bx=Nx,Yr=Bx,Lg={exports:{}},Lx=re,zg=at,zx=Mp;Lx({target:"Object",stat:!0,forced:!zg,sham:!zg},{defineProperties:zx});var jx=ce,jg=jx.Object,Hx=Lg.exports=function(n,e){return jg.defineProperties(n,e)};jg.defineProperties.sham&&(Hx.sham=!0);var Wx=Lg.exports,Ux=Wx,Is=Ux,Hg={exports:{}},Vx=re,Wg=at,Gx=Rt;Vx({target:"Object",stat:!0,forced:!Wg,sham:!Wg},{defineProperty:Gx.f});var qx=ce,Ug=qx.Object,Kx=Hg.exports=function(n,e,t){return Ug.defineProperty(n,e,t)};Ug.defineProperty.sham&&(Kx.sham=!0);var Xx=Hg.exports,Vg=Xx,Cs=Vg;function z(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}var Yx=Vg,Qx=Yx,Gg=Qx;function qg(i,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Gg(i,t.key,t)}}function j(i,n,e){return n&&qg(i.prototype,n),e&&qg(i,e),i}function xs(i,n,e){return n in i?Gg(i,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[n]=e,i}var Zx=re,Jx=mn;Zx({target:"Array",stat:!0},{isArray:Jx});var eA=ce,tA=eA.Array.isArray,rA=tA,Kg=rA,iA=Kg,nA=iA,Xg=nA;function aA(i){if(Xg(i))return i}var oA=Ae,sA=Ke,uA=ga,lA=sA("species"),Ma=function(i){return uA>=51||!oA(function(){var n=[],e=n.constructor={};return e[lA]=function(){return{foo:1}},n[i](Boolean).foo!==1})},hA=re,fA=Ae,dA=mn,cA=Qe,vA=It,pA=ar,Yg=Ia,gA=Jl,yA=Ma,mA=Ke,bA=ga,Qg=mA("isConcatSpreadable"),Zg=9007199254740991,Jg="Maximum allowed index exceeded",wA=bA>=51||!fA(function(){var i=[];return i[Qg]=!1,i.concat()[0]!==i}),_A=yA("concat"),EA=function(i){if(!cA(i))return!1;var n=i[Qg];return n!==void 0?!!n:dA(i)},SA=!wA||!_A;hA({target:"Array",proto:!0,forced:SA},{concat:function(n){var e=vA(this),t=gA(e,0),r=0,a,o,s,u,l;for(a=-1,s=arguments.length;a<s;a++)if(l=a===-1?e:arguments[a],EA(l)){if(u=pA(l.length),r+u>Zg)throw TypeError(Jg);for(o=0;o<u;o++,r++)o in l&&Yg(t,r,l[o])}else{if(r>=Zg)throw TypeError(Jg);Yg(t,r++,l)}return t.length=r,t}});var kA=Fe;kA("asyncIterator");var TA=Fe;TA("hasInstance");var OA=Fe;OA("isConcatSpreadable");var PA=Fe;PA("iterator");var IA=Fe;IA("match");var CA=Fe;CA("matchAll");var xA=Fe;xA("replace");var AA=Fe;AA("search");var $A=Fe;$A("species");var DA=Fe;DA("split");var MA=Fe;MA("toPrimitive");var FA=Fe;FA("toStringTag");var RA=Fe;RA("unscopables");var NA=qe,BA=Pa;BA(NA.JSON,"JSON",!0);var LA=ce,zA=LA.Symbol,jA=zA,ey=jA,HA=Fe;HA("asyncDispose");var WA=Fe;WA("dispose");var UA=Fe;UA("matcher");var VA=Fe;VA("metadata");var GA=Fe;GA("observable");var qA=Fe;qA("patternMatch");var KA=Fe;KA("replaceAll");var XA=ey,YA=XA,_n=YA;function QA(i,n){var e=i==null?null:typeof _n!="undefined"&&or(i)||i["@@iterator"];if(e!=null){var t=[],r=!0,a=!1,o,s;try{for(e=e.call(i);!(r=(o=e.next()).done)&&(t.push(o.value),!(n&&t.length===n));r=!0);}catch(u){a=!0,s=u}finally{try{!r&&e.return!=null&&e.return()}finally{if(a)throw s}}return t}}var ZA=re,JA=Qe,ty=mn,ry=hs,e$=ar,t$=ir,r$=Ia,i$=Ke,n$=Ma,a$=n$("slice"),o$=i$("species"),s$=[].slice,u$=Math.max;ZA({target:"Array",proto:!0,forced:!a$},{slice:function(n,e){var t=t$(this),r=e$(t.length),a=ry(n,r),o=ry(e===void 0?r:e,r),s,u,l;if(ty(t)&&(s=t.constructor,typeof s=="function"&&(s===Array||ty(s.prototype))?s=void 0:JA(s)&&(s=s[o$],s===null&&(s=void 0)),s===Array||s===void 0))return s$.call(t,a,o);for(u=new(s===void 0?Array:s)(u$(o-a,0)),l=0;a<o;a++,l++)a in t&&r$(u,l,t[a]);return u.length=l,u}});var l$=Ze,h$=l$("Array").slice,f$=h$,iy=Array.prototype,d$=function(i){var n=i.slice;return i===iy||i instanceof Array&&n===iy.slice?f$:n},c$=d$,ny=c$,v$=ny,p$=v$,g$=p$,y$=tg,m$=y$,ay=m$;function ch(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}function oy(i,n){var e;if(!!i){if(typeof i=="string")return ch(i,n);var t=g$(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return ay(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ch(i,n)}}function b$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $e(i,n){return aA(i)||QA(i,n)||oy(i,n)||b$()}var w$=Ss,_$=w$.f("iterator"),E$=_$,S$=E$,k$=S$,T$=k$,O$=T$;function Ee(i){return typeof _n=="function"&&typeof O$=="symbol"?Ee=function(e){return typeof e}:Ee=function(e){return e&&typeof _n=="function"&&e.constructor===_n&&e!==_n.prototype?"symbol":typeof e},Ee(i)}function P$(i){if(Xg(i))return ch(i)}function I$(i){if(typeof _n!="undefined"&&or(i)!=null||i["@@iterator"]!=null)return ay(i)}function C$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sr(i){return P$(i)||I$(i)||oy(i)||C$()}var Ar=ey,x$=Ze,A$=x$("Array").concat,$$=A$,sy=Array.prototype,D$=function(i){var n=i.concat;return i===sy||i instanceof Array&&n===sy.concat?$$:n},M$=D$,F$=M$,vh=F$,Je=ny,R$=re,N$=Bg;R$({target:"Reflect",stat:!0},{ownKeys:N$});var B$=ce;B$.Reflect.ownKeys;var me=Kg,L$=re,z$=Gr.map,j$=Ma,H$=j$("map");L$({target:"Array",proto:!0,forced:!H$},{map:function(n){return z$(this,n,arguments.length>1?arguments[1]:void 0)}});var W$=Ze,U$=W$("Array").map,V$=U$,uy=Array.prototype,G$=function(i){var n=i.map;return i===uy||i instanceof Array&&n===uy.map?V$:n},q$=G$,K$=q$,En=K$,X$=re,Y$=It,ly=Sa,Q$=Ae,Z$=Q$(function(){ly(1)});X$({target:"Object",stat:!0,forced:Z$},{keys:function(n){return ly(Y$(n))}});var J$=ce,eD=J$.Object.keys,tD=eD,rD=tD,De=rD,iD=re;iD({target:"Date",stat:!0},{now:function(){return new Date().getTime()}});var nD=ce,aD=nD.Date.now,oD=aD,sD=oD,As=sD,uD=Ae,Sn=function(i,n){var e=[][i];return!!e&&uD(function(){e.call(null,n||function(){throw 1},1)})},lD=Gr.forEach,hD=Sn,fD=hD("forEach"),dD=fD?[].forEach:function(n){return lD(this,n,arguments.length>1?arguments[1]:void 0)},cD=re,hy=dD;cD({target:"Array",proto:!0,forced:[].forEach!=hy},{forEach:hy});var vD=Ze,pD=vD("Array").forEach,gD=pD,yD=gD,mD=yD,bD=Oa,fy=Array.prototype,wD={DOMTokenList:!0,NodeList:!0},_D=function(i){var n=i.forEach;return i===fy||i instanceof Array&&n===fy.forEach||wD.hasOwnProperty(bD(i))?mD:n},Se=_D,ED=re,SD=mn,kD=[].reverse,dy=[1,2];ED({target:"Array",proto:!0,forced:String(dy)===String(dy.reverse())},{reverse:function(){return SD(this)&&(this.length=this.length),kD.call(this)}});var TD=Ze,OD=TD("Array").reverse,PD=OD,cy=Array.prototype,ID=function(i){var n=i.reverse;return i===cy||i instanceof Array&&n===cy.reverse?PD:n},CD=ID,xD=CD,xi=xD,AD=re,$D=hs,DD=ls,MD=ar,FD=It,RD=Jl,ND=Ia,BD=Ma,LD=BD("splice"),zD=Math.max,jD=Math.min,HD=9007199254740991,WD="Maximum allowed length exceeded";AD({target:"Array",proto:!0,forced:!LD},{splice:function(n,e){var t=FD(this),r=MD(t.length),a=$D(n,r),o=arguments.length,s,u,l,h,f,d;if(o===0?s=u=0:o===1?(s=0,u=r-a):(s=o-2,u=jD(zD(DD(e),0),r-a)),r+s-u>HD)throw TypeError(WD);for(l=RD(t,u),h=0;h<u;h++)f=a+h,f in t&&ND(l,h,t[f]);if(l.length=u,s<u){for(h=a;h<r-u;h++)f=h+u,d=h+s,f in t?t[d]=t[f]:delete t[d];for(h=r;h>r-u+s;h--)delete t[h-1]}else if(s>u)for(h=r-u;h>a;h--)f=h+u-1,d=h+s-1,f in t?t[d]=t[f]:delete t[d];for(h=0;h<s;h++)t[h+a]=arguments[h+2];return t.length=r-u+s,l}});var UD=Ze,VD=UD("Array").splice,GD=VD,vy=Array.prototype,qD=function(i){var n=i.splice;return i===vy||i instanceof Array&&n===vy.splice?GD:n},KD=qD,XD=KD,$r=XD,YD=re,QD=Il.includes;YD({target:"Array",proto:!0},{includes:function(n){return QD(this,n,arguments.length>1?arguments[1]:void 0)}});var ZD=Ze,JD=ZD("Array").includes,eM=Qe,tM=ca,rM=Ke,iM=rM("match"),nM=function(i){var n;return eM(i)&&((n=i[iM])!==void 0?!!n:tM(i)=="RegExp")},aM=nM,oM=function(i){if(aM(i))throw TypeError("The method doesn't accept regular expressions");return i},sM=Ke,uM=sM("match"),lM=function(i){var n=/./;try{"/./"[i](n)}catch(e){try{return n[uM]=!1,"/./"[i](n)}catch(t){}}return!1},hM=re,fM=oM,dM=va,py=Hr,cM=lM;hM({target:"String",proto:!0,forced:!cM("includes")},{includes:function(n){return!!~py(dM(this)).indexOf(py(fM(n)),arguments.length>1?arguments[1]:void 0)}});var vM=Ze,pM=vM("String").includes,gM=JD,yM=pM,gy=Array.prototype,yy=String.prototype,mM=function(i){var n=i.includes;return i===gy||i instanceof Array&&n===gy.includes?gM:typeof i=="string"||i===yy||i instanceof String&&n===yy.includes?yM:n},bM=mM,wM=bM,ur=wM,_M=re,EM=Ae,SM=It,my=ps,kM=Ip,TM=EM(function(){my(1)});_M({target:"Object",stat:!0,forced:TM,sham:!kM},{getPrototypeOf:function(n){return my(SM(n))}});var OM=ce,PM=OM.Object.getPrototypeOf,IM=PM,by=IM,wy=by,CM=re,xM=Gr.filter,AM=Ma,$M=AM("filter");CM({target:"Array",proto:!0,forced:!$M},{filter:function(n){return xM(this,n,arguments.length>1?arguments[1]:void 0)}});var DM=Ze,MM=DM("Array").filter,FM=MM,_y=Array.prototype,RM=function(i){var n=i.filter;return i===_y||i instanceof Array&&n===_y.filter?FM:n},NM=RM,BM=NM,St=BM,LM=at,zM=Sa,jM=ir,HM=fa.f,Ey=function(i){return function(n){for(var e=jM(n),t=zM(e),r=t.length,a=0,o=[],s;r>a;)s=t[a++],(!LM||HM.call(e,s))&&o.push(i?[s,e[s]]:e[s]);return o}},WM={entries:Ey(!0),values:Ey(!1)},UM=re,VM=WM.values;UM({target:"Object",stat:!0},{values:function(n){return VM(n)}});var GM=ce;GM.Object.values;var $s=`	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF`,qM=va,KM=Hr,XM=$s,Ds="["+XM+"]",YM=RegExp("^"+Ds+Ds+"*"),QM=RegExp(Ds+Ds+"*$"),ph=function(i){return function(n){var e=KM(qM(n));return i&1&&(e=e.replace(YM,"")),i&2&&(e=e.replace(QM,"")),e}},gh={start:ph(1),end:ph(2),trim:ph(3)},ZM=qe,JM=Hr,eF=gh.trim,Sy=$s,Ms=ZM.parseInt,tF=/^[+-]?0[Xx]/,rF=Ms(Sy+"08")!==8||Ms(Sy+"0x16")!==22,iF=rF?function(n,e){var t=eF(JM(n));return Ms(t,e>>>0||(tF.test(t)?16:10))}:Ms,nF=re,ky=iF;nF({global:!0,forced:parseInt!=ky},{parseInt:ky});var aF=ce,oF=aF.parseInt,sF=oF,uF=sF,Xt=uF,lF=re,hF=Il.indexOf,fF=Sn,Ty=[].indexOf,Oy=!!Ty&&1/[1].indexOf(1,-0)<0,dF=fF("indexOf");lF({target:"Array",proto:!0,forced:Oy||!dF},{indexOf:function(n){return Oy?Ty.apply(this,arguments)||0:hF(this,n,arguments.length>1?arguments[1]:void 0)}});var cF=Ze,vF=cF("Array").indexOf,pF=vF,Py=Array.prototype,gF=function(i){var n=i.indexOf;return i===Py||i instanceof Array&&n===Py.indexOf?pF:n},yF=gF,mF=yF,ve=mF,bF=Ae,Iy=$s,Cy="âÂá ",wF=function(i){return bF(function(){return!!Iy[i]()||Cy[i]()!=Cy||Iy[i].name!==i})},_F=re,EF=gh.trim,SF=wF;_F({target:"String",proto:!0,forced:SF("trim")},{trim:function(){return EF(this)}});var kF=Ze;kF("String").trim;var TF=re,OF=at,PF=Ta;TF({target:"Object",stat:!0,sham:!OF},{create:PF});var IF=ce,CF=IF.Object,xF=function(n,e){return CF.create(n,e)},AF=xF,xy=AF,Ai=xy,$F=re,DF=jr,MF=Ae,Fs=DF("JSON","stringify"),FF=/[\uD800-\uDFFF]/g,Ay=/^[\uD800-\uDBFF]$/,$y=/^[\uDC00-\uDFFF]$/,RF=function(i,n,e){var t=e.charAt(n-1),r=e.charAt(n+1);return Ay.test(i)&&!$y.test(r)||$y.test(i)&&!Ay.test(t)?"\\u"+i.charCodeAt(0).toString(16):i},NF=MF(function(){return Fs("\uDF06\uD834")!=='"\\udf06\\ud834"'||Fs("\uDEAD")!=='"\\udead"'});Fs&&$F({target:"JSON",stat:!0,forced:NF},{stringify:function(n,e,t){var r=Fs.apply(null,arguments);return typeof r=="string"?r.replace(FF,RF):r}});var yh=ce;yh.JSON||(yh.JSON={stringify:JSON.stringify});var BF=function(n,e,t){return yh.JSON.stringify.apply(null,arguments)},LF=BF,zF=LF,Fa=zF,jF=re,Dy=qe,HF=pa,WF=[].slice,UF=/MSIE .\./.test(HF),My=function(i){return function(n,e){var t=arguments.length>2,r=t?WF.call(arguments,2):void 0;return i(t?function(){(typeof n=="function"?n:Function(n)).apply(this,r)}:n,e)}};jF({global:!0,bind:!0,forced:UF},{setTimeout:My(Dy.setTimeout),setInterval:My(Dy.setInterval)});var VF=ce,GF=VF.setTimeout,lr=GF,qF=It,Fy=hs,KF=ar,XF=function(n){for(var e=qF(this),t=KF(e.length),r=arguments.length,a=Fy(r>1?arguments[1]:void 0,t),o=r>2?arguments[2]:void 0,s=o===void 0?t:Fy(o,t);s>a;)e[a++]=n;return e},YF=re,QF=XF;YF({target:"Array",proto:!0},{fill:QF});var ZF=Ze,JF=ZF("Array").fill,eR=JF,Ry=Array.prototype,tR=function(i){var n=i.fill;return i===Ry||i instanceof Array&&n===Ry.fill?eR:n},rR=tR,iR=rR,Ra=iR;function Yt(){return Yt=Object.assign||function(i){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}return i},Yt.apply(this,arguments)}function Bt(i,n){i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n}function Rs(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var mh;typeof Object.assign!="function"?mh=function(n){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(n),t=1;t<arguments.length;t++){var r=arguments[t];if(r!=null)for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])}return e}:mh=Object.assign;var $i=mh,Ny=["","webkit","Moz","MS","ms","o"],nR=typeof document=="undefined"?{style:{}}:document.createElement("div"),aR="function",kn=Math.round,Di=Math.abs,bh=Date.now;function Ns(i,n){for(var e,t,r=n[0].toUpperCase()+n.slice(1),a=0;a<Ny.length;){if(e=Ny[a],t=e?e+r:n,t in i)return t;a++}}var Dr;typeof window=="undefined"?Dr={}:Dr=window;var By=Ns(nR.style,"touchAction"),Ly=By!==void 0;function oR(){if(!Ly)return!1;var i={},n=Dr.CSS&&Dr.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){return i[e]=n?Dr.CSS.supports("touch-action",e):!0}),i}var zy="compute",jy="auto",wh="manipulation",Mi="none",Na="pan-x",Ba="pan-y",Bs=oR(),sR=/mobile|tablet|ip(ad|hone|od)|android/i,Hy="ontouchstart"in Dr,uR=Ns(Dr,"PointerEvent")!==void 0,lR=Hy&&sR.test(navigator.userAgent),La="touch",hR="pen",_h="mouse",fR="kinect",dR=25,ht=1,Fi=2,We=4,kt=8,Ls=1,za=2,ja=4,Ha=8,Tn=16,hr=za|ja,Ri=Ha|Tn,Wy=hr|Ri,Uy=["x","y"],zs=["clientX","clientY"];function Mr(i,n,e){var t;if(!!i)if(i.forEach)i.forEach(n,e);else if(i.length!==void 0)for(t=0;t<i.length;)n.call(e,i[t],t,i),t++;else for(t in i)i.hasOwnProperty(t)&&n.call(e,i[t],t,i)}function js(i,n){return typeof i===aR?i.apply(n&&n[0]||void 0,n):i}function Ni(i,n){return i.indexOf(n)>-1}function cR(i){if(Ni(i,Mi))return Mi;var n=Ni(i,Na),e=Ni(i,Ba);return n&&e?Mi:n||e?n?Na:Ba:Ni(i,wh)?wh:jy}var Vy=function(){function i(e,t){this.manager=e,this.set(t)}var n=i.prototype;return n.set=function(t){t===zy&&(t=this.compute()),Ly&&this.manager.element.style&&Bs[t]&&(this.manager.element.style[By]=t),this.actions=t.toLowerCase().trim()},n.update=function(){this.set(this.manager.options.touchAction)},n.compute=function(){var t=[];return Mr(this.manager.recognizers,function(r){js(r.options.enable,[r])&&(t=t.concat(r.getTouchAction()))}),cR(t.join(" "))},n.preventDefaults=function(t){var r=t.srcEvent,a=t.offsetDirection;if(this.manager.session.prevented){r.preventDefault();return}var o=this.actions,s=Ni(o,Mi)&&!Bs[Mi],u=Ni(o,Ba)&&!Bs[Ba],l=Ni(o,Na)&&!Bs[Na];if(s){var h=t.pointers.length===1,f=t.distance<2,d=t.deltaTime<250;if(h&&f&&d)return}if(!(l&&u)&&(s||u&&a&hr||l&&a&Ri))return this.preventSrc(r)},n.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},i}();function Eh(i,n){for(;i;){if(i===n)return!0;i=i.parentNode}return!1}function Gy(i){var n=i.length;if(n===1)return{x:kn(i[0].clientX),y:kn(i[0].clientY)};for(var e=0,t=0,r=0;r<n;)e+=i[r].clientX,t+=i[r].clientY,r++;return{x:kn(e/n),y:kn(t/n)}}function qy(i){for(var n=[],e=0;e<i.pointers.length;)n[e]={clientX:kn(i.pointers[e].clientX),clientY:kn(i.pointers[e].clientY)},e++;return{timeStamp:bh(),pointers:n,center:Gy(n),deltaX:i.deltaX,deltaY:i.deltaY}}function Hs(i,n,e){e||(e=Uy);var t=n[e[0]]-i[e[0]],r=n[e[1]]-i[e[1]];return Math.sqrt(t*t+r*r)}function Sh(i,n,e){e||(e=Uy);var t=n[e[0]]-i[e[0]],r=n[e[1]]-i[e[1]];return Math.atan2(r,t)*180/Math.PI}function Ky(i,n){return i===n?Ls:Di(i)>=Di(n)?i<0?za:ja:n<0?Ha:Tn}function vR(i,n){var e=n.center,t=i.offsetDelta||{},r=i.prevDelta||{},a=i.prevInput||{};(n.eventType===ht||a.eventType===We)&&(r=i.prevDelta={x:a.deltaX||0,y:a.deltaY||0},t=i.offsetDelta={x:e.x,y:e.y}),n.deltaX=r.x+(e.x-t.x),n.deltaY=r.y+(e.y-t.y)}function Xy(i,n,e){return{x:n/i||0,y:e/i||0}}function pR(i,n){return Hs(n[0],n[1],zs)/Hs(i[0],i[1],zs)}function gR(i,n){return Sh(n[1],n[0],zs)+Sh(i[1],i[0],zs)}function yR(i,n){var e=i.lastInterval||n,t=n.timeStamp-e.timeStamp,r,a,o,s;if(n.eventType!==kt&&(t>dR||e.velocity===void 0)){var u=n.deltaX-e.deltaX,l=n.deltaY-e.deltaY,h=Xy(t,u,l);a=h.x,o=h.y,r=Di(h.x)>Di(h.y)?h.x:h.y,s=Ky(u,l),i.lastInterval=n}else r=e.velocity,a=e.velocityX,o=e.velocityY,s=e.direction;n.velocity=r,n.velocityX=a,n.velocityY=o,n.direction=s}function mR(i,n){var e=i.session,t=n.pointers,r=t.length;e.firstInput||(e.firstInput=qy(n)),r>1&&!e.firstMultiple?e.firstMultiple=qy(n):r===1&&(e.firstMultiple=!1);var a=e.firstInput,o=e.firstMultiple,s=o?o.center:a.center,u=n.center=Gy(t);n.timeStamp=bh(),n.deltaTime=n.timeStamp-a.timeStamp,n.angle=Sh(s,u),n.distance=Hs(s,u),vR(e,n),n.offsetDirection=Ky(n.deltaX,n.deltaY);var l=Xy(n.deltaTime,n.deltaX,n.deltaY);n.overallVelocityX=l.x,n.overallVelocityY=l.y,n.overallVelocity=Di(l.x)>Di(l.y)?l.x:l.y,n.scale=o?pR(o.pointers,t):1,n.rotation=o?gR(o.pointers,t):0,n.maxPointers=e.prevInput?n.pointers.length>e.prevInput.maxPointers?n.pointers.length:e.prevInput.maxPointers:n.pointers.length,yR(e,n);var h=i.element,f=n.srcEvent,d;f.composedPath?d=f.composedPath()[0]:f.path?d=f.path[0]:d=f.target,Eh(d,h)&&(h=d),n.target=h}function bR(i,n,e){var t=e.pointers.length,r=e.changedPointers.length,a=n&ht&&t-r==0,o=n&(We|kt)&&t-r==0;e.isFirst=!!a,e.isFinal=!!o,a&&(i.session={}),e.eventType=n,mR(i,e),i.emit("hammer.input",e),i.recognize(e),i.session.prevInput=e}function Wa(i){return i.trim().split(/\s+/g)}function Ua(i,n,e){Mr(Wa(n),function(t){i.addEventListener(t,e,!1)})}function Va(i,n,e){Mr(Wa(n),function(t){i.removeEventListener(t,e,!1)})}function Yy(i){var n=i.ownerDocument||i;return n.defaultView||n.parentWindow||window}var On=function(){function i(e,t){var r=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(a){js(e.options.enable,[e])&&r.handler(a)},this.init()}var n=i.prototype;return n.handler=function(){},n.init=function(){this.evEl&&Ua(this.element,this.evEl,this.domHandler),this.evTarget&&Ua(this.target,this.evTarget,this.domHandler),this.evWin&&Ua(Yy(this.element),this.evWin,this.domHandler)},n.destroy=function(){this.evEl&&Va(this.element,this.evEl,this.domHandler),this.evTarget&&Va(this.target,this.evTarget,this.domHandler),this.evWin&&Va(Yy(this.element),this.evWin,this.domHandler)},i}();function Bi(i,n,e){if(i.indexOf&&!e)return i.indexOf(n);for(var t=0;t<i.length;){if(e&&i[t][e]==n||!e&&i[t]===n)return t;t++}return-1}var wR={pointerdown:ht,pointermove:Fi,pointerup:We,pointercancel:kt,pointerout:kt},_R={2:La,3:hR,4:_h,5:fR},Qy="pointerdown",Zy="pointermove pointerup pointercancel";Dr.MSPointerEvent&&!Dr.PointerEvent&&(Qy="MSPointerDown",Zy="MSPointerMove MSPointerUp MSPointerCancel");var Jy=function(i){Bt(n,i);function n(){var t,r=n.prototype;return r.evEl=Qy,r.evWin=Zy,t=i.apply(this,arguments)||this,t.store=t.manager.session.pointerEvents=[],t}var e=n.prototype;return e.handler=function(r){var a=this.store,o=!1,s=r.type.toLowerCase().replace("ms",""),u=wR[s],l=_R[r.pointerType]||r.pointerType,h=l===La,f=Bi(a,r.pointerId,"pointerId");u&ht&&(r.button===0||h)?f<0&&(a.push(r),f=a.length-1):u&(We|kt)&&(o=!0),!(f<0)&&(a[f]=r,this.callback(this.manager,u,{pointers:a,changedPointers:[r],pointerType:l,srcEvent:r}),o&&a.splice(f,1))},n}(On);function Ga(i){return Array.prototype.slice.call(i,0)}function kh(i,n,e){for(var t=[],r=[],a=0;a<i.length;){var o=n?i[a][n]:i[a];Bi(r,o)<0&&t.push(i[a]),r[a]=o,a++}return e&&(n?t=t.sort(function(s,u){return s[n]>u[n]}):t=t.sort()),t}var ER={touchstart:ht,touchmove:Fi,touchend:We,touchcancel:kt},SR="touchstart touchmove touchend touchcancel",Th=function(i){Bt(n,i);function n(){var t;return n.prototype.evTarget=SR,t=i.apply(this,arguments)||this,t.targetIds={},t}var e=n.prototype;return e.handler=function(r){var a=ER[r.type],o=kR.call(this,r,a);!o||this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:La,srcEvent:r})},n}(On);function kR(i,n){var e=Ga(i.touches),t=this.targetIds;if(n&(ht|Fi)&&e.length===1)return t[e[0].identifier]=!0,[e,e];var r,a,o=Ga(i.changedTouches),s=[],u=this.target;if(a=e.filter(function(l){return Eh(l.target,u)}),n===ht)for(r=0;r<a.length;)t[a[r].identifier]=!0,r++;for(r=0;r<o.length;)t[o[r].identifier]&&s.push(o[r]),n&(We|kt)&&delete t[o[r].identifier],r++;if(!!s.length)return[kh(a.concat(s),"identifier",!0),s]}var TR={mousedown:ht,mousemove:Fi,mouseup:We},OR="mousedown",PR="mousemove mouseup",Oh=function(i){Bt(n,i);function n(){var t,r=n.prototype;return r.evEl=OR,r.evWin=PR,t=i.apply(this,arguments)||this,t.pressed=!1,t}var e=n.prototype;return e.handler=function(r){var a=TR[r.type];a&ht&&r.button===0&&(this.pressed=!0),a&Fi&&r.which!==1&&(a=We),!!this.pressed&&(a&We&&(this.pressed=!1),this.callback(this.manager,a,{pointers:[r],changedPointers:[r],pointerType:_h,srcEvent:r}))},n}(On),IR=2500,em=25;function tm(i){var n=i.changedPointers,e=n[0];if(e.identifier===this.primaryTouch){var t={x:e.clientX,y:e.clientY},r=this.lastTouches;this.lastTouches.push(t);var a=function(){var s=r.indexOf(t);s>-1&&r.splice(s,1)};setTimeout(a,IR)}}function CR(i,n){i&ht?(this.primaryTouch=n.changedPointers[0].identifier,tm.call(this,n)):i&(We|kt)&&tm.call(this,n)}function xR(i){for(var n=i.srcEvent.clientX,e=i.srcEvent.clientY,t=0;t<this.lastTouches.length;t++){var r=this.lastTouches[t],a=Math.abs(n-r.x),o=Math.abs(e-r.y);if(a<=em&&o<=em)return!0}return!1}var rm=function(){var i=function(n){Bt(e,n);function e(r,a){var o;return o=n.call(this,r,a)||this,o.handler=function(s,u,l){var h=l.pointerType===La,f=l.pointerType===_h;if(!(f&&l.sourceCapabilities&&l.sourceCapabilities.firesTouchEvents)){if(h)CR.call(Rs(Rs(o)),u,l);else if(f&&xR.call(Rs(Rs(o)),l))return;o.callback(s,u,l)}},o.touch=new Th(o.manager,o.handler),o.mouse=new Oh(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var t=e.prototype;return t.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(On);return i}();function AR(i){var n,e=i.options.inputClass;return e?n=e:uR?n=Jy:lR?n=Th:Hy?n=rm:n=Oh,new n(i,bR)}function Pn(i,n,e){return Array.isArray(i)?(Mr(i,e[n],e),!0):!1}var Ws=1,Lt=2,In=4,Qr=8,Fr=Qr,qa=16,fr=32,$R=1;function DR(){return $R++}function Us(i,n){var e=n.manager;return e?e.get(i):i}function im(i){return i&qa?"cancel":i&Qr?"end":i&In?"move":i&Lt?"start":""}var Ka=function(){function i(e){e===void 0&&(e={}),this.options=Yt({enable:!0},e),this.id=DR(),this.manager=null,this.state=Ws,this.simultaneous={},this.requireFail=[]}var n=i.prototype;return n.set=function(t){return $i(this.options,t),this.manager&&this.manager.touchAction.update(),this},n.recognizeWith=function(t){if(Pn(t,"recognizeWith",this))return this;var r=this.simultaneous;return t=Us(t,this),r[t.id]||(r[t.id]=t,t.recognizeWith(this)),this},n.dropRecognizeWith=function(t){return Pn(t,"dropRecognizeWith",this)?this:(t=Us(t,this),delete this.simultaneous[t.id],this)},n.requireFailure=function(t){if(Pn(t,"requireFailure",this))return this;var r=this.requireFail;return t=Us(t,this),Bi(r,t)===-1&&(r.push(t),t.requireFailure(this)),this},n.dropRequireFailure=function(t){if(Pn(t,"dropRequireFailure",this))return this;t=Us(t,this);var r=Bi(this.requireFail,t);return r>-1&&this.requireFail.splice(r,1),this},n.hasRequireFailures=function(){return this.requireFail.length>0},n.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},n.emit=function(t){var r=this,a=this.state;function o(s){r.manager.emit(s,t)}a<Qr&&o(r.options.event+im(a)),o(r.options.event),t.additionalEvent&&o(t.additionalEvent),a>=Qr&&o(r.options.event+im(a))},n.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=fr},n.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(fr|Ws)))return!1;t++}return!0},n.recognize=function(t){var r=$i({},t);if(!js(this.options.enable,[this,r])){this.reset(),this.state=fr;return}this.state&(Fr|qa|fr)&&(this.state=Ws),this.state=this.process(r),this.state&(Lt|In|Qr|qa)&&this.tryEmit(r)},n.process=function(t){},n.getTouchAction=function(){},n.reset=function(){},i}(),Ph=function(i){Bt(n,i);function n(t){var r;return t===void 0&&(t={}),r=i.call(this,Yt({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},t))||this,r.pTime=!1,r.pCenter=!1,r._timer=null,r._input=null,r.count=0,r}var e=n.prototype;return e.getTouchAction=function(){return[wh]},e.process=function(r){var a=this,o=this.options,s=r.pointers.length===o.pointers,u=r.distance<o.threshold,l=r.deltaTime<o.time;if(this.reset(),r.eventType&ht&&this.count===0)return this.failTimeout();if(u&&l&&s){if(r.eventType!==We)return this.failTimeout();var h=this.pTime?r.timeStamp-this.pTime<o.interval:!0,f=!this.pCenter||Hs(this.pCenter,r.center)<o.posThreshold;this.pTime=r.timeStamp,this.pCenter=r.center,!f||!h?this.count=1:this.count+=1,this._input=r;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){a.state=Fr,a.tryEmit()},o.interval),Lt):Fr}return fr},e.failTimeout=function(){var r=this;return this._timer=setTimeout(function(){r.state=fr},this.options.interval),fr},e.reset=function(){clearTimeout(this._timer)},e.emit=function(){this.state===Fr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},n}(Ka),Cn=function(i){Bt(n,i);function n(t){return t===void 0&&(t={}),i.call(this,Yt({pointers:1},t))||this}var e=n.prototype;return e.attrTest=function(r){var a=this.options.pointers;return a===0||r.pointers.length===a},e.process=function(r){var a=this.state,o=r.eventType,s=a&(Lt|In),u=this.attrTest(r);return s&&(o&kt||!u)?a|qa:s||u?o&We?a|Qr:a&Lt?a|In:Lt:fr},n}(Ka);function nm(i){return i===Tn?"down":i===Ha?"up":i===za?"left":i===ja?"right":""}var Ih=function(i){Bt(n,i);function n(t){var r;return t===void 0&&(t={}),r=i.call(this,Yt({event:"pan",threshold:10,pointers:1,direction:Wy},t))||this,r.pX=null,r.pY=null,r}var e=n.prototype;return e.getTouchAction=function(){var r=this.options.direction,a=[];return r&hr&&a.push(Ba),r&Ri&&a.push(Na),a},e.directionTest=function(r){var a=this.options,o=!0,s=r.distance,u=r.direction,l=r.deltaX,h=r.deltaY;return u&a.direction||(a.direction&hr?(u=l===0?Ls:l<0?za:ja,o=l!==this.pX,s=Math.abs(r.deltaX)):(u=h===0?Ls:h<0?Ha:Tn,o=h!==this.pY,s=Math.abs(r.deltaY))),r.direction=u,o&&s>a.threshold&&u&a.direction},e.attrTest=function(r){return Cn.prototype.attrTest.call(this,r)&&(this.state&Lt||!(this.state&Lt)&&this.directionTest(r))},e.emit=function(r){this.pX=r.deltaX,this.pY=r.deltaY;var a=nm(r.direction);a&&(r.additionalEvent=this.options.event+a),i.prototype.emit.call(this,r)},n}(Cn),am=function(i){Bt(n,i);function n(t){return t===void 0&&(t={}),i.call(this,Yt({event:"swipe",threshold:10,velocity:.3,direction:hr|Ri,pointers:1},t))||this}var e=n.prototype;return e.getTouchAction=function(){return Ih.prototype.getTouchAction.call(this)},e.attrTest=function(r){var a=this.options.direction,o;return a&(hr|Ri)?o=r.overallVelocity:a&hr?o=r.overallVelocityX:a&Ri&&(o=r.overallVelocityY),i.prototype.attrTest.call(this,r)&&a&r.offsetDirection&&r.distance>this.options.threshold&&r.maxPointers===this.options.pointers&&Di(o)>this.options.velocity&&r.eventType&We},e.emit=function(r){var a=nm(r.offsetDirection);a&&this.manager.emit(this.options.event+a,r),this.manager.emit(this.options.event,r)},n}(Cn),om=function(i){Bt(n,i);function n(t){return t===void 0&&(t={}),i.call(this,Yt({event:"pinch",threshold:0,pointers:2},t))||this}var e=n.prototype;return e.getTouchAction=function(){return[Mi]},e.attrTest=function(r){return i.prototype.attrTest.call(this,r)&&(Math.abs(r.scale-1)>this.options.threshold||this.state&Lt)},e.emit=function(r){if(r.scale!==1){var a=r.scale<1?"in":"out";r.additionalEvent=this.options.event+a}i.prototype.emit.call(this,r)},n}(Cn),sm=function(i){Bt(n,i);function n(t){return t===void 0&&(t={}),i.call(this,Yt({event:"rotate",threshold:0,pointers:2},t))||this}var e=n.prototype;return e.getTouchAction=function(){return[Mi]},e.attrTest=function(r){return i.prototype.attrTest.call(this,r)&&(Math.abs(r.rotation)>this.options.threshold||this.state&Lt)},n}(Cn),um=function(i){Bt(n,i);function n(t){var r;return t===void 0&&(t={}),r=i.call(this,Yt({event:"press",pointers:1,time:251,threshold:9},t))||this,r._timer=null,r._input=null,r}var e=n.prototype;return e.getTouchAction=function(){return[jy]},e.process=function(r){var a=this,o=this.options,s=r.pointers.length===o.pointers,u=r.distance<o.threshold,l=r.deltaTime>o.time;if(this._input=r,!u||!s||r.eventType&(We|kt)&&!l)this.reset();else if(r.eventType&ht)this.reset(),this._timer=setTimeout(function(){a.state=Fr,a.tryEmit()},o.time);else if(r.eventType&We)return Fr;return fr},e.reset=function(){clearTimeout(this._timer)},e.emit=function(r){this.state===Fr&&(r&&r.eventType&We?this.manager.emit(this.options.event+"up",r):(this._input.timeStamp=bh(),this.manager.emit(this.options.event,this._input)))},n}(Ka),lm={domEvents:!1,touchAction:zy,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},hm=[[sm,{enable:!1}],[om,{enable:!1},["rotate"]],[am,{direction:hr}],[Ih,{direction:hr},["swipe"]],[Ph],[Ph,{event:"doubletap",taps:2},["tap"]],[um]],MR=1,fm=2;function dm(i,n){var e=i.element;if(!!e.style){var t;Mr(i.options.cssProps,function(r,a){t=Ns(e.style,a),n?(i.oldCssProps[t]=e.style[t],e.style[t]=r):e.style[t]=i.oldCssProps[t]||""}),n||(i.oldCssProps={})}}function FR(i,n){var e=document.createEvent("Event");e.initEvent(i,!0,!0),e.gesture=n,n.target.dispatchEvent(e)}var cm=function(){function i(e,t){var r=this;this.options=$i({},lm,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=AR(this),this.touchAction=new Vy(this,this.options.touchAction),dm(this,!0),Mr(this.options.recognizers,function(a){var o=r.add(new a[0](a[1]));a[2]&&o.recognizeWith(a[2]),a[3]&&o.requireFailure(a[3])},this)}var n=i.prototype;return n.set=function(t){return $i(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},n.stop=function(t){this.session.stopped=t?fm:MR},n.recognize=function(t){var r=this.session;if(!r.stopped){this.touchAction.preventDefaults(t);var a,o=this.recognizers,s=r.curRecognizer;(!s||s&&s.state&Fr)&&(r.curRecognizer=null,s=null);for(var u=0;u<o.length;)a=o[u],r.stopped!==fm&&(!s||a===s||a.canRecognizeWith(s))?a.recognize(t):a.reset(),!s&&a.state&(Lt|In|Qr)&&(r.curRecognizer=a,s=a),u++}},n.get=function(t){if(t instanceof Ka)return t;for(var r=this.recognizers,a=0;a<r.length;a++)if(r[a].options.event===t)return r[a];return null},n.add=function(t){if(Pn(t,"add",this))return this;var r=this.get(t.options.event);return r&&this.remove(r),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},n.remove=function(t){if(Pn(t,"remove",this))return this;var r=this.get(t);if(t){var a=this.recognizers,o=Bi(a,r);o!==-1&&(a.splice(o,1),this.touchAction.update())}return this},n.on=function(t,r){if(t===void 0||r===void 0)return this;var a=this.handlers;return Mr(Wa(t),function(o){a[o]=a[o]||[],a[o].push(r)}),this},n.off=function(t,r){if(t===void 0)return this;var a=this.handlers;return Mr(Wa(t),function(o){r?a[o]&&a[o].splice(Bi(a[o],r),1):delete a[o]}),this},n.emit=function(t,r){this.options.domEvents&&FR(t,r);var a=this.handlers[t]&&this.handlers[t].slice();if(!(!a||!a.length)){r.type=t,r.preventDefault=function(){r.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](r),o++}},n.destroy=function(){this.element&&dm(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},i}(),RR={touchstart:ht,touchmove:Fi,touchend:We,touchcancel:kt},NR="touchstart",BR="touchstart touchmove touchend touchcancel",zR=function(i){Bt(n,i);function n(){var t,r=n.prototype;return r.evTarget=NR,r.evWin=BR,t=i.apply(this,arguments)||this,t.started=!1,t}var e=n.prototype;return e.handler=function(r){var a=RR[r.type];if(a===ht&&(this.started=!0),!!this.started){var o=LR.call(this,r,a);a&(We|kt)&&o[0].length-o[1].length==0&&(this.started=!1),this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:La,srcEvent:r})}},n}(On);function LR(i,n){var e=Ga(i.touches),t=Ga(i.changedTouches);return n&(We|kt)&&(e=kh(e.concat(t),"identifier",!0)),[e,t]}function vm(i,n,e){var t="DEPRECATED METHOD: "+n+`
`+e+` AT 
`;return function(){var r=new Error("get-stack-trace"),a=r&&r.stack?r.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,t,a),i.apply(this,arguments)}}var pm=vm(function(i,n,e){for(var t=Object.keys(n),r=0;r<t.length;)(!e||e&&i[t[r]]===void 0)&&(i[t[r]]=n[t[r]]),r++;return i},"extend","Use `assign`."),jR=vm(function(i,n){return pm(i,n,!0)},"merge","Use `assign`.");function HR(i,n,e){var t=n.prototype,r;r=i.prototype=Object.create(t),r.constructor=i,r._super=t,e&&$i(r,e)}function gm(i,n){return function(){return i.apply(n,arguments)}}var WR=function(){var i=function(e,t){return t===void 0&&(t={}),new cm(e,Yt({recognizers:hm.concat()},t))};return i.VERSION="2.0.17-rc",i.DIRECTION_ALL=Wy,i.DIRECTION_DOWN=Tn,i.DIRECTION_LEFT=za,i.DIRECTION_RIGHT=ja,i.DIRECTION_UP=Ha,i.DIRECTION_HORIZONTAL=hr,i.DIRECTION_VERTICAL=Ri,i.DIRECTION_NONE=Ls,i.DIRECTION_DOWN=Tn,i.INPUT_START=ht,i.INPUT_MOVE=Fi,i.INPUT_END=We,i.INPUT_CANCEL=kt,i.STATE_POSSIBLE=Ws,i.STATE_BEGAN=Lt,i.STATE_CHANGED=In,i.STATE_ENDED=Qr,i.STATE_RECOGNIZED=Fr,i.STATE_CANCELLED=qa,i.STATE_FAILED=fr,i.Manager=cm,i.Input=On,i.TouchAction=Vy,i.TouchInput=Th,i.MouseInput=Oh,i.PointerEventInput=Jy,i.TouchMouseInput=rm,i.SingleTouchInput=zR,i.Recognizer=Ka,i.AttrRecognizer=Cn,i.Tap=Ph,i.Pan=Ih,i.Swipe=am,i.Pinch=om,i.Rotate=sm,i.Press=um,i.on=Ua,i.off=Va,i.each=Mr,i.merge=jR,i.extend=pm,i.bindFn=gm,i.assign=$i,i.inherit=HR,i.bindFn=gm,i.prefixed=Ns,i.toArray=Ga,i.inArray=Bi,i.uniqueArray=kh,i.splitStr=Wa,i.boolOrFn=js,i.hasParent=Eh,i.addEventListeners=Ua,i.removeEventListeners=Va,i.defaults=$i({},lm,{preset:hm}),i}(),UR=WR;function ym(i,n){var e=typeof Ar!="undefined"&&or(i)||i["@@iterator"];if(!e){if(me(i)||(e=VR(i))||n&&i&&typeof i.length=="number"){e&&(i=e);var t=0,r=function(){};return{s:r,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(i)},n:function(){var l=e.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function VR(i,n){var e;if(!!i){if(typeof i=="string")return mm(i,n);var t=Je(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Ur(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mm(i,n)}}function mm(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}Ar("DELETE");function Vs(){for(var i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return GR(n.length?n:[As()])}function GR(i){var n=qR(i),e=$e(n,3),t=e[0],r=e[1],a=e[2],o=1,s=function(){var l=2091639*t+o*23283064365386963e-26;return t=r,r=a,a=l-(o=l|0)};return s.uint32=function(){return s()*4294967296},s.fract53=function(){return s()+(s()*2097152|0)*11102230246251565e-32},s.algorithm="Alea",s.seed=i,s.version="0.9",s}function qR(){for(var i=KR(),n=i(" "),e=i(" "),t=i(" "),r=0;r<arguments.length;r++)n-=i(r<0||arguments.length<=r?void 0:arguments[r]),n<0&&(n+=1),e-=i(r<0||arguments.length<=r?void 0:arguments[r]),e<0&&(e+=1),t-=i(r<0||arguments.length<=r?void 0:arguments[r]),t<0&&(t+=1);return[n,e,t]}function KR(){var i=4022871197;return function(n){for(var e=n.toString(),t=0;t<e.length;t++){i+=e.charCodeAt(t);var r=.02519603282416938*i;i=r>>>0,r-=i,r*=i,i=r>>>0,r-=i,i+=r*4294967296}return(i>>>0)*23283064365386963e-26}}function XR(){var i=function(){};return{on:i,off:i,destroy:i,emit:i,get:function(){return{set:i}}}}var Ch=typeof window!="undefined"?window.Hammer||UR:function(){return XR()};function dr(i){var n=this,e;this._cleanupQueue=[],this.active=!1,this._dom={container:i,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){n._dom.overlay.parentNode.removeChild(n._dom.overlay)});var t=Ch(this._dom.overlay);t.on("tap",B(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(function(){t.destroy()});var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Se(r).call(r,function(a){t.on(a,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(a){YR(a.target,i)||n.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",n._onClick)})),this._escListener=function(a){("key"in a?a.key==="Escape":a.keyCode===27)&&n.deactivate()}}wp(dr.prototype);dr.current=null;dr.prototype.destroy=function(){var i,n;this.deactivate();var e=ym(xi(i=$r(n=this._cleanupQueue).call(n,0)).call(i)),t;try{for(e.s();!(t=e.n()).done;){var r=t.value;r()}}catch(a){e.e(a)}finally{e.f()}};dr.prototype.activate=function(){dr.current&&dr.current.deactivate(),dr.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};dr.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};dr.prototype._onTapOverlay=function(i){this.activate(),i.srcEvent.stopPropagation()};function YR(i,n){for(;i;){if(i===n)return!0;i=i.parentNode}return!1}var QR=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ZR=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,JR=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,eN=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Zr(i){if(i)for(;i.hasChildNodes()===!0;){var n=i.firstChild;n&&(Zr(n),i.removeChild(n))}}function Jr(i){return i instanceof String||typeof i=="string"}function bm(i){return Ee(i)==="object"&&i!==null}function Li(i,n,e,t){var r=!1;t===!0&&(r=n[e]===null&&i[e]!==void 0),r?delete i[e]:i[e]=n[e]}function wm(i,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(var t in i)if(n[t]!==void 0)if(n[t]===null||Ee(n[t])!=="object")Li(i,n,t,e);else{var r=i[t],a=n[t];bm(r)&&bm(a)&&wm(r,a,e)}}function xn(i,n,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(me(e))throw new TypeError("Arrays are not supported by deepExtend");for(var r=0;r<i.length;r++){var a=i[r];if(Object.prototype.hasOwnProperty.call(e,a))if(e[a]&&e[a].constructor===Object)n[a]===void 0&&(n[a]={}),n[a].constructor===Object?ke(n[a],e[a],!1,t):Li(n,e,a,t);else{if(me(e[a]))throw new TypeError("Arrays are not supported by deepExtend");Li(n,e,a,t)}}return n}function Gs(i,n,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(me(e))throw new TypeError("Arrays are not supported by deepExtend");for(var r in e)if(!!Object.prototype.hasOwnProperty.call(e,r)&&!ur(i).call(i,r))if(e[r]&&e[r].constructor===Object)n[r]===void 0&&(n[r]={}),n[r].constructor===Object?ke(n[r],e[r]):Li(n,e,r,t);else if(me(e[r])){n[r]=[];for(var a=0;a<e[r].length;a++)n[r].push(e[r][a])}else Li(n,e,r,t);return n}function ke(i,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)||e===!0)if(Ee(n[r])==="object"&&n[r]!==null&&wy(n[r])===Object.prototype)i[r]===void 0?i[r]=ke({},n[r],e):Ee(i[r])==="object"&&i[r]!==null&&wy(i[r])===Object.prototype?ke(i[r],n[r],e):Li(i,n,r,t);else if(me(n[r])){var a;i[r]=Je(a=n[r]).call(a)}else Li(i,n,r,t);return i}function qs(i,n){var e;return vh(e=[]).call(e,sr(i),[n])}function tN(i){return Je(i).call(i)}function rN(i){return i.getBoundingClientRect().left}function iN(i){return i.getBoundingClientRect().top}function ue(i,n){if(me(i))for(var e=i.length,t=0;t<e;t++)n(i[t],t,i);else for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&n(i[r],r,i)}function nN(i,n,e,t){if(i.addEventListener){var r;t===void 0&&(t=!1),n==="mousewheel"&&ur(r=navigator.userAgent).call(r,"Firefox")&&(n="DOMMouseScroll"),i.addEventListener(n,e,t)}else i.attachEvent("on"+n,e)}function aN(i,n,e,t){if(i.removeEventListener){var r;t===void 0&&(t=!1),n==="mousewheel"&&ur(r=navigator.userAgent).call(r,"Firefox")&&(n="DOMMouseScroll"),i.removeEventListener(n,e,t)}else i.detachEvent("on"+n,e)}function xh(i){var n;switch(i.length){case 3:case 4:return n=ZR.exec(i),n?{r:Xt(n[1]+n[1],16),g:Xt(n[2]+n[2],16),b:Xt(n[3]+n[3],16)}:null;case 6:case 7:return n=QR.exec(i),n?{r:Xt(n[1],16),g:Xt(n[2],16),b:Xt(n[3],16)}:null;default:return null}}function zt(i,n){if(ur(i).call(i,"rgba"))return i;if(ur(i).call(i,"rgb")){var e=i.substr(ve(i).call(i,"(")+1).replace(")","").split(",");return"rgba("+e[0]+","+e[1]+","+e[2]+","+n+")"}else{var t=xh(i);return t==null?i:"rgba("+t.r+","+t.g+","+t.b+","+n+")"}}function _m(i,n,e){var t;return"#"+Je(t=((1<<24)+(i<<16)+(n<<8)+e).toString(16)).call(t,1)}function $h(i,n){if(Jr(i)){var e=i;if(Sm(e)){var t,r=En(t=e.substr(4).substr(0,e.length-5).split(",")).call(t,function(d){return Xt(d)});e=_m(r[0],r[1],r[2])}if(Em(e)===!0){var a=oN(e),o={h:a.h,s:a.s*.8,v:Math.min(1,a.v*1.02)},s={h:a.h,s:Math.min(1,a.s*1.25),v:a.v*.8},u=Ah(s.h,s.s,s.v),l=Ah(o.h,o.s,o.v);return{background:e,border:u,highlight:{background:l,border:u},hover:{background:l,border:u}}}else return{background:e,border:e,highlight:{background:e,border:e},hover:{background:e,border:e}}}else if(n){var h={background:i.background||n.background,border:i.border||n.border,highlight:Jr(i.highlight)?{border:i.highlight,background:i.highlight}:{background:i.highlight&&i.highlight.background||n.highlight.background,border:i.highlight&&i.highlight.border||n.highlight.border},hover:Jr(i.hover)?{border:i.hover,background:i.hover}:{border:i.hover&&i.hover.border||n.hover.border,background:i.hover&&i.hover.background||n.hover.background}};return h}else{var f={background:i.background||void 0,border:i.border||void 0,highlight:Jr(i.highlight)?{border:i.highlight,background:i.highlight}:{background:i.highlight&&i.highlight.background||void 0,border:i.highlight&&i.highlight.border||void 0},hover:Jr(i.hover)?{border:i.hover,background:i.hover}:{border:i.hover&&i.hover.border||void 0,background:i.hover&&i.hover.background||void 0}};return f}}function Xa(i,n,e){i=i/255,n=n/255,e=e/255;var t=Math.min(i,Math.min(n,e)),r=Math.max(i,Math.max(n,e));if(t===r)return{h:0,s:0,v:t};var a=i===t?n-e:e===t?i-n:e-i,o=i===t?3:e===t?1:5,s=60*(o-a/(r-t))/360,u=(r-t)/r,l=r;return{h:s,s:u,v:l}}function Ks(i,n,e){var t,r,a,o=Math.floor(i*6),s=i*6-o,u=e*(1-n),l=e*(1-s*n),h=e*(1-(1-s)*n);switch(o%6){case 0:t=e,r=h,a=u;break;case 1:t=l,r=e,a=u;break;case 2:t=u,r=e,a=h;break;case 3:t=u,r=l,a=e;break;case 4:t=h,r=u,a=e;break;case 5:t=e,r=u,a=l;break}return{r:Math.floor(t*255),g:Math.floor(r*255),b:Math.floor(a*255)}}function Ah(i,n,e){var t=Ks(i,n,e);return _m(t.r,t.g,t.b)}function oN(i){var n=xh(i);if(!n)throw new TypeError("'".concat(i,"' is not a valid color."));return Xa(n.r,n.g,n.b)}function Em(i){var n=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(i);return n}function Sm(i){return JR.test(i)}function sN(i){return eN.test(i)}function ei(i){if(i===null||Ee(i)!=="object")return null;if(i instanceof Element)return i;var n=Ai(i);for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&Ee(i[e])=="object"&&(n[e]=ei(i[e]));return n}function jt(i,n,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=function(v){return v!=null},a=function(v){return v!==null&&Ee(v)==="object"},o=function(v){for(var m in v)if(Object.prototype.hasOwnProperty.call(v,m))return!1;return!0};if(!a(i))throw new Error("Parameter mergeTarget must be an object");if(!a(n))throw new Error("Parameter options must be an object");if(!r(e))throw new Error("Parameter option must have a value");if(!a(t))throw new Error("Parameter globalOptions must be an object");var s=function(v,m,w){a(v[w])||(v[w]={});var g=m[w],E=v[w];for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(E[_]=g[_])},u=n[e],l=a(t)&&!o(t),h=l?t[e]:void 0,f=h?h.enabled:void 0;if(u!==void 0){if(typeof u=="boolean"){a(i[e])||(i[e]={}),i[e].enabled=u;return}if(u===null&&!a(i[e]))if(r(h))i[e]=Ai(h);else return;if(!!a(u)){var d=!0;u.enabled!==void 0?d=u.enabled:f!==void 0&&(d=h.enabled),s(i,n,e),i[e].enabled=d}}}var uN={linear:function(n){return n},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return n*(2-n)},easeInOutQuad:function(n){return n<.5?2*n*n:-1+(4-2*n)*n},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return--n*n*n+1},easeInOutCubic:function(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return 1- --n*n*n*n},easeInOutQuart:function(n){return n<.5?8*n*n*n*n:1-8*--n*n*n*n},easeInQuint:function(n){return n*n*n*n*n},easeOutQuint:function(n){return 1+--n*n*n*n*n},easeInOutQuint:function(n){return n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n}};function ti(i,n){var e;me(n)||(n=[n]);var t=ym(i),r;try{for(t.s();!(r=t.n()).done;){var a=r.value;if(a){e=a[n[0]];for(var o=1;o<n.length;o++)e&&(e=e[n[o]]);if(typeof e!="undefined")break}}}catch(s){t.e(s)}finally{t.f()}return e}var lN={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},hN=function(){function i(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;z(this,i),this.pixelRatio=n,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return j(i,[{key:"insertTo",value:function(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(e){if(typeof e=="string")return lN[e]}},{key:"setColor",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e!=="none"){var r,a=this._isColorString(e);if(a!==void 0&&(e=a),Jr(e)===!0){if(Sm(e)===!0){var o=e.substr(4).substr(0,e.length-5).split(",");r={r:o[0],g:o[1],b:o[2],a:1}}else if(sN(e)===!0){var s=e.substr(5).substr(0,e.length-6).split(",");r={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(Em(e)===!0){var u=xh(e);r={r:u.r,g:u.g,b:u.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){var l=e.a!==void 0?e.a:"1.0";r={r:e.r,g:e.g,b:e.b,a:l}}if(r===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Fa(e));this._setColor(r,t)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;t===!0&&(this.previousColor=je({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",lr(function(){e.closeCallback!==void 0&&(e.closeCallback(),e.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;t===!0&&(this.initialColor=je({},e)),this.color=e;var r=Xa(e.r,e.g,e.b),a=2*Math.PI,o=this.r*r.s,s=this.centerCoordinates.x+o*Math.sin(a*r.h),u=this.centerCoordinates.y+o*Math.cos(a*r.h);this.colorPickerSelector.style.left=s-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=u-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}},{key:"_setOpacity",value:function(e){this.color.a=e/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(e){var t=Xa(this.color.r,this.color.g,this.color.b);t.v=e/100;var r=Ks(t.h,t.s,t.v);r.a=this.color.a,this.color=r,this._updatePicker()}},{key:"_updatePicker",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,t=Xa(e.r,e.g,e.b),r=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1)),r.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var a=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;r.clearRect(0,0,a,o),r.putImageData(this.hueCircle,0,0),r.fillStyle="rgba(0,0,0,"+(1-t.v)+")",r.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Ra(r).call(r),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var e,t,r,a;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var s=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(l){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(l){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var u=this;this.opacityRange.onchange=function(){u._setOpacity(this.value)},this.opacityRange.oninput=function(){u._setOpacity(this.value)},this.brightnessRange.onchange=function(){u._setBrightness(this.value)},this.brightnessRange.oninput=function(){u._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=B(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=B(t=this._apply).call(t,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=B(r=this._save).call(r,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=B(a=this._loadLast).call(a,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var e=this;this.drag={},this.pinch={},this.hammer=new Ch(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",function(t){t.isFirst&&e._moveSelector(t)}),this.hammer.on("tap",function(t){e._moveSelector(t)}),this.hammer.on("panstart",function(t){e._moveSelector(t)}),this.hammer.on("panmove",function(t){e._moveSelector(t)}),this.hammer.on("panend",function(t){e._moveSelector(t)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var t=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,r);var a,o,s,u;this.centerCoordinates={x:t*.5,y:r*.5},this.r=.49*t;var l=2*Math.PI/360,h=1/360,f=1/this.r,d;for(s=0;s<360;s++)for(u=0;u<this.r;u++)a=this.centerCoordinates.x+u*Math.sin(l*s),o=this.centerCoordinates.y+u*Math.cos(l*s),d=Ks(s*h,u*f,1),e.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",e.fillRect(a-.5,o-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,r)}this.generated=!0}},{key:"_moveSelector",value:function(e){var t=this.colorPickerDiv.getBoundingClientRect(),r=e.center.x-t.left,a=e.center.y-t.top,o=.5*this.colorPickerDiv.clientHeight,s=.5*this.colorPickerDiv.clientWidth,u=r-s,l=a-o,h=Math.atan2(u,l),f=.98*Math.min(Math.sqrt(u*u+l*l),s),d=Math.cos(h)*f+o,c=Math.sin(h)*f+s;this.colorPickerSelector.style.top=d-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=c-.5*this.colorPickerSelector.clientWidth+"px";var v=h/(2*Math.PI);v=v<0?v+1:v;var m=f/this.r,w=Xa(this.color.r,this.color.g,this.color.b);w.h=v,w.s=m;var g=Ks(w.h,w.s,w.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),i}();function Dh(){for(var i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];if(n.length<1)throw new TypeError("Invalid arguments.");if(n.length===1)return document.createTextNode(n[0]);var t=document.createElement(n[0]);return t.appendChild(Dh.apply(void 0,sr(Je(n).call(n,1)))),t}var fN=function(){function i(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return!1};z(this,i),this.parent=n,this.changedOptions=[],this.container=e,this.allowCreation=!1,this.hideOption=a,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},je(this.options,this.defaultOptions),this.configureOptions=t,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new hN(r),this.wrapper=void 0}return j(i,[{key:"setOptions",value:function(e){if(e!==void 0){this.popupHistory={},this._removePopup();var t=!0;if(typeof e=="string")this.options.filter=e;else if(me(e))this.options.filter=e.join();else if(Ee(e)==="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),St(e)!==void 0&&(this.options.filter=St(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(t=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,t=e):typeof e=="function"&&(this.options.filter=e,t=!0);St(this.options)===!1&&(t=!1),this.options.enabled=t}this._clean()}},{key:"setModuleOptions",value:function(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var e=St(this.options),t=0,r=!1;for(var a in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,a)&&(this.allowCreation=!1,r=!1,typeof e=="function"?(r=e(a,[]),r=r||this._handleObject(this.configureOptions[a],[a],!0)):(e===!0||ve(e).call(e,a)!==-1)&&(r=!0),r!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(a),this._handleObject(this.configureOptions[a],[a])),t++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(e){for(var t=this.moduleOptions,r=0;r<e.length;r++)if(t[e[r]]!==void 0)t=t[e[r]];else{t=void 0;break}return t}},{key:"_makeItem",value:function(e){if(this.allowCreation===!0){var t=document.createElement("div");t.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return Se(a).call(a,function(s){t.appendChild(s)}),this.domElements.push(t),this.domElements.length}return 0}},{key:"_makeHeader",value:function(e){var t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerText=e,this._makeItem([],t)}},{key:"_makeLabel",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=document.createElement("div");if(a.className="vis-configuration vis-config-label vis-config-s"+t.length,r===!0){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(Dh("i","b",e))}else a.innerText=e+":";return a}},{key:"_makeDropdown",value:function(e,t,r){var a=document.createElement("select");a.className="vis-configuration vis-config-select";var o=0;t!==void 0&&ve(e).call(e,t)!==-1&&(o=ve(e).call(e,t));for(var s=0;s<e.length;s++){var u=document.createElement("option");u.value=e[s],s===o&&(u.selected="selected"),u.innerText=e[s],a.appendChild(u)}var l=this;a.onchange=function(){l._update(this.value,r)};var h=this._makeLabel(r[r.length-1],r);this._makeItem(r,h,a)}},{key:"_makeRange",value:function(e,t,r){var a=e[0],o=e[1],s=e[2],u=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=o,l.max=s}catch(g){}l.step=u;var h="",f=0;if(t!==void 0){var d=1.2;t<0&&t*d<o?(l.min=Math.ceil(t*d),f=l.min,h="range increased"):t/d<o&&(l.min=Math.ceil(t/d),f=l.min,h="range increased"),t*d>s&&s!==1&&(l.max=Math.ceil(t*d),f=l.max,h="range increased"),l.value=t}else l.value=a;var c=document.createElement("input");c.className="vis-configuration vis-config-rangeinput",c.value=l.value;var v=this;l.onchange=function(){c.value=this.value,v._update(Number(this.value),r)},l.oninput=function(){c.value=this.value};var m=this._makeLabel(r[r.length-1],r),w=this._makeItem(r,m,l,c);h!==""&&this.popupHistory[w]!==f&&(this.popupHistory[w]=f,this._setupPopup(h,w))}},{key:"_makeButton",value:function(){var e=this;if(this.options.showButton===!0){var t=document.createElement("div");t.className="vis-configuration vis-config-button",t.innerText="generate options",t.onclick=function(){e._printOptions()},t.onmouseover=function(){t.className="vis-configuration vis-config-button hover"},t.onmouseout=function(){t.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(t)}}},{key:"_setupPopup",value:function(e,t){var r=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var a=document.createElement("div");a.id="vis-configuration-popup",a.className="vis-configuration-popup",a.innerText=e,a.onclick=function(){r._removePopup()},this.popupCounter+=1,this.popupDiv={html:a,index:t}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var e=this;if(this.popupDiv.html!==void 0){var t=this.domElements[this.popupDiv.index],r=t.getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=lr(function(){e.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=lr(function(){e._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(e,t,r){var a=document.createElement("input");a.type="checkbox",a.className="vis-configuration vis-config-checkbox",a.checked=e,t!==void 0&&(a.checked=t,t!==e&&(Ee(e)==="object"?t!==e.enabled&&this.changedOptions.push({path:r,value:t}):this.changedOptions.push({path:r,value:t})));var o=this;a.onchange=function(){o._update(this.checked,r)};var s=this._makeLabel(r[r.length-1],r);this._makeItem(r,s,a)}},{key:"_makeTextInput",value:function(e,t,r){var a=document.createElement("input");a.type="text",a.className="vis-configuration vis-config-text",a.value=t,t!==e&&this.changedOptions.push({path:r,value:t});var o=this;a.onchange=function(){o._update(this.value,r)};var s=this._makeLabel(r[r.length-1],r);this._makeItem(r,s,a)}},{key:"_makeColorField",value:function(e,t,r){var a=this,o=e[1],s=document.createElement("div");t=t===void 0?o:t,t!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=t):s.className="vis-configuration vis-config-colorBlock none",t=t===void 0?o:t,s.onclick=function(){a._showColorPicker(t,s,r)};var u=this._makeLabel(r[r.length-1],r);this._makeItem(r,u,s)}},{key:"_showColorPicker",value:function(e,t,r){var a=this;t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(function(o){var s="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";t.style.backgroundColor=s,a._update(s,r)}),this.colorPicker.setCloseCallback(function(){t.onclick=function(){a._showColorPicker(e,t,r)}})}},{key:"_handleObject",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=!1,o=St(this.options),s=!1;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){a=!0;var l=e[u],h=qs(t,u);if(typeof o=="function"&&(a=o(u,t),a===!1&&!me(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,a=this._handleObject(l,h,!0),this.allowCreation=r===!1)),a!==!1){s=!0;var f=this._getValue(h);if(me(l))this._handleArray(l,f,h);else if(typeof l=="string")this._makeTextInput(l,f,h);else if(typeof l=="boolean")this._makeCheckbox(l,f,h);else if(l instanceof Object){if(!this.hideOption(t,u,this.moduleOptions))if(l.enabled!==void 0){var d=qs(h,"enabled"),c=this._getValue(d);if(c===!0){var v=this._makeLabel(u,h,!0);this._makeItem(h,v),s=this._handleObject(l,h)||s}else this._makeCheckbox(l,c,h)}else{var m=this._makeLabel(u,h,!0);this._makeItem(h,m),s=this._handleObject(l,h)||s}}else console.error("dont know how to handle",l,u,h)}}return s}},{key:"_handleArray",value:function(e,t,r){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,t,r),e[1]!==t&&this.changedOptions.push({path:r,value:t})):typeof e[0]=="string"?(this._makeDropdown(e,t,r),e[0]!==t&&this.changedOptions.push({path:r,value:t})):typeof e[0]=="number"&&(this._makeRange(e,t,r),e[0]!==t&&this.changedOptions.push({path:r,value:Number(t)}))}},{key:"_update",value:function(e,t){var r=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",r),this.initialized=!0,this.parent.setOptions(r)}},{key:"_constructOptions",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=r;e=e==="true"?!0:e,e=e==="false"?!1:e;for(var o=0;o<t.length;o++)t[o]!=="global"&&(a[t[o]]===void 0&&(a[t[o]]={}),o!==t.length-1?a=a[t[o]]:a[t[o]]=e);return r}},{key:"_printOptions",value:function(){for(var e=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(Dh("pre","const options = "+Fa(e,null,2)))}},{key:"getOptions",value:function(){for(var e={},t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}}]),i}(),dN=function(){function i(n,e){z(this,i),this.container=n,this.overflowMethod=e||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return j(i,[{key:"setPosition",value:function(e,t){this.x=Xt(e),this.y=Xt(t)}},{key:"setText",value:function(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}},{key:"show",value:function(e){if(e===void 0&&(e=!0),e===!0){var t=this.frame.clientHeight,r=this.frame.clientWidth,a=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,s=0,u=0;if(this.overflowMethod=="flip"){var l=!1,h=!0;this.y-t<this.padding&&(h=!1),this.x+r>o-this.padding&&(l=!0),l?s=this.x-r:s=this.x,h?u=this.y-t:u=this.y}else u=this.y-t,u+t+this.padding>a&&(u=a-t-this.padding),u<this.padding&&(u=this.padding),s=this.x,s+r+this.padding>o&&(s=o-r-this.padding),s<this.padding&&(s=this.padding);this.frame.style.left=s+"px",this.frame.style.top=u+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),i}(),Ya=!1,km,Mh="background: #FFeeee; color: #dd0000",cN=function(){function i(){z(this,i)}return j(i,null,[{key:"validate",value:function(e,t,r){Ya=!1,km=t;var a=t;return r!==void 0&&(a=t[r]),i.parse(e,a,[]),Ya}},{key:"parse",value:function(e,t,r){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.check(a,e,t,r)}},{key:"check",value:function(e,t,r,a){if(r[e]===void 0&&r.__any__===void 0){i.getSuggestion(e,r,a);return}var o=e,s=!0;r[e]===void 0&&r.__any__!==void 0&&(o="__any__",s=i.getType(t[e])==="object");var u=r[o];s&&u.__type__!==void 0&&(u=u.__type__),i.checkFields(e,t,r,o,u,a)}},{key:"checkFields",value:function(e,t,r,a,o,s){var u=function(d){console.error("%c"+d+i.printLocation(s,e),Mh)},l=i.getType(t[e]),h=o[l];h!==void 0?i.getType(h)==="array"&&ve(h).call(h,t[e])===-1?(u('Invalid option detected in "'+e+'". Allowed values are:'+i.print(h)+' not "'+t[e]+'". '),Ya=!0):l==="object"&&a!=="__any__"&&(s=qs(s,e),i.parse(t[e],r[a],s)):o.any===void 0&&(u('Invalid type received for "'+e+'". Expected: '+i.print(De(o))+". Received ["+l+'] "'+t[e]+'"'),Ya=!0)}},{key:"getType",value:function(e){var t=Ee(e);return t==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":me(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":t==="number"?"number":t==="boolean"?"boolean":t==="string"?"string":t===void 0?"undefined":t}},{key:"getSuggestion",value:function(e,t,r){var a=i.findInOptions(e,t,r,!1),o=i.findInOptions(e,km,[],!0),s=8,u=4,l;a.indexMatch!==void 0?l=" in "+i.printLocation(a.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+a.indexMatch+`"?

`:o.distance<=u&&a.distance>o.distance?l=" in "+i.printLocation(a.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+i.printLocation(o.path,o.closestMatch,""):a.distance<=s?l='. Did you mean "'+a.closestMatch+'"?'+i.printLocation(a.path,e):l=". Did you mean one of these: "+i.print(De(t))+i.printLocation(r,e),console.error('%cUnknown option detected: "'+e+'"'+l,Mh),Ya=!0}},{key:"findInOptions",value:function(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,s="",u=[],l=e.toLowerCase(),h=void 0;for(var f in t){var d=void 0;if(t[f].__type__!==void 0&&a===!0){var c=i.findInOptions(e,t[f],qs(r,f));o>c.distance&&(s=c.closestMatch,u=c.path,o=c.distance,h=c.indexMatch)}else{var v;ve(v=f.toLowerCase()).call(v,l)!==-1&&(h=f),d=i.levenshteinDistance(e,f),o>d&&(s=f,u=tN(r),o=d)}}return{closestMatch:s,path:u,distance:o,indexMatch:h}}},{key:"printLocation",value:function(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,a=`

`+r+`options = {
`,o=0;o<e.length;o++){for(var s=0;s<o+1;s++)a+="  ";a+=e[o]+`: {
`}for(var u=0;u<e.length+1;u++)a+="  ";a+=t+`
`;for(var l=0;l<e.length+1;l++){for(var h=0;h<e.length-l;h++)a+="  ";a+=`}
`}return a+`

`}},{key:"print",value:function(e){return Fa(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;var r=[],a;for(a=0;a<=t.length;a++)r[a]=[a];var o;for(o=0;o<=e.length;o++)r[0][o]=o;for(a=1;a<=t.length;a++)for(o=1;o<=e.length;o++)t.charAt(a-1)==e.charAt(o-1)?r[a][o]=r[a-1][o-1]:r[a][o]=Math.min(r[a-1][o-1]+1,Math.min(r[a][o-1]+1,r[a-1][o]+1));return r[t.length][e.length]}}]),i}(),vN=dr,pN=fN,An=Ch,gN=dN,Tm=Mh,yN=cN;function bN(i){return ri=i,mN()}var Om={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},Fh=Ai(Om);Fh.color="color.color";Fh.style="dashes";var ft={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},Pm={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},ri="",$n=0,se="",Z="",Tt=ft.NULL;function wN(){$n=0,se=ri.charAt(0)}function et(){$n++,se=ri.charAt($n)}function Dn(){return ri.charAt($n+1)}function Im(i){var n=i.charCodeAt(0);return n<47?n===35||n===46:n<59?n>47:n<91?n>64:n<96?n===95:n<123?n>96:!1}function ii(i,n){if(i||(i={}),n)for(var e in n)n.hasOwnProperty(e)&&(i[e]=n[e]);return i}function _N(i,n,e){for(var t=n.split("."),r=i;t.length;){var a=t.shift();t.length?(r[a]||(r[a]={}),r=r[a]):r[a]=e}}function Cm(i,n){for(var e,t,r=null,a=[i],o=i;o.parent;)a.push(o.parent),o=o.parent;if(o.nodes){for(e=0,t=o.nodes.length;e<t;e++)if(n.id===o.nodes[e].id){r=o.nodes[e];break}}for(r||(r={id:n.id},i.node&&(r.attr=ii(r.attr,i.node))),e=a.length-1;e>=0;e--){var s,u=a[e];u.nodes||(u.nodes=[]),ve(s=u.nodes).call(s,r)===-1&&u.nodes.push(r)}n.attr&&(r.attr=ii(r.attr,n.attr))}function EN(i,n){if(i.edges||(i.edges=[]),i.edges.push(n),i.edge){var e=ii({},i.edge);n.attr=ii(e,n.attr)}}function xm(i,n,e,t,r){var a={from:n,to:e,type:t};return i.edge&&(a.attr=ii({},i.edge)),a.attr=ii(a.attr||{},r),r!=null&&r.hasOwnProperty("arrows")&&r.arrows!=null&&(a.arrows={to:{enabled:!0,type:r.arrows.type}},r.arrows=null),a}function Te(){for(Tt=ft.NULL,Z="";se===" "||se==="	"||se===`
`||se==="\r";)et();do{var i=!1;if(se==="#"){for(var n=$n-1;ri.charAt(n)===" "||ri.charAt(n)==="	";)n--;if(ri.charAt(n)===`
`||ri.charAt(n)===""){for(;se!=""&&se!=`
`;)et();i=!0}}if(se==="/"&&Dn()==="/"){for(;se!=""&&se!=`
`;)et();i=!0}if(se==="/"&&Dn()==="*"){for(;se!="";)if(se==="*"&&Dn()==="/"){et(),et();break}else et();i=!0}for(;se===" "||se==="	"||se===`
`||se==="\r";)et()}while(i);if(se===""){Tt=ft.DELIMITER;return}var e=se+Dn();if(Pm[e]){Tt=ft.DELIMITER,Z=e,et(),et();return}if(Pm[se]){Tt=ft.DELIMITER,Z=se,et();return}if(Im(se)||se==="-"){for(Z+=se,et();Im(se);)Z+=se,et();Z==="false"?Z=!1:Z==="true"?Z=!0:isNaN(Number(Z))||(Z=Number(Z)),Tt=ft.IDENTIFIER;return}if(se==='"'){for(et();se!=""&&(se!='"'||se==='"'&&Dn()==='"');)se==='"'?(Z+=se,et()):se==="\\"&&Dn()==="n"?(Z+=`
`,et()):Z+=se,et();if(se!='"')throw dt('End of string " expected');et(),Tt=ft.IDENTIFIER;return}for(Tt=ft.UNKNOWN;se!="";)Z+=se,et();throw new SyntaxError('Syntax error in part "'+Am(Z,30)+'"')}function mN(){var i={};if(wN(),Te(),Z==="strict"&&(i.strict=!0,Te()),(Z==="graph"||Z==="digraph")&&(i.type=Z,Te()),Tt===ft.IDENTIFIER&&(i.id=Z,Te()),Z!="{")throw dt("Angle bracket { expected");if(Te(),$m(i),Z!="}")throw dt("Angle bracket } expected");if(Te(),Z!=="")throw dt("End of file expected");return Te(),delete i.node,delete i.edge,delete i.graph,i}function $m(i){for(;Z!==""&&Z!="}";)SN(i),Z===";"&&Te()}function SN(i){var n=Dm(i);if(n){Mm(i,n);return}var e=kN(i);if(!e){if(Tt!=ft.IDENTIFIER)throw dt("Identifier expected");var t=Z;if(Te(),Z==="="){if(Te(),Tt!=ft.IDENTIFIER)throw dt("Identifier expected");i[t]=Z,Te()}else TN(i,t)}}function Dm(i){var n=null;if(Z==="subgraph"&&(n={},n.type="subgraph",Te(),Tt===ft.IDENTIFIER&&(n.id=Z,Te())),Z==="{"){if(Te(),n||(n={}),n.parent=i,n.node=i.node,n.edge=i.edge,n.graph=i.graph,$m(n),Z!="}")throw dt("Angle bracket } expected");Te(),delete n.node,delete n.edge,delete n.graph,delete n.parent,i.subgraphs||(i.subgraphs=[]),i.subgraphs.push(n)}return n}function kN(i){return Z==="node"?(Te(),i.node=Qa(),"node"):Z==="edge"?(Te(),i.edge=Qa(),"edge"):Z==="graph"?(Te(),i.graph=Qa(),"graph"):null}function TN(i,n){var e={id:n},t=Qa();t&&(e.attr=t),Cm(i,e),Mm(i,n)}function Mm(i,n){for(;Z==="->"||Z==="--";){var e,t=Z;Te();var r=Dm(i);if(r)e=r;else{if(Tt!=ft.IDENTIFIER)throw dt("Identifier or subgraph expected");e=Z,Cm(i,{id:e}),Te()}var a=Qa(),o=xm(i,n,e,t,a);EN(i,o),n=e}}function Qa(){for(var i,n=null,e={dashed:!0,solid:!1,dotted:[1,5]},t={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},r=new Array,a=new Array;Z==="[";){for(Te(),n={};Z!==""&&Z!="]";){if(Tt!=ft.IDENTIFIER)throw dt("Attribute name expected");var o=Z;if(Te(),Z!="=")throw dt("Equal sign = expected");if(Te(),Tt!=ft.IDENTIFIER)throw dt("Attribute value expected");var s=Z;o==="style"&&(s=e[s]);var u;o==="arrowhead"&&(u=t[s],o="arrows",s={to:{enabled:!0,type:u}}),o==="arrowtail"&&(u=t[s],o="arrows",s={from:{enabled:!0,type:u}}),r.push({attr:n,name:o,value:s}),a.push(o),Te(),Z==","&&Te()}if(Z!="]")throw dt("Bracket ] expected");Te()}if(ur(a).call(a,"dir")){var l={};for(l.arrows={},i=0;i<r.length;i++)if(r[i].name==="arrows")if(r[i].value.to!=null)l.arrows.to=i;else if(r[i].value.from!=null)l.arrows.from=i;else throw dt("Invalid value of arrows");else r[i].name==="dir"&&(l.dir=i);var h=r[l.dir].value;if(!ur(a).call(a,"arrows"))if(h==="both")r.push({attr:r[l.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),l.arrows.to=r.length-1,r.push({attr:r[l.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),l.arrows.from=r.length-1;else if(h==="forward")r.push({attr:r[l.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),l.arrows.to=r.length-1;else if(h==="back")r.push({attr:r[l.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),l.arrows.from=r.length-1;else if(h==="none")r.push({attr:r[l.dir].attr,name:"arrows",value:""}),l.arrows.to=r.length-1;else throw dt('Invalid dir type "'+h+'"');var f,d;if(h==="both")l.arrows.to&&l.arrows.from?(d=r[l.arrows.to].value.to.type,f=r[l.arrows.from].value.from.type,r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:f}}},$r(r).call(r,l.arrows.from,1)):l.arrows.to?(d=r[l.arrows.to].value.to.type,f="arrow",r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:f}}}):l.arrows.from&&(d="arrow",f=r[l.arrows.from].value.from.type,r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:f}}});else if(h==="back")l.arrows.to&&l.arrows.from?(d="",f=r[l.arrows.from].value.from.type,r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:f}}}):l.arrows.to?(d="",f="arrow",l.arrows.from=l.arrows.to,r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:f}}}):l.arrows.from&&(d="",f=r[l.arrows.from].value.from.type,r[l.arrows.to]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:f}}}),r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{from:{enabled:!0,type:r[l.arrows.from].value.from.type}}};else if(h==="none"){var c;l.arrows.to?c=l.arrows.to:c=l.arrows.from,r[c]={attr:r[c].attr,name:r[c].name,value:""}}else if(h==="forward")l.arrows.to&&l.arrows.from?(d=r[l.arrows.to].value.to.type,f="",r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:f}}}):l.arrows.to?(d=r[l.arrows.to].value.to.type,f="",r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:f}}}):l.arrows.from&&(d="arrow",f="",l.arrows.to=l.arrows.from,r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:f}}}),r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:r[l.arrows.to].value.to.type}}};else throw dt('Invalid dir type "'+h+'"');$r(r).call(r,l.dir,1)}var v;if(ur(a).call(a,"penwidth")){var m=[];for(v=r.length,i=0;i<v;i++)r[i].name!=="width"&&(r[i].name==="penwidth"&&(r[i].name="width"),m.push(r[i]));r=m}for(v=r.length,i=0;i<v;i++)_N(r[i].attr,r[i].name,r[i].value);return n}function dt(i){return new SyntaxError(i+', got "'+Am(Z,30)+'" (char '+$n+")")}function Am(i,n){return i.length<=n?i:i.substr(0,27)+"..."}function ON(i,n,e){me(i)?Se(i).call(i,function(t){me(n)?Se(n).call(n,function(r){e(t,r)}):e(t,n)}):me(n)?Se(n).call(n,function(t){e(i,t)}):e(i,n)}function Rh(i,n,e){for(var t=n.split("."),r=t.pop(),a=i,o=0;o<t.length;o++){var s=t[o];s in a||(a[s]={}),a=a[s]}return a[r]=e,i}function Fm(i,n){var e={};for(var t in i)if(i.hasOwnProperty(t)){var r=n[t];me(r)?Se(r).call(r,function(a){Rh(e,a,i[t])}):typeof r=="string"?Rh(e,r,i[t]):Rh(e,t,i[t])}return e}function PN(i){var n=bN(i),e={nodes:[],edges:[],options:{}};if(n.nodes){var t;Se(t=n.nodes).call(t,function(o){var s={id:o.id,label:String(o.label||o.id)};ii(s,Fm(o.attr,Om)),s.image&&(s.shape="image"),e.nodes.push(s)})}if(n.edges){var r,a=function(s){var u={from:s.from,to:s.to};return ii(u,Fm(s.attr,Fh)),u.arrows==null&&s.type==="->"&&(u.arrows="to"),u};Se(r=n.edges).call(r,function(o){var s,u;if(o.from instanceof Object?s=o.from.nodes:s={id:o.from},o.to instanceof Object?u=o.to.nodes:u={id:o.to},o.from instanceof Object&&o.from.edges){var l;Se(l=o.from.edges).call(l,function(f){var d=a(f);e.edges.push(d)})}if(ON(s,u,function(f,d){var c=xm(e,f.id,d.id,o.type,o.attr),v=a(c);e.edges.push(v)}),o.to instanceof Object&&o.to.edges){var h;Se(h=o.to.edges).call(h,function(f){var d=a(f);e.edges.push(d)})}})}return n.attr&&(e.options=n.attr),e}function IN(i,n){var e,t={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};n!=null&&(n.fixed!=null&&(t.nodes.fixed=n.fixed),n.parseColor!=null&&(t.nodes.parseColor=n.parseColor),n.inheritColor!=null&&(t.edges.inheritColor=n.inheritColor));var r=i.edges,a=En(r).call(r,function(s){var u={from:s.source,id:s.id,to:s.target};return s.attributes!=null&&(u.attributes=s.attributes),s.label!=null&&(u.label=s.label),s.attributes!=null&&s.attributes.title!=null&&(u.title=s.attributes.title),s.type==="Directed"&&(u.arrows="to"),s.color&&t.edges.inheritColor===!1&&(u.color=s.color),u}),o=En(e=i.nodes).call(e,function(s){var u={id:s.id,fixed:t.nodes.fixed&&s.x!=null&&s.y!=null};return s.attributes!=null&&(u.attributes=s.attributes),s.label!=null&&(u.label=s.label),s.size!=null&&(u.size=s.size),s.attributes!=null&&s.attributes.title!=null&&(u.title=s.attributes.title),s.title!=null&&(u.title=s.title),s.x!=null&&(u.x=s.x),s.y!=null&&(u.y=s.y),s.color!=null&&(t.nodes.parseColor===!0?u.color=s.color:u.color={background:s.color,border:s.color,highlight:{background:s.color,border:s.color},hover:{background:s.color,border:s.color}}),u});return{nodes:o,edges:a}}var CN={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},xN={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufÃ¼gen",addNode:"Knoten hinzufÃ¼gen",back:"ZurÃ¼ck",close:"SchlieÃen",createEdgeError:"Es ist nicht mÃ¶glich, Kanten mit Clustern zu verbinden.",del:"LÃ¶sche Auswahl",deleteClusterError:"Cluster kÃ¶nnen nicht gelÃ¶scht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster kÃ¶nnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},AN={addDescription:"Haga clic en un lugar vacÃ­o para colocar un nuevo nodo.",addEdge:"AÃ±adir arista",addNode:"AÃ±adir nodo",back:"AtrÃ¡s",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selecciÃ³n",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},$N={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},DN={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},MN={addDescription:"Clique em um espaÃ§o em branco para adicionar um novo nÃ³",addEdge:"Adicionar aresta",addNode:"Adicionar nÃ³",back:"Voltar",close:"Fechar",createEdgeError:"NÃ£o foi possÃ­vel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters nÃ£o puderam ser removidos.",edgeDescription:"Clique em um nÃ³ e arraste a aresta atÃ© outro nÃ³ para conectÃ¡-los",edit:"Editar",editClusterError:"Clusters nÃ£o puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nÃ³ para conectÃ¡-los",editNode:"Editar nÃ³"},FN={addDescription:"ÐÐ»Ð¸ÐºÐ½Ð¸ÑÐµ Ð² ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ð¾Ðµ Ð¼ÐµÑÑÐ¾, ÑÑÐ¾Ð±Ñ Ð´Ð¾Ð±Ð°Ð²Ð¸ÑÑ Ð½Ð¾Ð²ÑÐ¹ ÑÐ·ÐµÐ».",addEdge:"ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ ÑÐµÐ±ÑÐ¾",addNode:"ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ ÑÐ·ÐµÐ»",back:"ÐÐ°Ð·Ð°Ð´",close:"ÐÐ°ÐºÑÑÐ²Ð°ÑÑ",createEdgeError:"ÐÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑ ÑÐµÐ±ÑÐ° Ð² ÐºÐ»Ð°ÑÑÐµÑ.",del:"Ð£Ð´Ð°Ð»Ð¸ÑÑ Ð²ÑÐ±ÑÐ°Ð½Ð½Ð¾Ðµ",deleteClusterError:"ÐÐ»Ð°ÑÑÐµÑÑ Ð½Ðµ Ð¼Ð¾Ð³ÑÑ Ð±ÑÑÑ ÑÐ´Ð°Ð»ÐµÐ½Ñ",edgeDescription:"ÐÐ»Ð¸ÐºÐ½Ð¸ÑÐµ Ð½Ð° ÑÐ·ÐµÐ» Ð¸ Ð¿ÑÐ¾ÑÑÐ½Ð¸ÑÐµ ÑÐµÐ±ÑÐ¾ Ðº Ð´ÑÑÐ³Ð¾Ð¼Ñ ÑÐ·Ð»Ñ, ÑÑÐ¾Ð±Ñ ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑ Ð¸Ñ.",edit:"Ð ÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ",editClusterError:"ÐÐ»Ð°ÑÑÐµÑÑ Ð½ÐµÐ´Ð¾ÑÑÑÐ¿Ð½Ñ Ð´Ð»Ñ ÑÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°Ð½Ð¸Ñ.",editEdge:"Ð ÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ ÑÐµÐ±ÑÐ¾",editEdgeDescription:"ÐÐ»Ð¸ÐºÐ½Ð¸ÑÐµ Ð½Ð° ÐºÐ¾Ð½ÑÑÐ¾Ð»ÑÐ½ÑÐµ ÑÐ¾ÑÐºÐ¸ Ð¸ Ð¿ÐµÑÐµÑÐ°ÑÐ¸ÑÐµ Ð¸Ñ Ð² ÑÐ·ÐµÐ», ÑÑÐ¾Ð±Ñ Ð¿Ð¾Ð´ÐºÐ»ÑÑÐ¸ÑÑÑÑ Ðº Ð½ÐµÐ¼Ñ.",editNode:"Ð ÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ ÑÐ·ÐµÐ»"},RN={addDescription:"åå»ç©ºç½å¤æ¾ç½®æ°èç¹ã",addEdge:"æ·»å è¿æ¥çº¿",addNode:"æ·»å èç¹",back:"è¿å",close:"éé",createEdgeError:"æ æ³å°è¿æ¥çº¿è¿æ¥å°ç¾¤éã",del:"å é¤éå®",deleteClusterError:"æ æ³å é¤ç¾¤éã",edgeDescription:"åå»æä¸ªèç¹å¹¶å°è¯¥è¿æ¥çº¿æå¨å°å¦ä¸ä¸ªèç¹ä»¥è¿æ¥å®ä»¬ã",edit:"ç¼è¾",editClusterError:"æ æ³ç¼è¾ç¾¤éã",editEdge:"ç¼è¾è¿æ¥çº¿",editEdgeDescription:"åå»æ§å¶èç¹å¹¶å°å®ä»¬æå°èç¹ä¸è¿æ¥ã",editNode:"ç¼è¾èç¹"},NN={addDescription:"KÐ»ÑÐºÐ½ÑÑÑ Ð½Ð° Ð²ÑÐ»ÑÐ½Ðµ Ð¼ÑÑÑÐµ, ÑÐ¾Ð± Ð´Ð¾Ð´Ð°ÑÐ¸ Ð½Ð¾Ð²Ð¸Ð¹ Ð²ÑÐ·Ð¾Ð».",addEdge:"ÐÐ¾Ð´Ð°ÑÐ¸ ÐºÑÐ°Ð¹",addNode:"ÐÐ¾Ð´Ð°ÑÐ¸ Ð²ÑÐ·Ð¾Ð»",back:"ÐÐ°Ð·Ð°Ð´",close:"ÐÐ°ÐºÑÐ¸ÑÐ¸",createEdgeError:"ÐÐµ Ð¼Ð¾Ð¶Ð»Ð¸Ð²Ð¾ Ð¾Ð±'ÑÐ´Ð½Ð°ÑÐ¸ ÐºÑÐ°Ñ Ð² Ð³ÑÑÐ¿Ñ.",del:"ÐÐ¸Ð´Ð°Ð»Ð¸ÑÐ¸ Ð¾Ð±ÑÐ°Ð½Ðµ",deleteClusterError:"ÐÑÑÐ¿Ð¸ Ð½Ðµ Ð¼Ð¾Ð¶ÑÑÑ Ð±ÑÑÐ¸ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ñ.",edgeDescription:"ÐÐ»ÑÐºÐ½ÑÑÑ Ð½Ð° Ð²ÑÐ·Ð¾Ð» Ñ Ð¿ÐµÑÐµÑÑÐ³Ð½ÑÑÑ ÐºÑÐ°Ð¹ Ð´Ð¾ ÑÐ½ÑÐ¾Ð³Ð¾ Ð²ÑÐ·Ð»Ð°, ÑÐ¾Ð± ÑÑ Ð·'ÑÐ´Ð½Ð°ÑÐ¸.",edit:"Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸",editClusterError:"ÐÑÑÐ¿Ð¸ Ð½ÐµÐ´Ð¾ÑÑÑÐ¿Ð½Ñ Ð´Ð»Ñ ÑÐµÐ´Ð°Ð³ÑÐ²Ð°Ð½Ð½Ñ.",editEdge:"Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸ ÐºÑÐ°Ð¹",editEdgeDescription:"ÐÐ»ÑÐºÐ½ÑÑÑ Ð½Ð° ÐºÐ¾Ð½ÑÑÐ¾Ð»ÑÐ½Ñ ÑÐ¾ÑÐºÐ¸ Ñ Ð¿ÐµÑÐµÑÑÐ³Ð½ÑÑÑ ÑÑ Ñ Ð²ÑÐ·Ð¾Ð», ÑÐ¾Ð± Ð¿ÑÐ´ÐºÐ»ÑÑÐ¸ÑÐ¸ÑÑ Ð´Ð¾ Ð½ÑÐ¾Ð³Ð¾.",editNode:"Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸ Ð²ÑÐ·Ð¾Ð»"},BN={addDescription:"Cliquez dans un endroit vide pour placer un nÅud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nÅud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crÃ©er un lien vers un cluster.",del:"Effacer la sÃ©lection",deleteClusterError:"Les clusters ne peuvent pas Ãªtre effacÃ©s.",edgeDescription:"Cliquez sur un nÅud et glissez le lien vers un autre nÅud pour les connecter.",edit:"Ãditer",editClusterError:"Les clusters ne peuvent pas Ãªtre Ã©ditÃ©s.",editEdge:"Ãditer le lien",editEdgeDescription:"Cliquez sur les points de contrÃ´le et glissez-les pour connecter un nÅud.",editNode:"Ãditer le nÅud"},LN={addDescription:"KluknutÃ­m do prÃ¡zdnÃ©ho prostoru mÅ¯Å¾ete pÅidat novÃ½ vrchol.",addEdge:"PÅidat hranu",addNode:"PÅidat vrchol",back:"ZpÄt",close:"ZavÅÃ­t",createEdgeError:"Nelze pÅipojit hranu ke shluku.",del:"Smazat vÃ½bÄr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"PÅetaÅ¾enÃ­m z jednoho vrcholu do druhÃ©ho mÅ¯Å¾ete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"PÅetaÅ¾enÃ­m kontrolnÃ­ho vrcholu hrany ji mÅ¯Å¾ete pÅipojit k jinÃ©mu vrcholu.",editNode:"Upravit vrchol"},zN=Object.freeze({__proto__:null,en:CN,de:xN,es:AN,it:$N,nl:DN,pt:MN,ru:FN,cn:RN,uk:NN,fr:BN,cs:LN});function jN(i,n){try{var e=n.split(/[-_ /]/,2),t=$e(e,2),r=t[0],a=t[1],o=r!=null?r.toLowerCase():null,s=a!=null?a.toUpperCase():null;if(o&&s){var u=o+"-"+s;if(Object.prototype.hasOwnProperty.call(i,u))return u;var l;console.warn(vh(l="Unknown variant ".concat(s," of language ")).call(l,o,"."))}if(o){var h=o;if(Object.prototype.hasOwnProperty.call(i,h))return h;console.warn("Unknown language ".concat(o))}return console.warn("Unknown locale ".concat(n,", falling back to English.")),"en"}catch(f){return console.error(f),console.warn("Unexpected error while normalizing locale ".concat(n,", falling back to English.")),"en"}}var HN=function(){function i(){z(this,i),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return j(i,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var e=this.image.width,t=this.image.height;this.width=e,this.height=t;var r=Math.floor(t/2),a=Math.floor(t/4),o=Math.floor(t/8),s=Math.floor(t/16),u=Math.floor(e/2),l=Math.floor(e/4),h=Math.floor(e/8),f=Math.floor(e/16);this.canvas.width=3*l,this.canvas.height=r,this.coordinates=[[0,0,u,r],[u,0,l,a],[u,a,h,o],[5*h,a,f,s]],this._fillMipMap()}}},{key:"initialized",value:function(){return this.coordinates!==void 0}},{key:"_fillMipMap",value:function(){var e=this.canvas.getContext("2d"),t=this.coordinates[0];e.drawImage(this.image,t[0],t[1],t[2],t[3]);for(var r=1;r<this.NUM_ITERATIONS;r++){var a=this.coordinates[r-1],o=this.coordinates[r];e.drawImage(this.canvas,a[0],a[1],a[2],a[3],o[0],o[1],o[2],o[3])}}},{key:"drawImageAtPosition",value:function(e,t,r,a,o,s){if(!!this.initialized())if(t>2){t*=.5;for(var u=0;t>2&&u<this.NUM_ITERATIONS;)t*=.5,u+=1;u>=this.NUM_ITERATIONS&&(u=this.NUM_ITERATIONS-1);var l=this.coordinates[u];e.drawImage(this.canvas,l[0],l[1],l[2],l[3],r,a,o,s)}else e.drawImage(this.image,r,a,o,s)}}]),i}(),WN=function(){function i(n){z(this,i),this.images={},this.imageBroken={},this.callback=n}return j(i,[{key:"_tryloadBrokenUrl",value:function(e,t,r){if(!(e===void 0||r===void 0)){if(t===void 0){console.warn("No broken url image defined");return}r.image.onerror=function(){console.error("Could not load brokenImage:",t)},r.image.src=t}}},{key:"_redrawWithImage",value:function(e){this.callback&&this.callback(e)}},{key:"load",value:function(e,t){var r=this,a=this.images[e];if(a)return a;var o=new HN;return this.images[e]=o,o.image.onload=function(){r._fixImageCoordinates(o.image),o.init(),r._redrawWithImage(o)},o.image.onerror=function(){console.error("Could not load image:",e),r._tryloadBrokenUrl(e,t,o)},o.image.src=e,o}},{key:"_fixImageCoordinates",value:function(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}]),i}(),Za={exports:{}},UN=Ae,VN=!UN(function(){return Object.isExtensible(Object.preventExtensions({}))}),GN=re,qN=Ea,KN=Qe,Nh=Ct,XN=Rt.f,Rm=Ca,YN=Es,QN=os,ZN=VN,Nm=!1,Rr=QN("meta"),JN=0,Bh=Object.isExtensible||function(){return!0},Lh=function(i){XN(i,Rr,{value:{objectID:"O"+JN++,weakData:{}}})},e2=function(i,n){if(!KN(i))return typeof i=="symbol"?i:(typeof i=="string"?"S":"P")+i;if(!Nh(i,Rr)){if(!Bh(i))return"F";if(!n)return"E";Lh(i)}return i[Rr].objectID},t2=function(i,n){if(!Nh(i,Rr)){if(!Bh(i))return!0;if(!n)return!1;Lh(i)}return i[Rr].weakData},r2=function(i){return ZN&&Nm&&Bh(i)&&!Nh(i,Rr)&&Lh(i),i},n2=function(){i2.enable=function(){},Nm=!0;var i=Rm.f,n=[].splice,e={};e[Rr]=1,i(e).length&&(Rm.f=function(t){for(var r=i(t),a=0,o=r.length;a<o;a++)if(r[a]===Rr){n.call(r,a,1);break}return r},GN({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:YN.f}))},i2=Za.exports={enable:n2,fastKey:e2,getWeakData:t2,onFreeze:r2};qN[Rr]=!0;var a2=Nt,o2=Yp,s2=ar,u2=_a,l2=Xl,Bm=Xp,Ja=function(i,n){this.stopped=i,this.result=n},zh=function(i,n,e){var t=e&&e.that,r=!!(e&&e.AS_ENTRIES),a=!!(e&&e.IS_ITERATOR),o=!!(e&&e.INTERRUPTED),s=u2(n,t,1+r+o),u,l,h,f,d,c,v,m=function(g){return u&&Bm(u),new Ja(!0,g)},w=function(g){return r?(a2(g),o?s(g[0],g[1],m):s(g[0],g[1])):o?s(g,m):s(g)};if(a)u=i;else{if(l=l2(i),typeof l!="function")throw TypeError("Target is not iterable");if(o2(l)){for(h=0,f=s2(i.length);f>h;h++)if(d=w(i[h]),d&&d instanceof Ja)return d;return new Ja(!1)}u=l.call(i)}for(c=u.next;!(v=c.call(u)).done;){try{d=w(v.value)}catch(g){throw Bm(u),g}if(typeof d=="object"&&d&&d instanceof Ja)return d}return new Ja(!1)},jh=function(i,n,e){if(!(i instanceof n))throw TypeError("Incorrect "+(e?e+" ":"")+"invocation");return i},h2=re,f2=qe,d2=Za.exports,c2=Ae,v2=Ir,p2=zh,g2=jh,y2=Qe,m2=Pa,b2=Rt.f,w2=Gr.forEach,_2=at,Lm=Pi,E2=Lm.set,S2=Lm.getterFor,Hh=function(i,n,e){var t=i.indexOf("Map")!==-1,r=i.indexOf("Weak")!==-1,a=t?"set":"add",o=f2[i],s=o&&o.prototype,u={},l;if(!_2||typeof o!="function"||!(r||s.forEach&&!c2(function(){new o().entries().next()})))l=e.getConstructor(n,i,t,a),d2.enable();else{l=n(function(f,d){E2(g2(f,l,i),{type:i,collection:new o}),d!=null&&p2(d,f[a],{that:f,AS_ENTRIES:t})});var h=S2(i);w2(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(f){var d=f=="add"||f=="set";f in s&&!(r&&f=="clear")&&v2(l.prototype,f,function(c,v){var m=h(this).collection;if(!d&&r&&!y2(c))return f=="get"?void 0:!1;var w=m[f](c===0?0:c,v);return d?this:w})}),r||b2(l.prototype,"size",{configurable:!0,get:function(){return h(this).collection.size}})}return m2(l,i,!1,!0),u[i]=l,h2({global:!0,forced:!0},u),r||e.setStrong(l,i,t),l},k2=Gl,Wh=function(i,n,e){for(var t in n)e&&e.unsafe&&i[t]?i[t]=n[t]:k2(i,t,n[t],e);return i},T2=jr,O2=Rt,P2=Ke,I2=at,zm=P2("species"),C2=function(i){var n=T2(i),e=O2.f;I2&&n&&!n[zm]&&e(n,zm,{configurable:!0,get:function(){return this}})},x2=Rt.f,A2=Ta,jm=Wh,$2=_a,D2=jh,M2=zh,F2=Kl,R2=C2,eo=at,Hm=Za.exports.fastKey,Wm=Pi,Um=Wm.set,Uh=Wm.getterFor,Vm={getConstructor:function(i,n,e,t){var r=i(function(u,l){D2(u,r,n),Um(u,{type:n,index:A2(null),first:void 0,last:void 0,size:0}),eo||(u.size=0),l!=null&&M2(l,u[t],{that:u,AS_ENTRIES:e})}),a=Uh(n),o=function(u,l,h){var f=a(u),d=s(u,l),c,v;return d?d.value=h:(f.last=d={index:v=Hm(l,!0),key:l,value:h,previous:c=f.last,next:void 0,removed:!1},f.first||(f.first=d),c&&(c.next=d),eo?f.size++:u.size++,v!=="F"&&(f.index[v]=d)),u},s=function(u,l){var h=a(u),f=Hm(l),d;if(f!=="F")return h.index[f];for(d=h.first;d;d=d.next)if(d.key==l)return d};return jm(r.prototype,{clear:function(){for(var l=this,h=a(l),f=h.index,d=h.first;d;)d.removed=!0,d.previous&&(d.previous=d.previous.next=void 0),delete f[d.index],d=d.next;h.first=h.last=void 0,eo?h.size=0:l.size=0},delete:function(u){var l=this,h=a(l),f=s(l,u);if(f){var d=f.next,c=f.previous;delete h.index[f.index],f.removed=!0,c&&(c.next=d),d&&(d.previous=c),h.first==f&&(h.first=d),h.last==f&&(h.last=c),eo?h.size--:l.size--}return!!f},forEach:function(l){for(var h=a(this),f=$2(l,arguments.length>1?arguments[1]:void 0,3),d;d=d?d.next:h.first;)for(f(d.value,d.key,this);d&&d.removed;)d=d.previous},has:function(l){return!!s(this,l)}}),jm(r.prototype,e?{get:function(l){var h=s(this,l);return h&&h.value},set:function(l,h){return o(this,l===0?0:l,h)}}:{add:function(l){return o(this,l=l===0?0:l,l)}}),eo&&x2(r.prototype,"size",{get:function(){return a(this).size}}),r},setStrong:function(i,n,e){var t=n+" Iterator",r=Uh(n),a=Uh(t);F2(i,n,function(o,s){Um(this,{type:t,target:o,state:r(o),kind:s,last:void 0})},function(){for(var o=a(this),s=o.kind,u=o.last;u&&u.removed;)u=u.previous;return!o.target||!(o.last=u=u?u.next:o.state.first)?(o.target=void 0,{value:void 0,done:!0}):s=="keys"?{value:u.key,done:!1}:s=="values"?{value:u.value,done:!1}:{value:[u.key,u.value],done:!1}},e?"entries":"values",!e,!0),R2(n)}},N2=Hh,B2=Vm;N2("Map",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},B2);var L2=ce,z2=L2.Map,j2=z2,H2=j2,Gm=H2,W2=function(){function i(){z(this,i),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},je(this.options,this.defaultOptions)}return j(i,[{key:"setOptions",value:function(e){var t=["useDefaultGroups"];if(e!==void 0){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&ve(t).call(t,r)===-1){var a=e[r];this.add(r,a)}}}},{key:"clear",value:function(){this._groups=new Gm,this._groupNames=[]}},{key:"get",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this._groups.get(e);if(r===void 0&&t)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){var a=this._groupIndex%this._groupNames.length;++this._groupIndex,r={},r.color=this._groups.get(this._groupNames[a]),this._groups.set(e,r)}else{var o=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,r={},r.color=this._defaultGroups[o],this._groups.set(e,r)}return r}},{key:"add",value:function(e,t){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,t),t}}]),i}(),U2=re;U2({target:"Number",stat:!0},{isNaN:function(n){return n!=n}});var V2=ce,G2=V2.Number.isNaN,q2=G2,K2=q2,Vh=K2,X2=qe,Y2=X2.isFinite,Q2=Number.isFinite||function(n){return typeof n=="number"&&Y2(n)},Z2=re,J2=Q2;Z2({target:"Number",stat:!0},{isFinite:J2});var eB=ce,tB=eB.Number.isFinite,rB=tB,iB=rB,zi=iB,nB=re,aB=Gr.some,oB=Sn,sB=oB("some");nB({target:"Array",proto:!0,forced:!sB},{some:function(n){return aB(this,n,arguments.length>1?arguments[1]:void 0)}});var uB=Ze,lB=uB("Array").some,hB=lB,qm=Array.prototype,fB=function(i){var n=i.some;return i===qm||i instanceof Array&&n===qm.some?hB:n},dB=fB,cB=dB,vB=cB,pB=qe,gB=Hr,yB=gh.trim,mB=$s,Gh=pB.parseFloat,bB=1/Gh(mB+"-0")!=-Infinity,wB=bB?function(n){var e=yB(gB(n)),t=Gh(e);return t===0&&e.charAt(0)=="-"?-0:t}:Gh,_B=re,Km=wB;_B({global:!0,forced:parseFloat!=Km},{parseFloat:Km});var EB=ce,SB=EB.parseFloat,kB=SB,TB=kB,Xm=TB,OB=re,PB=Ae,IB=Es.f,CB=PB(function(){return!Object.getOwnPropertyNames(1)});OB({target:"Object",stat:!0,forced:CB},{getOwnPropertyNames:IB});var xB=ce,AB=xB.Object,$B=function(n){return AB.getOwnPropertyNames(n)},DB=$B,MB=DB,FB=MB;function qh(i,n){var e=["node","edge","label"],t=!0,r=ti(n,"chosen");if(typeof r=="boolean")t=r;else if(Ee(r)==="object"){if(ve(e).call(e,i)===-1)throw new Error("choosify: subOption '"+i+"' should be one of '"+e.join("', '")+"'");var a=ti(n,["chosen",i]);(typeof a=="boolean"||typeof a=="function")&&(t=a)}return t}function Kh(i,n,e){if(i.width<=0||i.height<=0)return!1;if(e!==void 0){var t={x:n.x-e.x,y:n.y-e.y};if(e.angle!==0){var r=-e.angle,a={x:Math.cos(r)*t.x-Math.sin(r)*t.y,y:Math.sin(r)*t.x+Math.cos(r)*t.y};n=a}else n=t}var o=i.x+i.width,s=i.y+i.width;return i.left<n.x&&o>n.x&&i.top<n.y&&s>n.y}function Xs(i){return typeof i=="string"&&i!==""}function Ym(i,n,e,t){var r=t.x,a=t.y;if(typeof t.distanceToBorder=="function"){var o=t.distanceToBorder(i,n),s=Math.sin(n)*o,u=Math.cos(n)*o;u===o?(r+=o,a=t.y):s===o?(r=t.x,a-=o):(r+=u,a-=s)}else t.shape.width>t.shape.height?(r=t.x+t.shape.width*.5,a=t.y-e):(r=t.x+e,a=t.y-t.shape.height*.5);return{x:r,y:a}}var RB=Ze,NB=RB("Array").values,BB=NB,LB=BB,zB=LB,jB=Oa,Qm=Array.prototype,HB={DOMTokenList:!0,NodeList:!0},WB=function(i){var n=i.values;return i===Qm||i instanceof Array&&n===Qm.values||HB.hasOwnProperty(jB(i))?zB:n},Zm=WB,UB=function(){function i(n){z(this,i),this.measureText=n,this.current=0,this.width=0,this.height=0,this.lines=[]}return j(i,[{key:"_add",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});var a=t;(t===void 0||t==="")&&(a=" ");var o=this.measureText(a,r),s=je({},Zm(o));s.text=t,s.width=o.width,s.mod=r,(t===void 0||t==="")&&(s.width=0),this.lines[e].blocks.push(s),this.lines[e].width+=s.width}},{key:"curWidth",value:function(){var e=this.lines[this.current];return e===void 0?0:e.width}},{key:"append",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,t)}},{key:"newLine",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,t),this.current++}},{key:"determineLineHeights",value:function(){for(var e=0;e<this.lines.length;e++){var t=this.lines[e],r=0;if(t.blocks!==void 0)for(var a=0;a<t.blocks.length;a++){var o=t.blocks[a];r<o.height&&(r=o.height)}t.height=r}}},{key:"determineLabelSize",value:function(){for(var e=0,t=0,r=0;r<this.lines.length;r++){var a=this.lines[r];a.width>e&&(e=a.width),t+=a.height}this.width=e,this.height=t}},{key:"removeEmptyBlocks",value:function(){for(var e=[],t=0;t<this.lines.length;t++){var r=this.lines[t];if(r.blocks.length!==0&&!(t===this.lines.length-1&&r.width===0)){var a={};je(a,r),a.blocks=[];for(var o=void 0,s=[],u=0;u<r.blocks.length;u++){var l=r.blocks[u];l.width!==0?s.push(l):o===void 0&&(o=l)}s.length===0&&o!==void 0&&s.push(o),a.blocks=s,e.push(a)}}return e}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}]),i}(),VB={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},Jm=function(){function i(n){z(this,i),this.text=n,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return j(i,[{key:"mod",value:function(){return this.modStack.length===0?"normal":this.modStack[0]}},{key:"modName",value:function(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}},{key:"parseWS",value:function(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}},{key:"setTag",value:function(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}},{key:"unsetTag",value:function(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(e,t){return!this.mono&&!this[e]&&this.match(t)?(this.setTag(e),!0):!1}},{key:"match",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this.prepareRegExp(e),a=$e(r,2),o=a[0],s=a[1],u=o.test(this.text.substr(this.position,s));return u&&t&&(this.position+=s-1),u}},{key:"parseEndTag",value:function(e,t,r){var a=this.mod()===e;return e==="mono"?a=a&&this.mono:a=a&&!this.mono,a&&this.match(t)?(r!==void 0?(this.position===this.text.length-1||this.match(r,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}},{key:"replace",value:function(e,t){return this.match(e)?(this.add(t),this.position+=length-1,!0):!1}},{key:"prepareRegExp",value:function(e){var t,r;if(e instanceof RegExp)r=e,t=1;else{var a=VB[e];a!==void 0?r=a:r=new RegExp(e),t=e.length}return[r,t]}}]),i}(),GB=function(){function i(n,e,t,r){var a=this;z(this,i),this.ctx=n,this.parent=e,this.selected=t,this.hover=r;var o=function(u,l){if(u===void 0)return 0;var h=a.parent.getFormattingValues(n,t,r,l),f=0;if(u!==""){var d=a.ctx.measureText(u);f=d.width}return{width:f,values:h}};this.lines=new UB(o)}return j(i,[{key:"process",value:function(e){if(!Xs(e))return this.lines.finalize();var t=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);var r=String(e).split(`
`),a=r.length;if(t.multi)for(var o=0;o<a;o++){var s=this.splitBlocks(r[o],t.multi);if(s!==void 0){if(s.length===0){this.lines.newLine("");continue}if(t.maxWdt>0)for(var u=0;u<s.length;u++){var l=s[u].mod,h=s[u].text;this.splitStringIntoLines(h,l,!0)}else for(var f=0;f<s.length;f++){var d=s[f].mod,c=s[f].text;this.lines.append(c,d)}this.lines.newLine()}}else if(t.maxWdt>0)for(var v=0;v<a;v++)this.splitStringIntoLines(r[v]);else for(var m=0;m<a;m++)this.lines.newLine(r[m]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(e){var t="none";return e==="markdown"||e==="md"?t="markdown":(e===!0||e==="html")&&(t="html"),t}},{key:"splitHtmlBlocks",value:function(e){for(var t=new Jm(e),r=function(u){if(/&/.test(u)){var l=t.replace(t.text,"&lt;","<")||t.replace(t.text,"&amp;","&");return l||t.add("&"),!0}return!1};t.position<t.text.length;){var a=t.text.charAt(t.position),o=t.parseWS(a)||/</.test(a)&&(t.parseStartTag("bold","<b>")||t.parseStartTag("ital","<i>")||t.parseStartTag("mono","<code>")||t.parseEndTag("bold","</b>")||t.parseEndTag("ital","</i>")||t.parseEndTag("mono","</code>"))||r(a);o||t.add(a),t.position++}return t.emitBlock(),t.blocks}},{key:"splitMarkdownBlocks",value:function(e){for(var t=this,r=new Jm(e),a=!0,o=function(h){return/\\/.test(h)?(r.position<t.text.length+1&&(r.position++,h=t.text.charAt(r.position),/ \t/.test(h)?r.spacing=!0:(r.add(h),a=!1)),!0):!1};r.position<r.text.length;){var s=r.text.charAt(r.position),u=r.parseWS(s)||o(s)||(a||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono");u||(r.add(s),a=!1),r.position++}return r.emitBlock(),r.blocks}},{key:"splitBlocks",value:function(e,t){var r=this.decodeMarkupSystem(t);if(r==="none")return[{text:e,mod:"normal"}];if(r==="markdown")return this.splitMarkdownBlocks(e);if(r==="html")return this.splitHtmlBlocks(e)}},{key:"overMaxWidth",value:function(e){var t=this.ctx.measureText(e).width;return this.lines.curWidth()+t>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(e){for(var t="",r=0;r<e.length;){var a=t===""?"":" ",o=t+a+e[r];if(this.overMaxWidth(o))break;t=o,r++}return r}},{key:"getLongestFitWord",value:function(e){for(var t=0;t<e.length&&!this.overMaxWidth(Je(e).call(e,0,t));)t++;return t}},{key:"splitStringIntoLines",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,t),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");for(var a=e.split("\r");a.length>0;){var o=this.getLongestFit(a);if(o===0){var s=a[0],u=this.getLongestFitWord(s);this.lines.newLine(Je(s).call(s,0,u),t),a[0]=Je(s).call(s,u)}else{var l=o;a[o-1]===" "?o--:a[l]===" "&&l++;var h=Je(a).call(a,0,o).join("");o==a.length&&r?this.lines.append(h,t):this.lines.newLine(h,t),a=Je(a).call(a,l)}}}}]),i}(),to=["bold","ital","boldital","mono"],eb=function(){function i(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z(this,i),this.body=n,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(e),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=t}return j(i,[{key:"setOptions",value:function(e){if(this.elementOptions=e,this.initFontOptions(e.font),Xs(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(Ee(e.font)==="object"){var t=e.font.size;t!==void 0&&(this.baseSize=t)}}}},{key:"initFontOptions",value:function(e){var t=this;if(ue(to,function(r){t.fontOptions[r]={}}),i.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}ue(e,function(r,a){r!=null&&Ee(r)!=="object"&&(t.fontOptions[a]=r)})}},{key:"constrain",value:function(e){var t={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},r=ti(e,"widthConstraint");if(typeof r=="number")t.maxWdt=Number(r),t.minWdt=Number(r);else if(Ee(r)==="object"){var a=ti(e,["widthConstraint","maximum"]);typeof a=="number"&&(t.maxWdt=Number(a));var o=ti(e,["widthConstraint","minimum"]);typeof o=="number"&&(t.minWdt=Number(o))}var s=ti(e,"heightConstraint");if(typeof s=="number")t.minHgt=Number(s);else if(Ee(s)==="object"){var u=ti(e,["heightConstraint","minimum"]);typeof u=="number"&&(t.minHgt=Number(u));var l=ti(e,["heightConstraint","valign"]);typeof l=="string"&&(l==="top"||l==="bottom")&&(t.valign=l)}return t}},{key:"update",value:function(e,t){this.setOptions(e,!0),this.propagateFonts(t),ke(this.fontOptions,this.constrain(t)),this.fontOptions.chooser=qh("label",t)}},{key:"adjustSizes",value:function(e){var t=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=t,this.fontOptions.minWdt-=t);var r=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=r)}},{key:"addFontOptionsToPile",value:function(e,t){for(var r=0;r<t.length;++r)this.addFontToPile(e,t[r])}},{key:"addFontToPile",value:function(e,t){if(t!==void 0&&!(t.font===void 0||t.font===null)){var r=t.font;e.push(r)}}},{key:"getBasicOptions",value:function(e){for(var t={},r=0;r<e.length;++r){var a=e[r],o={};i.parseFontString(o,a)&&(a=o),ue(a,function(s,u){s!==void 0&&(Object.prototype.hasOwnProperty.call(t,u)||(ve(to).call(to,u)!==-1?t[u]={}:t[u]=s))})}return t}},{key:"getFontOption",value:function(e,t,r){for(var a,o=0;o<e.length;++o){var s=e[o];if(Object.prototype.hasOwnProperty.call(s,t)){if(a=s[t],a==null)continue;var u={};if(i.parseFontString(u,a)&&(a=u),Object.prototype.hasOwnProperty.call(a,r))return a[r]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,r))return this.fontOptions[r];throw new Error("Did not find value for multi-font for property: '"+r+"'")}},{key:"getFontOptions",value:function(e,t){for(var r={},a=["color","size","face","mod","vadjust"],o=0;o<a.length;++o){var s=a[o];r[s]=this.getFontOption(e,t,s)}return r}},{key:"propagateFonts",value:function(e){var t=this,r=[];this.addFontOptionsToPile(r,e),this.fontOptions=this.getBasicOptions(r);for(var a=function(u){var l=to[u],h=t.fontOptions[l],f=t.getFontOptions(r,l);ue(f,function(d,c){h[c]=d}),h.size=Number(h.size),h.vadjust=Number(h.vadjust)},o=0;o<to.length;++o)a(o)}},{key:"draw",value:function(e,t,r,a,o){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label!==void 0){var u=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&u<this.elementOptions.scaling.label.drawThreshold-1||(u>=this.elementOptions.scaling.label.maxVisible&&(u=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,a,o,t,r,s),this._drawBackground(e),this._drawText(e,t,this.size.yLine,s,u))}}},{key:"_drawBackground",value:function(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;var t=this.getSize();e.fillRect(t.left,t.top,t.width,t.height)}}},{key:"_drawText",value:function(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",o=arguments.length>4?arguments[4]:void 0,s=this._setAlignment(e,t,r,a),u=$e(s,2);t=u[0],r=u[1],e.textAlign="left",t=t-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(r-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(r+=(this.size.height-this.size.labelHeight)/2));for(var l=0;l<this.lineCount;l++){var h=this.lines[l];if(h&&h.blocks){var f=0;this.isEdgeLabel||this.fontOptions.align==="center"?f+=(this.size.width-h.width)/2:this.fontOptions.align==="right"&&(f+=this.size.width-h.width);for(var d=0;d<h.blocks.length;d++){var c=h.blocks[d];e.font=c.font;var v=this._getColor(c.color,o,c.strokeColor),m=$e(v,2),w=m[0],g=m[1];c.strokeWidth>0&&(e.lineWidth=c.strokeWidth,e.strokeStyle=g,e.lineJoin="round"),e.fillStyle=w,c.strokeWidth>0&&e.strokeText(c.text,t+f,r+c.vadjust),e.fillText(c.text,t+f,r+c.vadjust),f+=c.width}r+=h.height}}}},{key:"_setAlignment",value:function(e,t,r,a){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){t=0,r=0;var o=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",r-=2*o):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",r+=2*o):e.textBaseline="middle"}else e.textBaseline=a;return[t,r]}},{key:"_getColor",value:function(e,t,r){var a=e||"#000000",o=r||"#ffffff";if(t<=this.elementOptions.scaling.label.drawThreshold){var s=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-t)));a=zt(a,s),o=zt(o,s)}return[a,o]}},{key:"getTextSize",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,t,r),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var e=2,t=this.size.left,r=this.size.top-.5*e;if(this.isEdgeLabel){var a=-this.size.width*.5;switch(this.fontOptions.align){case"middle":t=a,r=-this.size.height*.5;break;case"top":t=a,r=-(this.size.height+e);break;case"bottom":t=a,r=e;break}}var o={left:t,top:r,width:this.size.width,height:this.size.height};return o}},{key:"calculateLabelSize",value:function(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,t,r),this.size.left=a-this.size.width*.5,this.size.top=o-this.size.height*.5,this.size.yLine=o+(1-this.lineCount)*.5*this.fontOptions.size,s==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(e,t,r,a){var o=function(h,f,d){return f==="normal"?d==="mod"?"":h[d]:h[f][d]!==void 0?h[f][d]:h[d]},s={color:o(this.fontOptions,a,"color"),size:o(this.fontOptions,a,"size"),face:o(this.fontOptions,a,"face"),mod:o(this.fontOptions,a,"mod"),vadjust:o(this.fontOptions,a,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(t||r)&&(a==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?s.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(s,this.elementOptions.id,t,r));var u="";return s.mod!==void 0&&s.mod!==""&&(u+=s.mod+" "),u+=s.size+"px "+s.face,e.font=u.replace(/"/g,""),s.font=e.font,s.height=s.size,s}},{key:"differentState",value:function(e,t){return e!==this.selectedState||t!==this.hoverState}},{key:"_processLabelText",value:function(e,t,r,a){var o=new GB(e,this,t,r);return o.process(a)}},{key:"_processLabel",value:function(e,t,r){if(!(this.labelDirty===!1&&!this.differentState(t,r))){var a=this._processLabelText(e,t,r,this.elementOptions.label);this.fontOptions.minWdt>0&&a.width<this.fontOptions.minWdt&&(a.width=this.fontOptions.minWdt),this.size.labelHeight=a.height,this.fontOptions.minHgt>0&&a.height<this.fontOptions.minHgt&&(a.height=this.fontOptions.minHgt),this.lines=a.lines,this.lineCount=a.lines.length,this.size.width=a.width,this.size.height=a.height,this.selectedState=t,this.hoverState=r,this.labelDirty=!1}}},{key:"visible",value:function(){if(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0)return!1;var e=this.fontOptions.size*this.body.view.scale;return!(e<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(e,t){if(!t||typeof t!="string")return!1;var r=t.split(" ");return e.size=+r[0].replace("px",""),e.face=r[1],e.color=r[2],!0}}]),i}(),qB=re,KB=jr,tb=wa,XB=Nt,rb=Qe,YB=Ta,QB=cp,ib=Ae,Xh=KB("Reflect","construct"),nb=ib(function(){function i(){}return!(Xh(function(){},[],i)instanceof i)}),ab=!ib(function(){Xh(function(){})}),ob=nb||ab;qB({target:"Reflect",stat:!0,forced:ob,sham:ob},{construct:function(n,e){tb(n),XB(e);var t=arguments.length<3?n:tb(arguments[2]);if(ab&&!nb)return Xh(n,e,t);if(n==t){switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(QB.apply(n,r))}var a=t.prototype,o=YB(rb(a)?a:Object.prototype),s=Function.apply.call(n,o,e);return rb(s)?s:o}});var ZB=ce,JB=ZB.Reflect.construct,eL=JB,tL=eL,D=tL,rL=xy,iL=rL,nL=iL,aL=re,oL=SI;aL({target:"Object",stat:!0},{setPrototypeOf:oL});var sL=ce,uL=sL.Object.setPrototypeOf,lL=uL,hL=lL,fL=hL,dL=fL,sb=dL;function Yh(i,n){return Yh=sb||function(t,r){return t.__proto__=r,t},Yh(i,n)}function ge(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=nL(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),n&&Yh(i,n)}function cL(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function we(i,n){if(n&&(Ee(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cL(i)}var vL=by,pL=vL,ub=pL;function K(i){return K=sb?ub:function(e){return e.__proto__||ub(e)},K(i)}var ji=function(){function i(n,e,t){z(this,i),this.body=e,this.labelModule=t,this.setOptions(n),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return j(i,[{key:"setOptions",value:function(e){this.options=e}},{key:"_setMargins",value:function(e){this.margin={},this.options.margin&&(Ee(this.options.margin)=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(e,t){var r=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+r}},{key:"enableShadow",value:function(e,t){t.shadow&&(e.shadowColor=t.shadowColor,e.shadowBlur=t.shadowSize,e.shadowOffsetX=t.shadowX,e.shadowOffsetY=t.shadowY)}},{key:"disableShadow",value:function(e,t){t.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(e,t){if(t.borderDashes!==!1)if(e.setLineDash!==void 0){var r=t.borderDashes;r===!0&&(r=[5,15]),e.setLineDash(r)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,t.borderDashes=!1}},{key:"disableBorderDashes",value:function(e,t){t.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,t.borderDashes=!1))}},{key:"needsRefresh",value:function(e,t){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,t)}},{key:"initContextForDraw",value:function(e,t){var r=t.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,r),e.strokeStyle=t.borderColor,e.fillStyle=t.color}},{key:"performStroke",value:function(e,t){var r=t.borderWidth/this.body.view.scale;e.save(),r>0&&(this.enableBorderDashes(e,t),e.stroke(),this.disableBorderDashes(e,t)),e.restore()}},{key:"performFill",value:function(e,t){e.save(),e.fillStyle=t.color,this.enableShadow(e,t),Ra(e).call(e),this.disableShadow(e,t),e.restore(),this.performStroke(e,t)}},{key:"_addBoundingBoxMargin",value:function(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}},{key:"_updateBoundingBox",value:function(e,t,r,a,o){r!==void 0&&this.resize(r,a,o),this.left=e-this.width/2,this.top=t-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(e,t,r,a,o){this._updateBoundingBox(e,t,r,a,o)}},{key:"getDimensionsFromLabel",value:function(e,t,r){this.textSize=this.labelModule.getTextSize(e,t,r);var a=this.textSize.width,o=this.textSize.height,s=14;return a===0&&(a=s,o=s),{width:a,height:o}}}]),i}();function yL(i){var n=gL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function gL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var mL=function(i){ge(e,i);var n=yL(e);function e(t,r,a){var o;return z(this,e),o=n.call(this,t,r,a),o._setMargins(a),o}return j(e,[{key:"resize",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(a,o)){var s=this.getDimensionsFromLabel(r,a,o);this.width=s.width+this.margin.right+this.margin.left,this.height=s.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(r,a,o,s,u,l){this.resize(r,s,u),this.left=a-this.width/2,this.top=o-this.height/2,this.initContextForDraw(r,l),pp(r,this.left,this.top,this.width,this.height,l.borderRadius),this.performFill(r,l),this.updateBoundingBox(a,o,r,s,u),this.labelModule.draw(r,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,s,u)}},{key:"updateBoundingBox",value:function(r,a,o,s,u){this._updateBoundingBox(r,a,o,s,u);var l=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(l)}},{key:"distanceToBorder",value:function(r,a){r&&this.resize(r);var o=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(a)),Math.abs(this.height/2/Math.sin(a)))+o}}]),e}(ji);function wL(i){var n=bL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function bL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var Qh=function(i){ge(e,i);var n=wL(e);function e(t,r,a){var o;return z(this,e),o=n.call(this,t,r,a),o.labelOffset=0,o.selected=!1,o}return j(e,[{key:"setOptions",value:function(r,a,o){this.options=r,a===void 0&&o===void 0||this.setImages(a,o)}},{key:"setImages",value:function(r,a){a&&this.selected?(this.imageObj=a,this.imageObjAlt=r):(this.imageObj=r,this.imageObjAlt=a)}},{key:"switchImages",value:function(r){var a=r&&!this.selected||!r&&this.selected;if(this.selected=r,this.imageObjAlt!==void 0&&a){var o=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=o}}},{key:"_getImagePadding",value:function(){var r={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var a=this.options.imagePadding;Ee(a)=="object"?(r.top=a.top,r.right=a.right,r.bottom=a.bottom,r.left=a.left):(r.top=a,r.right=a,r.bottom=a,r.left=a)}return r}},{key:"_resizeImage",value:function(){var r,a;if(this.options.shapeProperties.useImageSize===!1){var o=1,s=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?o=this.imageObj.width/this.imageObj.height:s=this.imageObj.height/this.imageObj.width),r=this.options.size*2*o,a=this.options.size*2*s}else{var u=this._getImagePadding();r=this.imageObj.width+u.left+u.right,a=this.imageObj.height+u.top+u.bottom}this.width=r,this.height=a,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(r,a,o,s){this.initContextForDraw(r,s),Dl(r,a,o,s.size),this.performFill(r,s)}},{key:"_drawImageAtPosition",value:function(r,a){if(this.imageObj.width!=0){r.globalAlpha=a.opacity!==void 0?a.opacity:1,this.enableShadow(r,a);var o=1;this.options.shapeProperties.interpolation===!0&&(o=this.imageObj.width/this.width/this.body.view.scale);var s=this._getImagePadding(),u=this.left+s.left,l=this.top+s.top,h=this.width-s.left-s.right,f=this.height-s.top-s.bottom;this.imageObj.drawImageAtPosition(r,o,u,l,h,f),this.disableShadow(r,a)}}},{key:"_drawImageLabel",value:function(r,a,o,s,u){var l=0;if(this.height!==void 0){l=this.height*.5;var h=this.labelModule.getTextSize(r,s,u);h.lineCount>=1&&(l+=h.height/2)}var f=o+l;this.options.label&&(this.labelOffset=l),this.labelModule.draw(r,a,f,s,u,"hanging")}}]),e}(ji);function EL(i){var n=_L();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function _L(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var SL=function(i){ge(e,i);var n=EL(e);function e(t,r,a){var o;return z(this,e),o=n.call(this,t,r,a),o._setMargins(a),o}return j(e,[{key:"resize",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(a,o)){var s=this.getDimensionsFromLabel(r,a,o),u=Math.max(s.width+this.margin.right+this.margin.left,s.height+this.margin.top+this.margin.bottom);this.options.size=u/2,this.width=u,this.height=u,this.radius=this.width/2}}},{key:"draw",value:function(r,a,o,s,u,l){this.resize(r,s,u),this.left=a-this.width/2,this.top=o-this.height/2,this._drawRawCircle(r,a,o,l),this.updateBoundingBox(a,o),this.labelModule.draw(r,this.left+this.textSize.width/2+this.margin.left,o,s,u)}},{key:"updateBoundingBox",value:function(r,a){this.boundingBox.top=a-this.options.size,this.boundingBox.left=r-this.options.size,this.boundingBox.right=r+this.options.size,this.boundingBox.bottom=a+this.options.size}},{key:"distanceToBorder",value:function(r){return r&&this.resize(r),this.width*.5}}]),e}(Qh);function TL(i){var n=kL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function kL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var OL=function(i){ge(e,i);var n=TL(e);function e(t,r,a,o,s){var u;return z(this,e),u=n.call(this,t,r,a),u.setImages(o,s),u}return j(e,[{key:"resize",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,s=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(s){var u=this.options.size*2;this.width=u,this.height=u,this.radius=.5*this.width;return}this.needsRefresh(a,o)&&this._resizeImage()}},{key:"draw",value:function(r,a,o,s,u,l){this.switchImages(s),this.resize();var h=a,f=o;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=a,this.top=o,h+=this.width/2,f+=this.height/2):(this.left=a-this.width/2,this.top=o-this.height/2),this._drawRawCircle(r,h,f,l),r.save(),r.clip(),this._drawImageAtPosition(r,l),r.restore(),this._drawImageLabel(r,h,f,s,u),this.updateBoundingBox(a,o)}},{key:"updateBoundingBox",value:function(r,a){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=a,this.boundingBox.left=r,this.boundingBox.right=r+this.options.size*2,this.boundingBox.bottom=a+this.options.size*2):(this.boundingBox.top=a-this.options.size,this.boundingBox.left=r-this.options.size,this.boundingBox.right=r+this.options.size,this.boundingBox.bottom=a+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(r){return r&&this.resize(r),this.width*.5}}]),e}(Qh);function IL(i){var n=PL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function PL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var ni=function(i){ge(e,i);var n=IL(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"resize",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(a,o)){var u,l;this.labelModule.getTextSize(r,a,o);var h=2*s.size;this.width=(u=this.customSizeWidth)!==null&&u!==void 0?u:h,this.height=(l=this.customSizeHeight)!==null&&l!==void 0?l:h,this.radius=.5*this.width}}},{key:"_drawShape",value:function(r,a,o,s,u,l,h,f){var d=this;return this.resize(r,l,h,f),this.left=s-this.width/2,this.top=u-this.height/2,this.initContextForDraw(r,f),aP(a)(r,s,u,f.size),this.performFill(r,f),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(r.font=(l?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),r.fillStyle=this.options.icon.color||"black",r.textAlign="center",r.textBaseline="middle",r.fillText(this.options.icon.code,s,u)),{drawExternalLabel:function(){if(d.options.label!==void 0){d.labelModule.calculateLabelSize(r,l,h,s,u,"hanging");var v=u+.5*d.height+.5*d.labelModule.size.height;d.labelModule.draw(r,s,v,l,h,"hanging")}d.updateBoundingBox(s,u)}}}},{key:"updateBoundingBox",value:function(r,a){this.boundingBox.top=a-this.options.size,this.boundingBox.left=r-this.options.size,this.boundingBox.right=r+this.options.size,this.boundingBox.bottom=a+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),e}(ji);function lb(i,n){var e=De(i);if(Kr){var t=Kr(i);n&&(t=St(t).call(t,function(r){return Xr(i,r).enumerable})),e.push.apply(e,t)}return e}function CL(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};if(n%2){var t;Se(t=lb(Object(e),!0)).call(t,function(a){xs(i,a,e[a])})}else if(Yr)Is(i,Yr(e));else{var r;Se(r=lb(Object(e))).call(r,function(a){Cs(i,a,Xr(e,a))})}}return i}function AL(i){var n=xL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function xL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var $L=function(i){ge(e,i);var n=AL(e);function e(t,r,a,o){var s;return z(this,e),s=n.call(this,t,r,a,o),s.ctxRenderer=o,s}return j(e,[{key:"draw",value:function(r,a,o,s,u,l){this.resize(r,s,u,l),this.left=a-this.width/2,this.top=o-this.height/2,r.save();var h=this.ctxRenderer({ctx:r,id:this.options.id,x:a,y:o,state:{selected:s,hover:u},style:CL({},l),label:this.options.label});if(h.drawNode!=null&&h.drawNode(),r.restore(),h.drawExternalLabel){var f=h.drawExternalLabel;h.drawExternalLabel=function(){r.save(),f(),r.restore()}}return h.nodeDimensions&&(this.customSizeWidth=h.nodeDimensions.width,this.customSizeHeight=h.nodeDimensions.height),h}},{key:"distanceToBorder",value:function(r,a){return this._distanceToBorder(r,a)}}]),e}(ni);function ML(i){var n=DL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function DL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var FL=function(i){ge(e,i);var n=ML(e);function e(t,r,a){var o;return z(this,e),o=n.call(this,t,r,a),o._setMargins(a),o}return j(e,[{key:"resize",value:function(r,a,o){if(this.needsRefresh(a,o)){var s=this.getDimensionsFromLabel(r,a,o),u=s.width+this.margin.right+this.margin.left;this.width=u,this.height=u,this.radius=this.width/2}}},{key:"draw",value:function(r,a,o,s,u,l){this.resize(r,s,u),this.left=a-this.width/2,this.top=o-this.height/2,this.initContextForDraw(r,l),gp(r,a-this.width/2,o-this.height/2,this.width,this.height),this.performFill(r,l),this.updateBoundingBox(a,o,r,s,u),this.labelModule.draw(r,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,s,u)}},{key:"distanceToBorder",value:function(r,a){return this._distanceToBorder(r,a)}}]),e}(ji);function NL(i){var n=RL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function RL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var BL=function(i){ge(e,i);var n=NL(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"draw",value:function(r,a,o,s,u,l){return this._drawShape(r,"diamond",4,a,o,s,u,l)}},{key:"distanceToBorder",value:function(r,a){return this._distanceToBorder(r,a)}}]),e}(ni);function zL(i){var n=LL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function LL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var jL=function(i){ge(e,i);var n=zL(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"draw",value:function(r,a,o,s,u,l){return this._drawShape(r,"circle",2,a,o,s,u,l)}},{key:"distanceToBorder",value:function(r){return r&&this.resize(r),this.options.size}}]),e}(ni);function WL(i){var n=HL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function HL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var hb=function(i){ge(e,i);var n=WL(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"resize",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(a,o)){var s=this.getDimensionsFromLabel(r,a,o);this.height=s.height*2,this.width=s.width+s.height,this.radius=.5*this.width}}},{key:"draw",value:function(r,a,o,s,u,l){this.resize(r,s,u),this.left=a-this.width*.5,this.top=o-this.height*.5,this.initContextForDraw(r,l),Ml(r,this.left,this.top,this.width,this.height),this.performFill(r,l),this.updateBoundingBox(a,o,r,s,u),this.labelModule.draw(r,a,o,s,u)}},{key:"distanceToBorder",value:function(r,a){r&&this.resize(r);var o=this.width*.5,s=this.height*.5,u=Math.sin(a)*o,l=Math.cos(a)*s;return o*s/Math.sqrt(u*u+l*l)}}]),e}(ji);function VL(i){var n=UL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function UL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var GL=function(i){ge(e,i);var n=VL(e);function e(t,r,a){var o;return z(this,e),o=n.call(this,t,r,a),o._setMargins(a),o}return j(e,[{key:"resize",value:function(r,a,o){this.needsRefresh(a,o)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(r,a,o,s,u,l){var h=this;return this.resize(r,s,u),this.options.icon.size=this.options.icon.size||50,this.left=a-this.width/2,this.top=o-this.height/2,this._icon(r,a,o,s,u,l),{drawExternalLabel:function(){if(h.options.label!==void 0){var d=5;h.labelModule.draw(r,h.left+h.iconSize.width/2+h.margin.left,o+h.height/2+d,s)}h.updateBoundingBox(a,o)}}}},{key:"updateBoundingBox",value:function(r,a){if(this.boundingBox.top=a-this.options.icon.size*.5,this.boundingBox.left=r-this.options.icon.size*.5,this.boundingBox.right=r+this.options.icon.size*.5,this.boundingBox.bottom=a+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0){var o=5;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+o)}}},{key:"_icon",value:function(r,a,o,s,u,l){var h=Number(this.options.icon.size);this.options.icon.code!==void 0?(r.font=[this.options.icon.weight!=null?this.options.icon.weight:s?"bold":"",(this.options.icon.weight!=null&&s?5:0)+h+"px",this.options.icon.face].join(" "),r.fillStyle=this.options.icon.color||"black",r.textAlign="center",r.textBaseline="middle",this.enableShadow(r,l),r.fillText(this.options.icon.code,a,o),this.disableShadow(r,l)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(r,a){return this._distanceToBorder(r,a)}}]),e}(ji);function KL(i){var n=qL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function qL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var XL=function(i){ge(e,i);var n=KL(e);function e(t,r,a,o,s){var u;return z(this,e),u=n.call(this,t,r,a),u.setImages(o,s),u}return j(e,[{key:"resize",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,s=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(s){var u=this.options.size*2;this.width=u,this.height=u;return}this.needsRefresh(a,o)&&this._resizeImage()}},{key:"draw",value:function(r,a,o,s,u,l){r.save(),this.switchImages(s),this.resize();var h=a,f=o;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=a,this.top=o,h+=this.width/2,f+=this.height/2):(this.left=a-this.width/2,this.top=o-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){var d=this.options.borderWidth,c=this.options.borderWidthSelected||2*this.options.borderWidth,v=(s?c:d)/this.body.view.scale;r.lineWidth=Math.min(this.width,v),r.beginPath();var m=s?this.options.color.highlight.border:u?this.options.color.hover.border:this.options.color.border,w=s?this.options.color.highlight.background:u?this.options.color.hover.background:this.options.color.background;l.opacity!==void 0&&(m=zt(m,l.opacity),w=zt(w,l.opacity)),r.strokeStyle=m,r.fillStyle=w,r.rect(this.left-.5*r.lineWidth,this.top-.5*r.lineWidth,this.width+r.lineWidth,this.height+r.lineWidth),Ra(r).call(r),this.performStroke(r,l),r.closePath()}this._drawImageAtPosition(r,l),this._drawImageLabel(r,h,f,s,u),this.updateBoundingBox(a,o),r.restore()}},{key:"updateBoundingBox",value:function(r,a){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=r,this.top=a):(this.left=r-this.width/2,this.top=a-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(r,a){return this._distanceToBorder(r,a)}}]),e}(Qh);function QL(i){var n=YL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function YL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var ZL=function(i){ge(e,i);var n=QL(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"draw",value:function(r,a,o,s,u,l){return this._drawShape(r,"square",2,a,o,s,u,l)}},{key:"distanceToBorder",value:function(r,a){return this._distanceToBorder(r,a)}}]),e}(ni);function ez(i){var n=JL();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function JL(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var tz=function(i){ge(e,i);var n=ez(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"draw",value:function(r,a,o,s,u,l){return this._drawShape(r,"hexagon",4,a,o,s,u,l)}},{key:"distanceToBorder",value:function(r,a){return this._distanceToBorder(r,a)}}]),e}(ni);function iz(i){var n=rz();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function rz(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var nz=function(i){ge(e,i);var n=iz(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"draw",value:function(r,a,o,s,u,l){return this._drawShape(r,"star",4,a,o,s,u,l)}},{key:"distanceToBorder",value:function(r,a){return this._distanceToBorder(r,a)}}]),e}(ni);function oz(i){var n=az();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function az(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var sz=function(i){ge(e,i);var n=oz(e);function e(t,r,a){var o;return z(this,e),o=n.call(this,t,r,a),o._setMargins(a),o}return j(e,[{key:"resize",value:function(r,a,o){this.needsRefresh(a,o)&&(this.textSize=this.labelModule.getTextSize(r,a,o),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(r,a,o,s,u,l){this.resize(r,s,u),this.left=a-this.width/2,this.top=o-this.height/2,this.enableShadow(r,l),this.labelModule.draw(r,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,s,u),this.disableShadow(r,l),this.updateBoundingBox(a,o,r,s,u)}},{key:"distanceToBorder",value:function(r,a){return this._distanceToBorder(r,a)}}]),e}(ji);function lz(i){var n=uz();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function uz(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var hz=function(i){ge(e,i);var n=lz(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"draw",value:function(r,a,o,s,u,l){return this._drawShape(r,"triangle",3,a,o,s,u,l)}},{key:"distanceToBorder",value:function(r,a){return this._distanceToBorder(r,a)}}]),e}(ni);function dz(i){var n=fz();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function fz(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var cz=function(i){ge(e,i);var n=dz(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"draw",value:function(r,a,o,s,u,l){return this._drawShape(r,"triangleDown",3,a,o,s,u,l)}},{key:"distanceToBorder",value:function(r,a){return this._distanceToBorder(r,a)}}]),e}(ni);function fb(i,n){var e=De(i);if(Kr){var t=Kr(i);n&&(t=St(t).call(t,function(r){return Xr(i,r).enumerable})),e.push.apply(e,t)}return e}function db(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};if(n%2){var t;Se(t=fb(Object(e),!0)).call(t,function(a){xs(i,a,e[a])})}else if(Yr)Is(i,Yr(e));else{var r;Se(r=fb(Object(e))).call(r,function(a){Cs(i,a,Xr(e,a))})}}return i}var At=function(){function i(n,e,t,r,a,o){z(this,i),this.options=ei(a),this.globalOptions=a,this.defaultOptions=o,this.body=e,this.edges=[],this.id=void 0,this.imagelist=t,this.grouplist=r,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new eb(this.body,this.options,!1),this.setOptions(n)}return j(i,[{key:"attachEdge",value:function(e){var t;ve(t=this.edges).call(t,e)===-1&&this.edges.push(e)}},{key:"detachEdge",value:function(e){var t,r=ve(t=this.edges).call(t,e);if(r!=-1){var a;$r(a=this.edges).call(a,r,1)}}},{key:"setOptions",value:function(e){var t=this.options.shape;if(!!e){if(typeof e.color!="undefined"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");i.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=Xt(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=Xt(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=Xm(e.value)),i.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);var r=[e,this.options,this.defaultOptions];return this.chooser=qh("node",r),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&i.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(t),e.hidden!==void 0||e.physics!==void 0}}},{key:"_load_images",value:function(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){var t=this.options.opacity;e.borderColor=zt(e.borderColor,t),e.color=zt(e.color,t),e.shadowColor=zt(e.shadowColor,t)}return e}},{key:"updateLabelModule",value:function(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),i.updateGroupOptions(this.options,db(db({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);var t=this.grouplist.get(this.options.group,!1),r=[e,this.options,t,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,r),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new mL(this.options,this.body,this.labelModule);break;case"circle":this.shape=new SL(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new OL(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new $L(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new FL(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new BL(this.options,this.body,this.labelModule);break;case"dot":this.shape=new jL(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new hb(this.options,this.body,this.labelModule);break;case"icon":this.shape=new GL(this.options,this.body,this.labelModule);break;case"image":this.shape=new XL(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new ZL(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new tz(this.options,this.body,this.labelModule);break;case"star":this.shape=new nz(this.options,this.body,this.labelModule);break;case"text":this.shape=new sz(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new hz(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new cz(this.options,this.body,this.labelModule);break;default:this.shape=new hb(this.options,this.body,this.labelModule);break}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(e,t){return this.shape.distanceToBorder(e,t)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(e,t,r){if(this.options.value!==void 0){var a=this.options.scaling.customScalingFunction(e,t,r,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var s=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+a*s}this.options.size=this.options.scaling.min+a*o}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(e){var t=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,t)||{}}},{key:"updateBoundingBox",value:function(e){this.shape.updateBoundingBox(this.x,this.y,e)}},{key:"resize",value:function(e){var t=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,t)}},{key:"getItemsOnPoint",value:function(e){var t=[];return this.labelModule.visible()&&Kh(this.labelModule.getSize(),e)&&t.push({nodeId:this.id,labelId:0}),Kh(this.shape.boundingBox,e)&&t.push({nodeId:this.id}),t}},{key:"isOverlappingWith",value:function(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}},{key:"isBoundingBoxOverlappingWith",value:function(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}}],[{key:"checkOpacity",value:function(e){return 0<=e&&e<=1}},{key:"checkCoordinateOrigin",value:function(e){return e===void 0||e==="center"||e==="top-left"}},{key:"updateGroupOptions",value:function(e,t,r){var a;if(r!==void 0){var o=e.group;if(t!==void 0&&t.group!==void 0&&o!==t.group)throw new Error("updateGroupOptions: group values in options don't match.");var s=typeof o=="number"||typeof o=="string"&&o!="";if(!!s){var u=r.get(o);u.opacity!==void 0&&t.opacity===void 0&&(i.checkOpacity(u.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+u.opacity),u.opacity=void 0));var l=St(a=FB(t)).call(a,function(h){return t[h]!=null});l.push("font"),Gs(l,e,u),e.color=$h(e.color)}}}},{key:"parseOptions",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,s=["color","fixed","shadow"];if(Gs(s,e,t,r),i.checkMass(t),e.opacity!==void 0&&(i.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),t.opacity!==void 0&&(i.checkOpacity(t.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity),t.opacity=void 0)),t.shapeProperties&&!i.checkCoordinateOrigin(t.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+t.shapeProperties.coordinateOrigin),jt(e,t,"shadow",a),t.color!==void 0&&t.color!==null){var u=$h(t.color);wm(e.color,u)}else r===!0&&t.color===null&&(e.color=ei(a.color));t.fixed!==void 0&&t.fixed!==null&&(typeof t.fixed=="boolean"?(e.fixed.x=t.fixed,e.fixed.y=t.fixed):(t.fixed.x!==void 0&&typeof t.fixed.x=="boolean"&&(e.fixed.x=t.fixed.x),t.fixed.y!==void 0&&typeof t.fixed.y=="boolean"&&(e.fixed.y=t.fixed.y))),r===!0&&t.font===null&&(e.font=ei(a.font)),i.updateGroupOptions(e,t,o),t.scaling!==void 0&&jt(e.scaling,t.scaling,"label",a.scaling)}},{key:"checkMass",value:function(e,t){if(e.mass!==void 0&&e.mass<=0){var r="";t!==void 0&&(r=" in node id: "+t),console.error("%cNegative or zero mass disallowed"+r+", setting mass to 1.",Tm),e.mass=1}}}]),i}();function pz(i,n){var e=typeof Ar!="undefined"&&or(i)||i["@@iterator"];if(!e){if(me(i)||(e=vz(i))||n&&i&&typeof i.length=="number"){e&&(i=e);var t=0,r=function(){};return{s:r,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(i)},n:function(){var l=e.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function vz(i,n){var e;if(!!i){if(typeof i=="string")return cb(i,n);var t=Je(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Ur(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return cb(i,n)}}function cb(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}var gz=function(){function i(n,e,t,r){var a,o=this;if(z(this,i),this.body=n,this.images=e,this.groups=t,this.layoutEngine=r,this.body.functions.createNode=B(a=this.create).call(a,this),this.nodesListeners={add:function(u,l){o.add(l.items)},update:function(u,l){o.update(l.items,l.data,l.oldData)},remove:function(u,l){o.remove(l.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(u,l,h,f){if(l===u)return .5;var d=1/(l-u);return Math.max(0,(f-u)*d)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=ei(this.defaultOptions),this.bindEventListeners()}return j(i,[{key:"bindEventListeners",value:function(){var e,t,r=this;this.body.emitter.on("refreshNodes",B(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",B(t=this.refresh).call(t,this)),this.body.emitter.on("destroy",function(){ue(r.nodesListeners,function(a,o){r.body.data.nodes&&r.body.data.nodes.off(o,a)}),delete r.body.functions.createNode,delete r.nodesListeners.add,delete r.nodesListeners.update,delete r.nodesListeners.remove,delete r.nodesListeners})}},{key:"setOptions",value:function(e){if(e!==void 0){if(At.parseOptions(this.options,e),e.opacity!==void 0&&(Vh(e.opacity)||!zi(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(var t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&this.body.nodes[t].updateShape();if(typeof e.font!="undefined"||typeof e.widthConstraint!="undefined"||typeof e.heightConstraint!="undefined")for(var r=0,a=De(this.body.nodes);r<a.length;r++){var o=a[r];this.body.nodes[o].updateLabelModule(),this.body.nodes[o].needsRefresh()}if(e.size!==void 0)for(var s in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,s)&&this.body.nodes[s].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.body.data.nodes;if(ml("id",e))this.body.data.nodes=e;else if(me(e))this.body.data.nodes=new Pr,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new Pr;else throw new TypeError("Array or DataSet expected");if(r&&ue(this.nodesListeners,function(s,u){r.off(u,s)}),this.body.nodes={},this.body.data.nodes){var a=this;ue(this.nodesListeners,function(s,u){a.body.data.nodes.on(u,s)});var o=this.body.data.nodes.getIds();this.add(o,!0)}t===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r,a=[],o=0;o<e.length;o++){r=e[o];var s=this.body.data.nodes.get(r),u=this.create(s);a.push(u),this.body.nodes[r]=u}this.layoutEngine.positionInitially(a),t===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(e,t,r){for(var a=this.body.nodes,o=!1,s=0;s<e.length;s++){var u=e[s],l=a[u],h=t[s];l!==void 0?l.setOptions(h)&&(o=!0):(o=!0,l=this.create(h),a[u]=l)}!o&&r!==void 0&&(o=vB(t).call(t,function(f,d){var c=r[d];return c&&c.level!==f.level})),o===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(e){for(var t=this.body.nodes,r=0;r<e.length;r++){var a=e[r];delete t[a]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:At;return new t(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;ue(this.body.nodes,function(r,a){var o=e.body.data.nodes.get(a);o!==void 0&&(t===!0&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(o))})}},{key:"getPositions",value:function(e){var t={};if(e!==void 0){if(me(e)===!0){for(var r=0;r<e.length;r++)if(this.body.nodes[e[r]]!==void 0){var a=this.body.nodes[e[r]];t[e[r]]={x:Math.round(a.x),y:Math.round(a.y)}}}else if(this.body.nodes[e]!==void 0){var o=this.body.nodes[e];t[e]={x:Math.round(o.x),y:Math.round(o.y)}}}else for(var s=0;s<this.body.nodeIndices.length;s++){var u=this.body.nodes[this.body.nodeIndices[s]];t[this.body.nodeIndices[s]]={x:Math.round(u.x),y:Math.round(u.y)}}return t}},{key:"getPosition",value:function(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}},{key:"storePositions",value:function(){var e=[],t=this.body.data.nodes.getDataSet(),r=pz(t.get()),a;try{for(r.s();!(a=r.n()).done;){var o=a.value,s=o.id,u=this.body.nodes[s],l=Math.round(u.x),h=Math.round(u.y);(o.x!==l||o.y!==h)&&e.push({id:s,x:l,y:h})}}catch(f){r.e(f)}finally{r.f()}t.update(e)}},{key:"getBoundingBox",value:function(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}},{key:"getConnectedNodes",value:function(e,t){var r=[];if(this.body.nodes[e]!==void 0)for(var a=this.body.nodes[e],o={},s=0;s<a.edges.length;s++){var u=a.edges[s];t!=="to"&&u.toId==a.id?o[u.fromId]===void 0&&(r.push(u.fromId),o[u.fromId]=!0):t!=="from"&&u.fromId==a.id&&o[u.toId]===void 0&&(r.push(u.toId),o[u.toId]=!0)}return r}},{key:"getConnectedEdges",value:function(e){var t=[];if(this.body.nodes[e]!==void 0)for(var r=this.body.nodes[e],a=0;a<r.edges.length;a++)t.push(r.edges[a].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return t}},{key:"moveNode",value:function(e,t,r){var a=this;this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(t),this.body.nodes[e].y=Number(r),lr(function(){a.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}]),i}(),yz=re,mz=Qe,bz=Nt,wz=Ct,_z=vn,Ez=ps;function vb(i,n){var e=arguments.length<3?i:arguments[2],t,r;if(bz(i)===e)return i[n];if(t=_z.f(i,n))return wz(t,"value")?t.value:t.get===void 0?void 0:t.get.call(e);if(mz(r=Ez(i)))return vb(r,n,e)}yz({target:"Reflect",stat:!0},{get:vb});var Sz=ce,kz=Sz.Reflect.get,Tz=kz,Oz=Tz,Pz=Oz,Iz=Pz,pb=Iz,Cz=Ng,xz=Cz,Az=xz;function $z(i,n){for(;!Object.prototype.hasOwnProperty.call(i,n)&&(i=K(i),i!==null););return i}function Ys(i,n,e){return typeof Reflect!="undefined"&&pb?Ys=pb:Ys=function(r,a,o){var s=$z(r,a);if(!!s){var u=Az(s,a);return u.get?u.get.call(o):u.value}},Ys(i,n,e||i)}var Dz=re,gb=Math.hypot,Mz=Math.abs,Fz=Math.sqrt,Rz=!!gb&&gb(Infinity,NaN)!==Infinity;Dz({target:"Math",stat:!0,forced:Rz},{hypot:function(n,e){for(var t=0,r=0,a=arguments.length,o=0,s,u;r<a;)s=Mz(arguments[r++]),o<s?(u=o/s,t=t*u*u+1,o=s):s>0?(u=s/o,t+=u*u):t+=s;return o===Infinity?Infinity:o*Fz(t)}});var Nz=ce,Bz=Nz.Math.hypot,Lz=Bz,zz=Lz,jz=zz;function yb(i){var n=Hz();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function Hz(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var Re=function(){function i(){z(this,i)}return j(i,null,[{key:"transform",value:function(e,t){me(e)||(e=[e]);for(var r=t.point.x,a=t.point.y,o=t.angle,s=t.length,u=0;u<e.length;++u){var l=e[u],h=l.x*Math.cos(o)-l.y*Math.sin(o),f=l.x*Math.sin(o)+l.y*Math.cos(o);l.x=r+s*h,l.y=a+s*f}}},{key:"drawPath",value:function(e,t){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var r=1;r<t.length;++r)e.lineTo(t[r].x,t[r].y);e.closePath()}}]),i}(),Wz=function(i){ge(e,i);var n=yb(e);function e(){return z(this,e),n.apply(this,arguments)}return j(e,null,[{key:"draw",value:function(r,a){if(a.image){r.save(),r.translate(a.point.x,a.point.y),r.rotate(Math.PI/2+a.angle);var o=a.imageWidth!=null?a.imageWidth:a.image.width,s=a.imageHeight!=null?a.imageHeight:a.image.height;a.image.drawImageAtPosition(r,1,-o/2,0,o,s),r.restore()}return!1}}]),e}(Re),Uz=function(i){ge(e,i);var n=yb(e);function e(){return z(this,e),n.apply(this,arguments)}return j(e,null,[{key:"draw",value:function(r,a){var o=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return Re.transform(o,a),Re.drawPath(r,o),!0}}]),e}(Re),Vz=function(){function i(){z(this,i)}return j(i,null,[{key:"draw",value:function(e,t){var r=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return Re.transform(r,t),Re.drawPath(e,r),!0}}]),i}(),Gz=function(){function i(){z(this,i)}return j(i,null,[{key:"draw",value:function(e,t){var r={x:-.4,y:0};Re.transform(r,t),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";var a=Math.PI,o=t.angle-a/2,s=t.angle+a/2;return e.beginPath(),e.arc(r.x,r.y,t.length*.4,o,s,!1),e.stroke(),!0}}]),i}(),qz=function(){function i(){z(this,i)}return j(i,null,[{key:"draw",value:function(e,t){var r={x:-.3,y:0};Re.transform(r,t),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";var a=Math.PI,o=t.angle+a/2,s=t.angle+3*a/2;return e.beginPath(),e.arc(r.x,r.y,t.length*.4,o,s,!1),e.stroke(),!0}}]),i}(),Kz=function(){function i(){z(this,i)}return j(i,null,[{key:"draw",value:function(e,t){var r=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return Re.transform(r,t),Re.drawPath(e,r),!0}}]),i}(),Xz=function(){function i(){z(this,i)}return j(i,null,[{key:"draw",value:function(e,t){var r=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return Re.transform(r,t),Re.drawPath(e,r),!0}}]),i}(),Yz=function(){function i(){z(this,i)}return j(i,null,[{key:"draw",value:function(e,t){var r={x:-.4,y:0};return Re.transform(r,t),Dl(e,r.x,r.y,t.length*.4),!0}}]),i}(),Qz=function(){function i(){z(this,i)}return j(i,null,[{key:"draw",value:function(e,t){var r=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return Re.transform(r,t),Re.drawPath(e,r),!0}}]),i}(),Zz=function(){function i(){z(this,i)}return j(i,null,[{key:"draw",value:function(e,t){var r=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return Re.transform(r,t),Re.drawPath(e,r),!0}}]),i}(),Jz=function(){function i(){z(this,i)}return j(i,null,[{key:"draw",value:function(e,t){var r=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return Re.transform(r,t),Re.drawPath(e,r),!0}}]),i}(),ej=function(){function i(){z(this,i)}return j(i,null,[{key:"draw",value:function(e,t){var r=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return Re.transform(r,t),Re.drawPath(e,r),!0}}]),i}(),mb=function(){function i(){z(this,i)}return j(i,null,[{key:"draw",value:function(e,t){var r;switch(t.type&&(r=t.type.toLowerCase()),r){case"image":return Wz.draw(e,t);case"circle":return Yz.draw(e,t);case"box":return Zz.draw(e,t);case"crow":return Vz.draw(e,t);case"curve":return Gz.draw(e,t);case"diamond":return Jz.draw(e,t);case"inv_curve":return qz.draw(e,t);case"triangle":return Kz.draw(e,t);case"inv_triangle":return Xz.draw(e,t);case"bar":return Qz.draw(e,t);case"vee":return ej.draw(e,t);case"arrow":default:return Uz.draw(e,t)}}}]),i}();function bb(i,n){var e=De(i);if(Kr){var t=Kr(i);n&&(t=St(t).call(t,function(r){return Xr(i,r).enumerable})),e.push.apply(e,t)}return e}function wb(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};if(n%2){var t;Se(t=bb(Object(e),!0)).call(t,function(a){xs(i,a,e[a])})}else if(Yr)Is(i,Yr(e));else{var r;Se(r=bb(Object(e))).call(r,function(a){Cs(i,a,Xr(e,a))})}}return i}var _b=function(){function i(n,e,t){z(this,i),this._body=e,this._labelModule=t,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(n),this.fromPoint=this.from,this.toPoint=this.to}return j(i,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(e,t,r,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,t),e.lineWidth=t.width,t.dashes!==!1?this._drawDashedLine(e,t,o):this._drawLine(e,t,o)}},{key:"_drawLine",value:function(e,t,r,a,o){if(this.from!=this.to)this._line(e,t,r,a,o);else{var s=this._getCircleData(e),u=$e(s,3),l=u[0],h=u[1],f=u[2];this._circle(e,t,l,h,f)}}},{key:"_drawDashedLine",value:function(e,t,r,a,o){e.lineCap="round";var s=me(t.dashes)?t.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(s),e.lineDashOffset=0,this.from!=this.to)this._line(e,t,r);else{var u=this._getCircleData(e),l=$e(u,3),h=l[0],f=l[1],d=l[2];this._circle(e,t,h,f,d)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)yp(e,this.from.x,this.from.y,this.to.x,this.to.y,s);else{var c=this._getCircleData(e),v=$e(c,3),m=v[0],w=v[1],g=v[2];this._circle(e,t,m,w,g)}this.enableShadow(e,t),e.stroke(),this.disableShadow(e,t)}}},{key:"findBorderPosition",value:function(e,t,r){return this.from!=this.to?this._findBorderPosition(e,t,r):this._findBorderPositionCircle(e,t,r)}},{key:"findBorderPositions",value:function(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};var t,r=Je(t=this._getCircleData(e)).call(t,0,2),a=$e(r,2),o=a[0],s=a[1];return{from:this._findBorderPositionCircle(this.from,e,{x:o,y:s,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:o,y:s,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(e){var t=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);var r=Ym(e,this.options.selfReference.angle,t,this.from);return[r.x,r.y,t]}},{key:"_pointOnCircle",value:function(e,t,r,a){var o=a*2*Math.PI;return{x:e+r*Math.cos(o),y:t-r*Math.sin(o)}}},{key:"_findBorderPositionCircle",value:function(e,t,r){var a=r.x,o=r.y,s=r.low,u=r.high,l=r.direction,h=10,f=this.options.selfReference.size,d=.05,c,v=(s+u)*.5,m=0;this.options.arrowStrikethrough===!0&&(l===-1?m=this.options.endPointOffset.from:l===1&&(m=this.options.endPointOffset.to));var w=0;do{v=(s+u)*.5,c=this._pointOnCircle(a,o,f,v);var g=Math.atan2(e.y-c.y,e.x-c.x),E=e.distanceToBorder(t,g)+m,_=Math.sqrt(Math.pow(c.x-e.x,2)+Math.pow(c.y-e.y,2)),S=E-_;if(Math.abs(S)<d)break;S>0?l>0?s=v:u=v:l>0?u=v:s=v,++w}while(s<=u&&w<h);return wb(wb({},c),{},{t:v})}},{key:"getLineWidth",value:function(e,t){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):t===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(e,t){if(t.inheritsColor!==!1){if(t.inheritsColor==="both"&&this.from.id!==this.to.id){var r=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),a=this.from.options.color.highlight.border,o=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(a=zt(this.from.options.color.border,t.opacity),o=zt(this.to.options.color.border,t.opacity)):this.from.selected===!0&&this.to.selected===!1?o=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(a=this.from.options.color.border),r.addColorStop(0,a),r.addColorStop(1,o),r}return t.inheritsColor==="to"?zt(this.to.options.color.border,t.opacity):zt(this.from.options.color.border,t.opacity)}else return zt(t.color,t.opacity)}},{key:"_circle",value:function(e,t,r,a,o){this.enableShadow(e,t);var s=0,u=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){var l=this.options.selfReference.angle,h=this.options.selfReference.angle+Math.PI,f=this._findBorderPositionCircle(this.from,e,{x:r,y:a,low:l,high:h,direction:-1}),d=this._findBorderPositionCircle(this.from,e,{x:r,y:a,low:l,high:h,direction:1});s=Math.atan2(f.y-a,f.x-r),u=Math.atan2(d.y-a,d.x-r)}e.beginPath(),e.arc(r,a,o,s,u,!1),e.stroke(),this.disableShadow(e,t)}},{key:"getDistanceToEdge",value:function(e,t,r,a,o,s){if(this.from!=this.to)return this._getDistanceToEdge(e,t,r,a,o,s);var u=this._getCircleData(void 0),l=$e(u,3),h=l[0],f=l[1],d=l[2],c=h-o,v=f-s;return Math.abs(Math.sqrt(c*c+v*v)-d)}},{key:"_getDistanceToLine",value:function(e,t,r,a,o,s){var u=r-e,l=a-t,h=u*u+l*l,f=((o-e)*u+(s-t)*l)/h;f>1?f=1:f<0&&(f=0);var d=e+f*u,c=t+f*l,v=d-o,m=c-s;return Math.sqrt(v*v+m*m)}},{key:"getArrowData",value:function(e,t,r,a,o,s){var u,l,h,f,d,c,v,m=s.width;t==="from"?(h=this.from,f=this.to,d=s.fromArrowScale<0,c=Math.abs(s.fromArrowScale),v=s.fromArrowType):t==="to"?(h=this.to,f=this.from,d=s.toArrowScale<0,c=Math.abs(s.toArrowScale),v=s.toArrowType):(h=this.to,f=this.from,d=s.middleArrowScale<0,c=Math.abs(s.middleArrowScale),v=s.middleArrowType);var w=15*c+3*m;if(h!=f){var g=jz(h.x-f.x,h.y-f.y),E=w/g;if(t!=="middle")if(this.options.smooth.enabled===!0){var _=this._findBorderPosition(h,e,{via:r}),S=this.getPoint(_.t+E*(t==="from"?1:-1),r);u=Math.atan2(_.y-S.y,_.x-S.x),l=_}else u=Math.atan2(h.y-f.y,h.x-f.x),l=this._findBorderPosition(h,e);else{var k=(d?-E:E)/2,O=this.getPoint(.5+k,r),C=this.getPoint(.5-k,r);u=Math.atan2(O.y-C.y,O.x-C.x),l=this.getPoint(.5,r)}}else{var I=this._getCircleData(e),T=$e(I,3),P=T[0],R=T[1],W=T[2];if(t==="from"){var G=this.options.selfReference.angle,Q=this.options.selfReference.angle+Math.PI,ee=this._findBorderPositionCircle(this.from,e,{x:P,y:R,low:G,high:Q,direction:-1});u=ee.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,l=ee}else if(t==="to"){var te=this.options.selfReference.angle,le=this.options.selfReference.angle+Math.PI,F=this._findBorderPositionCircle(this.from,e,{x:P,y:R,low:te,high:le,direction:1});u=F.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,l=F}else{var $=this.options.selfReference.angle/(2*Math.PI);l=this._pointOnCircle(P,R,W,$),u=$*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}var H=l.x-w*.9*Math.cos(u),X=l.y-w*.9*Math.sin(u),U={x:H,y:X};return{point:l,core:U,angle:u,length:w,type:v}}},{key:"drawArrowHead",value:function(e,t,r,a,o){e.strokeStyle=this.getColor(e,t),e.fillStyle=e.strokeStyle,e.lineWidth=t.width;var s=mb.draw(e,o);s&&(this.enableShadow(e,t),Ra(e).call(e),this.disableShadow(e,t))}},{key:"enableShadow",value:function(e,t){t.shadow===!0&&(e.shadowColor=t.shadowColor,e.shadowBlur=t.shadowSize,e.shadowOffsetX=t.shadowX,e.shadowOffsetY=t.shadowY)}},{key:"disableShadow",value:function(e,t){t.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}},{key:"drawBackground",value:function(e,t){if(t.background!==!1){var r={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=t.backgroundColor,e.lineWidth=t.backgroundSize,this.setStrokeDashed(e,t.backgroundDashes),e.stroke(),e.strokeStyle=r.strokeStyle,e.lineWidth=r.lineWidth,e.dashes=r.dashes,this.setStrokeDashed(e,t.dashes)}}},{key:"setStrokeDashed",value:function(e,t){if(t!==!1)if(e.setLineDash!==void 0){var r=me(t)?t:[5,5];e.setLineDash(r)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),i}();function Eb(i,n){var e=De(i);if(Kr){var t=Kr(i);n&&(t=St(t).call(t,function(r){return Xr(i,r).enumerable})),e.push.apply(e,t)}return e}function Sb(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};if(n%2){var t;Se(t=Eb(Object(e),!0)).call(t,function(a){xs(i,a,e[a])})}else if(Yr)Is(i,Yr(e));else{var r;Se(r=Eb(Object(e))).call(r,function(a){Cs(i,a,Xr(e,a))})}}return i}function rj(i){var n=tj();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function tj(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var Zh=function(i){ge(e,i);var n=rj(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"_findBorderPositionBezier",value:function(r,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates(),s=10,u=.2,l=!1,h=1,f=0,d=this.to,c,v,m=this.options.endPointOffset?this.options.endPointOffset.to:0;r.id===this.from.id&&(d=this.from,l=!0,m=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(m=0);var w=0;do{v=(f+h)*.5,c=this.getPoint(v,o);var g=Math.atan2(d.y-c.y,d.x-c.x),E=d.distanceToBorder(a,g)+m,_=Math.sqrt(Math.pow(c.x-d.x,2)+Math.pow(c.y-d.y,2)),S=E-_;if(Math.abs(S)<u)break;S<0?l===!1?f=v:h=v:l===!1?h=v:f=v,++w}while(f<=h&&w<s);return Sb(Sb({},c),{},{t:v})}},{key:"_getDistanceToBezierEdge",value:function(r,a,o,s,u,l,h){var f=1e9,d,c,v,m,w,g=r,E=a;for(c=1;c<10;c++)v=.1*c,m=Math.pow(1-v,2)*r+2*v*(1-v)*h.x+Math.pow(v,2)*o,w=Math.pow(1-v,2)*a+2*v*(1-v)*h.y+Math.pow(v,2)*s,c>0&&(d=this._getDistanceToLine(g,E,m,w,u,l),f=d<f?d:f),g=m,E=w;return f}},{key:"_bezierCurve",value:function(r,a,o,s){r.beginPath(),r.moveTo(this.fromPoint.x,this.fromPoint.y),o!=null&&o.x!=null?s!=null&&s.x!=null?r.bezierCurveTo(o.x,o.y,s.x,s.y,this.toPoint.x,this.toPoint.y):r.quadraticCurveTo(o.x,o.y,this.toPoint.x,this.toPoint.y):r.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(r,a),this.enableShadow(r,a),r.stroke(),this.disableShadow(r,a)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),e}(_b);function nj(i){var n=ij();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function ij(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var kb=function(i){ge(e,i);var n=nj(e);function e(t,r,a){var o;return z(this,e),o=n.call(this,t,r,a),o.via=o.via,o._boundFunction=function(){o.positionBezierNode()},o._body.emitter.on("_repositionBezierNodes",o._boundFunction),o}return j(e,[{key:"setOptions",value:function(r){Ys(K(e.prototype),"setOptions",this).call(this,r);var a=!1;this.options.physics!==r.physics&&(a=!0),this.options=r,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),a===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}},{key:"setupSupportNode",value:function(){if(this.via===void 0){var r="edgeId:"+this.id,a=this._body.functions.createNode({id:r,shape:"circle",physics:!0,hidden:!0});this._body.nodes[r]=a,this.via=a,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(r,a,o){this._bezierCurve(r,a,o)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){var o=this._getCircleData(),s=$e(o,3),u=s[0],l=s[1],h=s[2],f=2*Math.PI*(1-r);return{x:u+h*Math.sin(f),y:l+h-h*(1-Math.cos(f))}}else return{x:Math.pow(1-r,2)*this.fromPoint.x+2*r*(1-r)*a.x+Math.pow(r,2)*this.toPoint.x,y:Math.pow(1-r,2)*this.fromPoint.y+2*r*(1-r)*a.y+Math.pow(r,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(r,a){return this._findBorderPositionBezier(r,a,this.via)}},{key:"_getDistanceToEdge",value:function(r,a,o,s,u,l){return this._getDistanceToBezierEdge(r,a,o,s,u,l,this.via)}}]),e}(Zh);function oj(i){var n=aj();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function aj(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var Tb=function(i){ge(e,i);var n=oj(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"_line",value:function(r,a,o){this._bezierCurve(r,a,o)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var r=this.options.smooth.roundness,a=this.options.smooth.type,o=Math.abs(this.from.x-this.to.x),s=Math.abs(this.from.y-this.to.y);if(a==="discrete"||a==="diagonalCross"){var u,l;o<=s?u=l=r*s:u=l=r*o,this.from.x>this.to.x&&(u=-u),this.from.y>=this.to.y&&(l=-l);var h=this.from.x+u,f=this.from.y+l;return a==="discrete"&&(o<=s?h=o<r*s?this.from.x:h:f=s<r*o?this.from.y:f),{x:h,y:f}}else if(a==="straightCross"){var d=(1-r)*o,c=(1-r)*s;return o<=s?(d=0,this.from.y<this.to.y&&(c=-c)):(this.from.x<this.to.x&&(d=-d),c=0),{x:this.to.x+d,y:this.to.y+c}}else if(a==="horizontal"){var v=(1-r)*o;return this.from.x<this.to.x&&(v=-v),{x:this.to.x+v,y:this.from.y}}else if(a==="vertical"){var m=(1-r)*s;return this.from.y<this.to.y&&(m=-m),{x:this.from.x,y:this.to.y+m}}else if(a==="curvedCW"){o=this.to.x-this.from.x,s=this.from.y-this.to.y;var w=Math.sqrt(o*o+s*s),g=Math.PI,E=Math.atan2(s,o),_=(E+(r*.5+.5)*g)%(2*g);return{x:this.from.x+(r*.5+.5)*w*Math.sin(_),y:this.from.y+(r*.5+.5)*w*Math.cos(_)}}else if(a==="curvedCCW"){o=this.to.x-this.from.x,s=this.from.y-this.to.y;var S=Math.sqrt(o*o+s*s),k=Math.PI,O=Math.atan2(s,o),C=(O+(-r*.5+.5)*k)%(2*k);return{x:this.from.x+(r*.5+.5)*S*Math.sin(C),y:this.from.y+(r*.5+.5)*S*Math.cos(C)}}else{var I,T;o<=s?I=T=r*s:I=T=r*o,this.from.x>this.to.x&&(I=-I),this.from.y>=this.to.y&&(T=-T);var P=this.from.x+I,R=this.from.y+T;return o<=s?this.from.x<=this.to.x?P=this.to.x<P?this.to.x:P:P=this.to.x>P?this.to.x:P:this.from.y>=this.to.y?R=this.to.y>R?this.to.y:R:R=this.to.y<R?this.to.y:R,{x:P,y:R}}}},{key:"_findBorderPosition",value:function(r,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(r,a,o.via)}},{key:"_getDistanceToEdge",value:function(r,a,o,s,u,l){var h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(r,a,o,s,u,l,h)}},{key:"getPoint",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=r,s=Math.pow(1-o,2)*this.fromPoint.x+2*o*(1-o)*a.x+Math.pow(o,2)*this.toPoint.x,u=Math.pow(1-o,2)*this.fromPoint.y+2*o*(1-o)*a.y+Math.pow(o,2)*this.toPoint.y;return{x:s,y:u}}}]),e}(Zh);function uj(i){var n=sj();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function sj(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var lj=function(i){ge(e,i);var n=uj(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"_getDistanceToBezierEdge2",value:function(r,a,o,s,u,l,h,f){for(var d=1e9,c=r,v=a,m=[0,0,0,0],w=1;w<10;w++){var g=.1*w;m[0]=Math.pow(1-g,3),m[1]=3*g*Math.pow(1-g,2),m[2]=3*Math.pow(g,2)*(1-g),m[3]=Math.pow(g,3);var E=m[0]*r+m[1]*h.x+m[2]*f.x+m[3]*o,_=m[0]*a+m[1]*h.y+m[2]*f.y+m[3]*s;if(w>0){var S=this._getDistanceToLine(c,v,E,_,u,l);d=S<d?S:d}c=E,v=_}return d}}]),e}(Zh);function fj(i){var n=hj();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function hj(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var Ob=function(i){ge(e,i);var n=fj(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"_line",value:function(r,a,o){var s=o[0],u=o[1];this._bezierCurve(r,a,s,u)}},{key:"_getViaCoordinates",value:function(){var r=this.from.x-this.to.x,a=this.from.y-this.to.y,o,s,u,l,h=this.options.smooth.roundness;return(Math.abs(r)>Math.abs(a)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(s=this.from.y,l=this.to.y,o=this.from.x-h*r,u=this.to.x+h*r):(s=this.from.y-h*a,l=this.to.y+h*a,o=this.from.x,u=this.to.x),[{x:o,y:s},{x:u,y:l}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(r,a){return this._findBorderPositionBezier(r,a)}},{key:"_getDistanceToEdge",value:function(r,a,o,s,u,l){var h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates(),f=$e(h,2),d=f[0],c=f[1];return this._getDistanceToBezierEdge2(r,a,o,s,u,l,d,c)}},{key:"getPoint",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),o=$e(a,2),s=o[0],u=o[1],l=r,h=[Math.pow(1-l,3),3*l*Math.pow(1-l,2),3*Math.pow(l,2)*(1-l),Math.pow(l,3)],f=h[0]*this.fromPoint.x+h[1]*s.x+h[2]*u.x+h[3]*this.toPoint.x,d=h[0]*this.fromPoint.y+h[1]*s.y+h[2]*u.y+h[3]*this.toPoint.y;return{x:f,y:d}}}]),e}(lj);function cj(i){var n=dj();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function dj(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var Pb=function(i){ge(e,i);var n=cj(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"_line",value:function(r,a){r.beginPath(),r.moveTo(this.fromPoint.x,this.fromPoint.y),r.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(r,a),r.stroke(),this.disableShadow(r,a)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(r){return{x:(1-r)*this.fromPoint.x+r*this.toPoint.x,y:(1-r)*this.fromPoint.y+r*this.toPoint.y}}},{key:"_findBorderPosition",value:function(r,a){var o=this.to,s=this.from;r.id===this.from.id&&(o=this.from,s=this.to);var u=Math.atan2(o.y-s.y,o.x-s.x),l=o.x-s.x,h=o.y-s.y,f=Math.sqrt(l*l+h*h),d=r.distanceToBorder(a,u),c=(f-d)/f;return{x:(1-c)*s.x+c*o.x,y:(1-c)*s.y+c*o.y,t:0}}},{key:"_getDistanceToEdge",value:function(r,a,o,s,u,l){return this._getDistanceToLine(r,a,o,s,u,l)}}]),e}(_b),Mn=function(){function i(n,e,t,r,a){if(z(this,i),e===void 0)throw new Error("No body provided");this.options=ei(r),this.globalOptions=r,this.defaultOptions=a,this.body=e,this.imagelist=t,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new eb(this.body,this.options,!0),this.setOptions(n)}return j(i,[{key:"setOptions",value:function(e){if(!!e){var t=typeof e.physics!="undefined"&&this.options.physics!==e.physics||typeof e.hidden!="undefined"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from!="undefined"&&this.options.from!==e.from||typeof e.to!="undefined"&&this.options.to!==e.to;i.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=Xm(e.value));var r=[e,this.options,this.defaultOptions];return this.chooser=qh("edge",r),this.updateLabelModule(e),t=this.updateEdgeType()||t,this._setInteractionWidths(),this.connect(),t}}},{key:"getFormattingValues",value:function(){var e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,t=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,r=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,a=this.options.color.inherit,o={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:r,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:t,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:a?void 0:this.options.color.color,inheritsColor:a,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){var s=this.options.selectionWidth;typeof s=="function"?o.width=s(o.width):typeof s=="number"&&(o.width+=s),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.highlight,o.shadow=this.options.shadow.enabled}else if(this.hover){var u=this.options.hoverWidth;typeof u=="function"?o.width=u(o.width):typeof u=="number"&&(o.width+=u),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.hover,o.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(o,this.options.id,this.selected,this.hover),o.color!==void 0&&(o.inheritsColor=!1),o.shadow===!1&&(o.shadowColor!==this.options.shadow.color||o.shadowSize!==this.options.shadow.size||o.shadowX!==this.options.shadow.x||o.shadowY!==this.options.shadow.y)&&(o.shadow=!0));else o.shadow=this.options.shadow.enabled,o.width=Math.max(o.width,.3/this.body.view.scale);return o}},{key:"updateLabelModule",value:function(e){var t=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,t),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var e=this.options.smooth,t=!1,r=!0;return this.edgeType!==void 0&&((this.edgeType instanceof kb&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof Ob&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof Tb&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof Pb&&e.type.enabled===!1)&&(r=!1),r===!0&&(t=this.cleanup())),r===!0?e.enabled===!0?e.type==="dynamic"?(t=!0,this.edgeType=new kb(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new Ob(this.options,this.body,this.labelModule):this.edgeType=new Tb(this.options,this.body,this.labelModule):this.edgeType=new Pb(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),t}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(e,t,r){if(this.options.value!==void 0){var a=this.options.scaling.customScalingFunction(e,t,r,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var s=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+a*s}this.options.width=this.options.scaling.min+a*o}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(e){var t=this.getFormattingValues();if(!t.hidden){var r=this.edgeType.getViaNode();this.edgeType.drawLine(e,t,this.selected,this.hover,r),this.drawLabel(e,r)}}},{key:"drawArrows",value:function(e){var t=this.getFormattingValues();if(!t.hidden){var r=this.edgeType.getViaNode(),a={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,t.fromArrow&&(a.from=this.edgeType.getArrowData(e,"from",r,this.selected,this.hover,t),t.arrowStrikethrough===!1&&(this.edgeType.fromPoint=a.from.core),t.fromArrowSrc&&(a.from.image=this.imagelist.load(t.fromArrowSrc)),t.fromArrowImageWidth&&(a.from.imageWidth=t.fromArrowImageWidth),t.fromArrowImageHeight&&(a.from.imageHeight=t.fromArrowImageHeight)),t.toArrow&&(a.to=this.edgeType.getArrowData(e,"to",r,this.selected,this.hover,t),t.arrowStrikethrough===!1&&(this.edgeType.toPoint=a.to.core),t.toArrowSrc&&(a.to.image=this.imagelist.load(t.toArrowSrc)),t.toArrowImageWidth&&(a.to.imageWidth=t.toArrowImageWidth),t.toArrowImageHeight&&(a.to.imageHeight=t.toArrowImageHeight)),t.middleArrow&&(a.middle=this.edgeType.getArrowData(e,"middle",r,this.selected,this.hover,t),t.middleArrowSrc&&(a.middle.image=this.imagelist.load(t.middleArrowSrc)),t.middleArrowImageWidth&&(a.middle.imageWidth=t.middleArrowImageWidth),t.middleArrowImageHeight&&(a.middle.imageHeight=t.middleArrowImageHeight)),t.fromArrow&&this.edgeType.drawArrowHead(e,t,this.selected,this.hover,a.from),t.middleArrow&&this.edgeType.drawArrowHead(e,t,this.selected,this.hover,a.middle),t.toArrow&&this.edgeType.drawArrowHead(e,t,this.selected,this.hover,a.to)}}},{key:"drawLabel",value:function(e,t){if(this.options.label!==void 0){var r=this.from,a=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);var o;if(r.id!=a.id){this.labelModule.pointToSelf=!1,o=this.edgeType.getPoint(.5,t),e.save();var s=this._getRotation(e);s.angle!=0&&(e.translate(s.x,s.y),e.rotate(s.angle)),this.labelModule.draw(e,o.x,o.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;var u=Ym(e,this.options.selfReference.angle,this.options.selfReference.size,r);o=this._pointOnCircle(u.x,u.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,o.x,o.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(e){var t=[];if(this.labelModule.visible()){var r=this._getRotation();Kh(this.labelModule.getSize(),e,r)&&t.push({edgeId:this.id,labelId:0})}var a={left:e.x,top:e.y};return this.isOverlappingWith(a)&&t.push({edgeId:this.id}),t}},{key:"isOverlappingWith",value:function(e){if(this.connected){var t=10,r=this.from.x,a=this.from.y,o=this.to.x,s=this.to.y,u=e.left,l=e.top,h=this.edgeType.getDistanceToEdge(r,a,o,s,u,l);return h<t}else return!1}},{key:"_getRotation",value:function(e){var t=this.edgeType.getViaNode(),r=this.edgeType.getPoint(.5,t);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,r.x,r.y);var a={x:r.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return a;var o=this.from.y-this.to.y,s=this.from.x-this.to.x,u=Math.atan2(o,s);return(u<-1&&s<0||u>0&&s<0)&&(u+=Math.PI),a.angle=u,a}},{key:"_pointOnCircle",value:function(e,t,r,a){return{x:e+r*Math.cos(a),y:t-r*Math.sin(a)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}],[{key:"parseOptions",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,s=["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"];if(xn(s,e,t,r),t.endPointOffset!==void 0&&t.endPointOffset.from!==void 0&&(zi(t.endPointOffset.from)?e.endPointOffset.from=t.endPointOffset.from:(e.endPointOffset.from=a.endPointOffset.from!==void 0?a.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),t.endPointOffset!==void 0&&t.endPointOffset.to!==void 0&&(zi(t.endPointOffset.to)?e.endPointOffset.to=t.endPointOffset.to:(e.endPointOffset.to=a.endPointOffset.to!==void 0?a.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Xs(t.label)?e.label=t.label:Xs(e.label)||(e.label=void 0),jt(e,t,"smooth",a),jt(e,t,"shadow",a),jt(e,t,"background",a),t.dashes!==void 0&&t.dashes!==null?e.dashes=t.dashes:r===!0&&t.dashes===null&&(e.dashes=Ai(a.dashes)),t.scaling!==void 0&&t.scaling!==null?(t.scaling.min!==void 0&&(e.scaling.min=t.scaling.min),t.scaling.max!==void 0&&(e.scaling.max=t.scaling.max),jt(e.scaling,t.scaling,"label",a.scaling)):r===!0&&t.scaling===null&&(e.scaling=Ai(a.scaling)),t.arrows!==void 0&&t.arrows!==null)if(typeof t.arrows=="string"){var u=t.arrows.toLowerCase();e.arrows.to.enabled=ve(u).call(u,"to")!=-1,e.arrows.middle.enabled=ve(u).call(u,"middle")!=-1,e.arrows.from.enabled=ve(u).call(u,"from")!=-1}else if(Ee(t.arrows)==="object")jt(e.arrows,t.arrows,"to",a.arrows),jt(e.arrows,t.arrows,"middle",a.arrows),jt(e.arrows,t.arrows,"from",a.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Fa(t.arrows));else r===!0&&t.arrows===null&&(e.arrows=Ai(a.arrows));if(t.color!==void 0&&t.color!==null){var l=Jr(t.color)?{color:t.color,highlight:t.color,hover:t.color,inherit:!1,opacity:1}:t.color,h=e.color;if(o)ke(h,a.color,!1,r);else for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&delete h[f];if(Jr(h))h.color=h,h.highlight=h,h.hover=h,h.inherit=!1,l.opacity===void 0&&(h.opacity=1);else{var d=!1;l.color!==void 0&&(h.color=l.color,d=!0),l.highlight!==void 0&&(h.highlight=l.highlight,d=!0),l.hover!==void 0&&(h.hover=l.hover,d=!0),l.inherit!==void 0&&(h.inherit=l.inherit),l.opacity!==void 0&&(h.opacity=Math.min(1,Math.max(0,l.opacity))),d===!0?h.inherit=!1:h.inherit===void 0&&(h.inherit="from")}}else r===!0&&t.color===null&&(e.color=ei(a.color));r===!0&&t.font===null&&(e.font=ei(a.font)),Object.prototype.hasOwnProperty.call(t,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=t.selfReferenceSize)}}]),i}(),vj=function(){function i(n,e,t){var r,a=this;z(this,i),this.body=n,this.images=e,this.groups=t,this.body.functions.createEdge=B(r=this.create).call(r,this),this.edgesListeners={add:function(s,u){a.add(u.items)},update:function(s,u){a.update(u.items)},remove:function(s,u){a.remove(u.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,u,l,h){if(u===s)return .5;var f=1/(u-s);return Math.max(0,(h-s)*f)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},ke(this.options,this.defaultOptions),this.bindEventListeners()}return j(i,[{key:"bindEventListeners",value:function(){var e=this,t,r;this.body.emitter.on("_forceDisableDynamicCurves",function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;a==="dynamic"&&(a="continuous");var s=!1;for(var u in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,u)){var l=e.body.edges[u],h=e.body.data.edges.get(u);if(h!=null){var f=h.smooth;f!==void 0&&f.enabled===!0&&f.type==="dynamic"&&(a===void 0?l.setOptions({smooth:!1}):l.setOptions({smooth:{type:a}}),s=!0)}}o===!0&&s===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){e.reconnectEdges()}),this.body.emitter.on("refreshEdges",B(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",B(r=this.refresh).call(r,this)),this.body.emitter.on("destroy",function(){ue(e.edgesListeners,function(a,o){e.body.data.edges&&e.body.data.edges.off(o,a)}),delete e.body.functions.createEdge,delete e.edgesListeners.add,delete e.edgesListeners.update,delete e.edgesListeners.remove,delete e.edgesListeners})}},{key:"setOptions",value:function(e){if(e!==void 0){Mn.parseOptions(this.options,e,!0,this.defaultOptions,!0);var t=!1;if(e.smooth!==void 0)for(var r in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,r)&&(t=this.body.edges[r].updateEdgeType()||t);if(e.font!==void 0)for(var a in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,a)&&this.body.edges[a].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||t===!0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.body.data.edges;if(ml("id",e))this.body.data.edges=e;else if(me(e))this.body.data.edges=new Pr,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new Pr;else throw new TypeError("Array or DataSet expected");if(a&&ue(this.edgesListeners,function(s,u){a.off(u,s)}),this.body.edges={},this.body.data.edges){ue(this.edgesListeners,function(s,u){t.body.data.edges.on(u,s)});var o=this.body.data.edges.getIds();this.add(o,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.body.edges,a=this.body.data.edges,o=0;o<e.length;o++){var s=e[o],u=r[s];u&&u.disconnect();var l=a.get(s,{showInternalIds:!0});r[s]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),t===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(e){for(var t=this.body.edges,r=this.body.data.edges,a=!1,o=0;o<e.length;o++){var s=e[o],u=r.get(s),l=t[s];l!==void 0?(l.disconnect(),a=l.setOptions(u)||a,l.connect()):(this.body.edges[s]=this.create(u),a=!0)}a===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length!==0){var r=this.body.edges;ue(e,function(a){var o=r[a];o!==void 0&&o.remove()}),t&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var e=this;ue(this.body.edges,function(t,r){var a=e.body.data.edges.get(r);a!==void 0&&t.setOptions(a)})}},{key:"create",value:function(e){return new Mn(e,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var e,t=this.body.nodes,r=this.body.edges;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e].edges=[]);for(e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var a=r[e];a.from=null,a.to=null,a.connect()}}},{key:"getConnectedNodes",value:function(e){var t=[];if(this.body.edges[e]!==void 0){var r=this.body.edges[e];r.fromId!==void 0&&t.push(r.fromId),r.toId!==void 0&&t.push(r.toId)}return t}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var e=this,t=[];ue(this.body.edges,function(r,a){var o=e.body.nodes[r.toId],s=e.body.nodes[r.fromId];o!==void 0&&o.isCluster===!0||s!==void 0&&s.isCluster===!0||(o===void 0||s===void 0)&&t.push(a)}),this.remove(t,!1)}},{key:"_addMissingEdges",value:function(){var e=this.body.data.edges;if(e!=null){var t=this.body.edges,r=[];Se(e).call(e,function(a,o){var s=t[o];s===void 0&&r.push(o)}),this.add(r,!0)}}}]),i}(),Ib=function(){function i(n,e,t){z(this,i),this.body=n,this.physicsBody=e,this.barnesHutTree,this.setOptions(t),this._rng=Vs("BARNES HUT SOLVER")}return j(i,[{key:"setOptions",value:function(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){var e,t=this.body.nodes,r=this.physicsBody.physicsNodeIndices,a=r.length,o=this._formBarnesHutTree(t,r);this.barnesHutTree=o;for(var s=0;s<a;s++)e=t[r[s]],e.options.mass>0&&this._getForceContributions(o.root,e)}}},{key:"_getForceContributions",value:function(e,t){this._getForceContribution(e.children.NW,t),this._getForceContribution(e.children.NE,t),this._getForceContribution(e.children.SW,t),this._getForceContribution(e.children.SE,t)}},{key:"_getForceContribution",value:function(e,t){if(e.childrenCount>0){var r=e.centerOfMass.x-t.x,a=e.centerOfMass.y-t.y,o=Math.sqrt(r*r+a*a);o*e.calcSize>this.thetaInversed?this._calculateForces(o,r,a,t,e):e.childrenCount===4?this._getForceContributions(e,t):e.children.data.id!=t.id&&this._calculateForces(o,r,a,t,e)}}},{key:"_calculateForces",value:function(e,t,r,a,o){e===0&&(e=.1,t=e),this.overlapAvoidanceFactor<1&&a.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*a.shape.radius,e-a.shape.radius));var s=this.options.gravitationalConstant*o.mass*a.options.mass/Math.pow(e,3),u=t*s,l=r*s;this.physicsBody.forces[a.id].x+=u,this.physicsBody.forces[a.id].y+=l}},{key:"_formBarnesHutTree",value:function(e,t){for(var r,a=t.length,o=e[t[0]].x,s=e[t[0]].y,u=e[t[0]].x,l=e[t[0]].y,h=1;h<a;h++){var f=e[t[h]],d=f.x,c=f.y;f.options.mass>0&&(d<o&&(o=d),d>u&&(u=d),c<s&&(s=c),c>l&&(l=c))}var v=Math.abs(u-o)-Math.abs(l-s);v>0?(s-=.5*v,l+=.5*v):(o+=.5*v,u-=.5*v);var m=1e-5,w=Math.max(m,Math.abs(u-o)),g=.5*w,E=.5*(o+u),_=.5*(s+l),S={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:E-g,maxX:E+g,minY:_-g,maxY:_+g},size:w,calcSize:1/w,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(S.root);for(var k=0;k<a;k++)r=e[t[k]],r.options.mass>0&&this._placeInTree(S.root,r);return S}},{key:"_updateBranchMass",value:function(e,t){var r=e.centerOfMass,a=e.mass+t.options.mass,o=1/a;r.x=r.x*e.mass+t.x*t.options.mass,r.x*=o,r.y=r.y*e.mass+t.y*t.options.mass,r.y*=o,e.mass=a;var s=Math.max(Math.max(t.height,t.radius),t.width);e.maxWidth=e.maxWidth<s?s:e.maxWidth}},{key:"_placeInTree",value:function(e,t,r){(r!=!0||r===void 0)&&this._updateBranchMass(e,t);var a=e.children.NW.range,o;a.maxX>t.x?a.maxY>t.y?o="NW":o="SW":a.maxY>t.y?o="NE":o="SE",this._placeInRegion(e,t,o)}},{key:"_placeInRegion",value:function(e,t,r){var a=e.children[r];switch(a.childrenCount){case 0:a.children.data=t,a.childrenCount=1,this._updateBranchMass(a,t);break;case 1:a.children.data.x===t.x&&a.children.data.y===t.y?(t.x+=this._rng(),t.y+=this._rng()):(this._splitBranch(a),this._placeInTree(a,t));break;case 4:this._placeInTree(a,t);break}}},{key:"_splitBranch",value:function(e){var t=null;e.childrenCount===1&&(t=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),t!=null&&this._placeInTree(e,t)}},{key:"_insertRegion",value:function(e,t){var r,a,o,s,u=.5*e.size;switch(t){case"NW":r=e.range.minX,a=e.range.minX+u,o=e.range.minY,s=e.range.minY+u;break;case"NE":r=e.range.minX+u,a=e.range.maxX,o=e.range.minY,s=e.range.minY+u;break;case"SW":r=e.range.minX,a=e.range.minX+u,o=e.range.minY+u,s=e.range.maxY;break;case"SE":r=e.range.minX+u,a=e.range.maxX,o=e.range.minY+u,s=e.range.maxY;break}e.children[t]={centerOfMass:{x:0,y:0},mass:0,range:{minX:r,maxX:a,minY:o,maxY:s},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}},{key:"_debug",value:function(e,t){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,t))}},{key:"_drawBranch",value:function(e,t,r){r===void 0&&(r="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,t),this._drawBranch(e.children.NE,t),this._drawBranch(e.children.SE,t),this._drawBranch(e.children.SW,t)),t.strokeStyle=r,t.beginPath(),t.moveTo(e.range.minX,e.range.minY),t.lineTo(e.range.maxX,e.range.minY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.minY),t.lineTo(e.range.maxX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.maxY),t.lineTo(e.range.minX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.minX,e.range.maxY),t.lineTo(e.range.minX,e.range.minY),t.stroke()}}]),i}(),pj=function(){function i(n,e,t){z(this,i),this._rng=Vs("REPULSION SOLVER"),this.body=n,this.physicsBody=e,this.setOptions(t)}return j(i,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,r,a,o,s,u,l,h=this.body.nodes,f=this.physicsBody.physicsNodeIndices,d=this.physicsBody.forces,c=this.options.nodeDistance,v=-2/3/c,m=4/3,w=0;w<f.length-1;w++){u=h[f[w]];for(var g=w+1;g<f.length;g++)l=h[f[g]],e=l.x-u.x,t=l.y-u.y,r=Math.sqrt(e*e+t*t),r===0&&(r=.1*this._rng(),e=r),r<2*c&&(r<.5*c?s=1:s=v*r+m,s=s/r,a=e*s,o=t*s,d[u.id].x-=a,d[u.id].y-=o,d[l.id].x+=a,d[l.id].y+=o)}}}]),i}(),gj=function(){function i(n,e,t){z(this,i),this.body=n,this.physicsBody=e,this.setOptions(t)}return j(i,[{key:"setOptions",value:function(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var e=this.body.nodes,t=this.physicsBody.physicsNodeIndices,r=this.physicsBody.forces,a=this.options.nodeDistance,o=0;o<t.length-1;o++)for(var s=e[t[o]],u=o+1;u<t.length;u++){var l=e[t[u]];if(s.level===l.level){var h=a+this.overlapAvoidanceFactor*((s.shape.radius||0)/2+(l.shape.radius||0)/2),f=l.x-s.x,d=l.y-s.y,c=Math.sqrt(f*f+d*d),v=.05,m=void 0;c<h?m=-Math.pow(v*c,2)+Math.pow(v*h,2):m=0,c!==0&&(m=m/c);var w=f*m,g=d*m;r[s.id].x-=w,r[s.id].y-=g,r[l.id].x+=w,r[l.id].y+=g}}}}]),i}(),Jh=function(){function i(n,e,t){z(this,i),this.body=n,this.physicsBody=e,this.setOptions(t)}return j(i,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,r=this.physicsBody.physicsEdgeIndices,a=this.body.edges,o,s,u,l=0;l<r.length;l++)t=a[r[l]],t.connected===!0&&t.toId!==t.fromId&&this.body.nodes[t.toId]!==void 0&&this.body.nodes[t.fromId]!==void 0&&(t.edgeType.via!==void 0?(e=t.options.length===void 0?this.options.springLength:t.options.length,o=t.to,s=t.edgeType.via,u=t.from,this._calculateSpringForce(o,s,.5*e),this._calculateSpringForce(s,u,.5*e)):(e=t.options.length===void 0?this.options.springLength*1.5:t.options.length,this._calculateSpringForce(t.from,t.to,e)))}},{key:"_calculateSpringForce",value:function(e,t,r){var a=e.x-t.x,o=e.y-t.y,s=Math.max(Math.sqrt(a*a+o*o),.01),u=this.options.springConstant*(r-s)/s,l=a*u,h=o*u;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=l,this.physicsBody.forces[e.id].y+=h),this.physicsBody.forces[t.id]!==void 0&&(this.physicsBody.forces[t.id].x-=l,this.physicsBody.forces[t.id].y-=h)}}]),i}(),yj=function(){function i(n,e,t){z(this,i),this.body=n,this.physicsBody=e,this.setOptions(t)}return j(i,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,r,a,o,s,u,l,h=this.body.edges,f=.5,d=this.physicsBody.physicsEdgeIndices,c=this.physicsBody.physicsNodeIndices,v=this.physicsBody.forces,m=0;m<c.length;m++){var w=c[m];v[w].springFx=0,v[w].springFy=0}for(var g=0;g<d.length;g++)t=h[d[g]],t.connected===!0&&(e=t.options.length===void 0?this.options.springLength:t.options.length,r=t.from.x-t.to.x,a=t.from.y-t.to.y,l=Math.sqrt(r*r+a*a),l=l===0?.01:l,u=this.options.springConstant*(e-l)/l,o=r*u,s=a*u,t.to.level!=t.from.level?(v[t.toId]!==void 0&&(v[t.toId].springFx-=o,v[t.toId].springFy-=s),v[t.fromId]!==void 0&&(v[t.fromId].springFx+=o,v[t.fromId].springFy+=s)):(v[t.toId]!==void 0&&(v[t.toId].x-=f*o,v[t.toId].y-=f*s),v[t.fromId]!==void 0&&(v[t.fromId].x+=f*o,v[t.fromId].y+=f*s)));u=1;for(var E,_,S=0;S<c.length;S++){var k=c[S];E=Math.min(u,Math.max(-u,v[k].springFx)),_=Math.min(u,Math.max(-u,v[k].springFy)),v[k].x+=E,v[k].y+=_}for(var O=0,C=0,I=0;I<c.length;I++){var T=c[I];O+=v[T].x,C+=v[T].y}for(var P=O/c.length,R=C/c.length,W=0;W<c.length;W++){var G=c[W];v[G].x-=P,v[G].y-=R}}}]),i}(),Qs=function(){function i(n,e,t){z(this,i),this.body=n,this.physicsBody=e,this.setOptions(t)}return j(i,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,r,a,o=this.body.nodes,s=this.physicsBody.physicsNodeIndices,u=this.physicsBody.forces,l=0;l<s.length;l++){var h=s[l];a=o[h],e=-a.x,t=-a.y,r=Math.sqrt(e*e+t*t),this._calculateForces(r,e,t,u,a)}}},{key:"_calculateForces",value:function(e,t,r,a,o){var s=e===0?0:this.options.centralGravity/e;a[o.id].x=t*s,a[o.id].y=r*s}}]),i}();function bj(i){var n=mj();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function mj(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var wj=function(i){ge(e,i);var n=bj(e);function e(t,r,a){var o;return z(this,e),o=n.call(this,t,r,a),o._rng=Vs("FORCE ATLAS 2 BASED REPULSION SOLVER"),o}return j(e,[{key:"_calculateForces",value:function(r,a,o,s,u){r===0&&(r=.1*this._rng(),a=r),this.overlapAvoidanceFactor<1&&s.shape.radius&&(r=Math.max(.1+this.overlapAvoidanceFactor*s.shape.radius,r-s.shape.radius));var l=s.edges.length+1,h=this.options.gravitationalConstant*u.mass*s.options.mass*l/Math.pow(r,2),f=a*h,d=o*h;this.physicsBody.forces[s.id].x+=f,this.physicsBody.forces[s.id].y+=d}}]),e}(Ib);function Ej(i){var n=_j();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function _j(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var Sj=function(i){ge(e,i);var n=Ej(e);function e(t,r,a){return z(this,e),n.call(this,t,r,a)}return j(e,[{key:"_calculateForces",value:function(r,a,o,s,u){if(r>0){var l=u.edges.length+1,h=this.options.centralGravity*l*u.options.mass;s[u.id].x=a*h,s[u.id].y=o*h}}}]),e}(Qs),kj=function(){function i(n){z(this,i),this.body=n,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},je(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return j(i,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("initPhysics",function(){e.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){e.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){e.stopSimulation(),e.ready=!1}),this.body.emitter.on("disablePhysics",function(){e.physicsEnabled=!1,e.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){e.setOptions(e.options),e.ready===!0&&e.startSimulation()}),this.body.emitter.on("startSimulation",function(){e.ready===!0&&e.startSimulation()}),this.body.emitter.on("stopSimulation",function(){e.stopSimulation()}),this.body.emitter.on("destroy",function(){e.stopSimulation(!1),e.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){e.updatePhysicsData()})}},{key:"setOptions",value:function(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,Gs(["stabilization"],this.options,e),jt(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());var t=this.options.wind;t&&((typeof t.x!="number"||Vh(t.x))&&(t.x=0),(typeof t.y!="number"||Vh(t.y))&&(t.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new wj(this.body,this.physicsBody,e),this.edgesSolver=new Jh(this.body,this.physicsBody,e),this.gravitySolver=new Sj(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new pj(this.body,this.physicsBody,e),this.edgesSolver=new Jh(this.body,this.physicsBody,e),this.gravitySolver=new Qs(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new gj(this.body,this.physicsBody,e),this.edgesSolver=new yj(this.body,this.physicsBody,e),this.gravitySolver=new Qs(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new Ib(this.body,this.physicsBody,e),this.edgesSolver=new Jh(this.body,this.physicsBody,e),this.gravitySolver=new Qs(this.body,this.physicsBody,e)),this.modelOptions=e}},{key:"initPhysics",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=B(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var e=As();this.physicsTick();var t=As()-e;(t<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&lr(function(){e.body.emitter.emit("stabilized",{iterations:t}),e.startedStabilization=!1,e.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){var e=1.2;this._evaluateStepQuality()===!0?this.timestep=e*this.timestep:this.timestep/e<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/e))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),this.stabilized!==!0){if(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0){var e=this.adaptiveCounter%this.adaptiveInterval==0;e?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.physicsStep();this.stabilized===!0&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var e=this.body.nodes,t=this.body.edges;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[r].id);for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&t[a].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(t[a].id);for(var o=0;o<this.physicsBody.physicsNodeIndices.length;o++){var s=this.physicsBody.physicsNodeIndices[o];this.physicsBody.forces[s]={x:0,y:0},this.physicsBody.velocities[s]===void 0&&(this.physicsBody.velocities[s]={x:0,y:0})}for(var u in this.physicsBody.velocities)e[u]===void 0&&delete this.physicsBody.velocities[u]}},{key:"revert",value:function(){var e=De(this.previousStates),t=this.body.nodes,r=this.physicsBody.velocities;this.referenceState={};for(var a=0;a<e.length;a++){var o=e[a];t[o]!==void 0?t[o].options.physics===!0&&(this.referenceState[o]={positions:{x:t[o].x,y:t[o].y}},r[o].x=this.previousStates[o].vx,r[o].y=this.previousStates[o].vy,t[o].x=this.previousStates[o].x,t[o].y=this.previousStates[o].y):delete this.previousStates[o]}}},{key:"_evaluateStepQuality",value:function(){var e,t,r,a=this.body.nodes,o=this.referenceState,s=.3;for(var u in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,u)&&a[u]!==void 0&&(e=a[u].x-o[u].positions.x,t=a[u].y-o[u].positions.y,r=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),r>s))return!1;return!0}},{key:"moveNodes",value:function(){for(var e=this.physicsBody.physicsNodeIndices,t=0,r=0,a=5,o=0;o<e.length;o++){var s=e[o],u=this._performStep(s);t=Math.max(t,u),r+=u}this.adaptiveTimestepEnabled=r/e.length<a,this.stabilized=t<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(e,t,r){var a=this.modelOptions.damping*e,o=(t-a)/r;e+=o*this.timestep;var s=this.options.maxVelocity||1e9;return Math.abs(e)>s&&(e=e>0?s:-s),e}},{key:"_performStep",value:function(e){var t=this.body.nodes[e],r=this.physicsBody.forces[e];this.options.wind&&(r.x+=this.options.wind.x,r.y+=this.options.wind.y);var a=this.physicsBody.velocities[e];this.previousStates[e]={x:t.x,y:t.y,vx:a.x,vy:a.y},t.options.fixed.x===!1?(a.x=this.calculateComponentVelocity(a.x,r.x,t.options.mass),t.x+=a.x*this.timestep):(r.x=0,a.x=0),t.options.fixed.y===!1?(a.y=this.calculateComponentVelocity(a.y,r.y,t.options.mass),t.y+=a.y*this.timestep):(r.y=0,a.y=0);var o=Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2));return o}},{key:"_freezeNodes",value:function(){var e=this.body.nodes;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t].x&&e[t].y){var r=e[t].options.fixed;this.freezeCache[t]={x:r.x,y:r.y},r.x=!0,r.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var e=this.body.nodes;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.freezeCache[t]!==void 0&&(e[t].options.fixed.x=this.freezeCache[t].x,e[t].options.fixed.y=this.freezeCache[t].y);this.freezeCache={}}},{key:"stabilize",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof t!="number"&&(t=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",t)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=t,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,lr(function(){return e._stabilizationBatch()},0)}},{key:"_startStabilizing",value:function(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var e=this,t=function(){return e.stabilized===!1&&e.stabilizationIterations<e.targetIterations},r=function(){e.body.emitter.emit("stabilizationProgress",{iterations:e.stabilizationIterations,total:e.targetIterations})};this._startStabilizing()&&r();for(var a=0;t()&&a<this.options.stabilization.updateInterval;)this.physicsTick(),a++;if(r(),t()){var o;lr(B(o=this._stabilizationBatch).call(o,this),0)}else this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(e){for(var t=0;t<this.physicsBody.physicsNodeIndices.length;t++){var r=this.physicsBody.physicsNodeIndices[t],a=this.body.nodes[r],o=this.physicsBody.forces[r],s=20,u=.03,l=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.x,2)),h=Math.min(Math.max(5,l),15),f=3*h,d=Ah((180-Math.min(1,Math.max(0,u*l))*180)/360,1,1),c={x:a.x+s*o.x,y:a.y+s*o.y};e.lineWidth=h,e.strokeStyle=d,e.beginPath(),e.moveTo(a.x,a.y),e.lineTo(c.x,c.y),e.stroke();var v=Math.atan2(o.y,o.x);e.fillStyle=d,mb.draw(e,{type:"arrow",point:c,angle:v,length:f}),Ra(e).call(e)}}}]),i}(),Zs,Tj=new Uint8Array(16);function Oj(){if(!Zs&&(Zs=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Zs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zs(Tj)}var Pj=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ij(i){return typeof i=="string"&&Pj.test(i)}var rt=[];for(var ef=0;ef<256;++ef)rt.push((ef+256).toString(16).substr(1));function Cj(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(rt[i[n+0]]+rt[i[n+1]]+rt[i[n+2]]+rt[i[n+3]]+"-"+rt[i[n+4]]+rt[i[n+5]]+"-"+rt[i[n+6]]+rt[i[n+7]]+"-"+rt[i[n+8]]+rt[i[n+9]]+"-"+rt[i[n+10]]+rt[i[n+11]]+rt[i[n+12]]+rt[i[n+13]]+rt[i[n+14]]+rt[i[n+15]]).toLowerCase();if(!Ij(e))throw TypeError("Stringified UUID is invalid");return e}function ro(i,n,e){i=i||{};var t=i.random||(i.rng||Oj)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,n){e=e||0;for(var r=0;r<16;++r)n[e+r]=t[r];return n}return Cj(t)}var ct=function(){function i(){z(this,i)}return j(i,null,[{key:"getRange",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=1e9,a=-1e9,o=1e9,s=-1e9,u;if(t.length>0)for(var l=0;l<t.length;l++)u=e[t[l]],o>u.shape.boundingBox.left&&(o=u.shape.boundingBox.left),s<u.shape.boundingBox.right&&(s=u.shape.boundingBox.right),r>u.shape.boundingBox.top&&(r=u.shape.boundingBox.top),a<u.shape.boundingBox.bottom&&(a=u.shape.boundingBox.bottom);return o===1e9&&s===-1e9&&r===1e9&&a===-1e9&&(r=0,a=0,o=0,s=0),{minX:o,maxX:s,minY:r,maxY:a}}},{key:"getRangeCore",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=1e9,a=-1e9,o=1e9,s=-1e9,u;if(t.length>0)for(var l=0;l<t.length;l++)u=e[t[l]],o>u.x&&(o=u.x),s<u.x&&(s=u.x),r>u.y&&(r=u.y),a<u.y&&(a=u.y);return o===1e9&&s===-1e9&&r===1e9&&a===-1e9&&(r=0,a=0,o=0,s=0),{minX:o,maxX:s,minY:r,maxY:a}}},{key:"findCenter",value:function(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}},{key:"cloneOptions",value:function(e,t){var r={};return t===void 0||t==="node"?(ke(r,e.options,!0),r.x=e.x,r.y=e.y,r.amountOfConnections=e.edges.length):ke(r,e.options,!0),r}}]),i}();function Aj(i){var n=xj();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function xj(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var $j=function(i){ge(e,i);var n=Aj(e);function e(t,r,a,o,s,u){var l;return z(this,e),l=n.call(this,t,r,a,o,s,u),l.isCluster=!0,l.containedNodes={},l.containedEdges={},l}return j(e,[{key:"_openChildCluster",value:function(r){var a=this,o=this.body.nodes[r];if(this.containedNodes[r]===void 0)throw new Error("node with id: "+r+" not in current cluster");if(!o.isCluster)throw new Error("node with id: "+r+" is not a cluster");delete this.containedNodes[r],ue(o.edges,function(s){delete a.containedEdges[s.id]}),ue(o.containedNodes,function(s,u){a.containedNodes[u]=s}),o.containedNodes={},ue(o.containedEdges,function(s,u){a.containedEdges[u]=s}),o.containedEdges={},ue(o.edges,function(s){ue(a.edges,function(u){var l,h,f=ve(l=u.clusteringEdgeReplacingIds).call(l,s.id);f!==-1&&(ue(s.clusteringEdgeReplacingIds,function(d){u.clusteringEdgeReplacingIds.push(d),a.body.edges[d].edgeReplacedById=u.id}),$r(h=u.clusteringEdgeReplacingIds).call(h,f,1))})}),o.edges=[]}}]),e}(At),Dj=function(){function i(n){var e=this;z(this,i),this.body=n,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},je(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){e.clusteredNodes={},e.clusteredEdges={}})}return j(i,[{key:"clusterByHubsize",value:function(e,t){e===void 0?e=this._getHubSize():Ee(e)==="object"&&(t=this._checkOptions(e),e=this._getHubSize());for(var r=[],a=0;a<this.body.nodeIndices.length;a++){var o=this.body.nodes[this.body.nodeIndices[a]];o.edges.length>=e&&r.push(o.id)}for(var s=0;s<r.length;s++)this.clusterByConnection(r[s],t,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");t=this._checkOptions(t);var a={},o={};ue(this.body.nodes,function(s,u){s.options&&t.joinCondition(s.options)===!0&&(a[u]=s,ue(s.edges,function(l){e.clusteredEdges[l.id]===void 0&&(o[l.id]=l)}))}),this._cluster(a,o,t,r)}},{key:"clusterByEdgeCount",value:function(e,t){var r=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;t=this._checkOptions(t);for(var o=[],s={},u,l,h,f=function(m){var w={},g={},E=r.body.nodeIndices[m],_=r.body.nodes[E];if(s[E]===void 0){h=0,l=[];for(var S=0;S<_.edges.length;S++)u=_.edges[S],r.clusteredEdges[u.id]===void 0&&(u.toId!==u.fromId&&h++,l.push(u));if(h===e){for(var k=function(Q){if(t.joinCondition===void 0||t.joinCondition===null)return!0;var ee=ct.cloneOptions(Q);return t.joinCondition(ee)},O=!0,C=0;C<l.length;C++){u=l[C];var I=r._getConnectedId(u,E);if(k(_))g[u.id]=u,w[E]=_,w[I]=r.body.nodes[I],s[E]=!0;else{O=!1;break}}if(De(w).length>0&&De(g).length>0&&O===!0){var T=function(){for(var Q=0;Q<o.length;++Q)for(var ee in w)if(o[Q].nodes[ee]!==void 0)return o[Q]},P=T();if(P!==void 0){for(var R in w)P.nodes[R]===void 0&&(P.nodes[R]=w[R]);for(var W in g)P.edges[W]===void 0&&(P.edges[W]=g[W])}else o.push({nodes:w,edges:g})}}}},d=0;d<this.body.nodeIndices.length;d++)f(d);for(var c=0;c<o.length;c++)this._cluster(o[c].nodes,o[c].edges,t,!1);a===!0&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,t)}},{key:"clusterBridges",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,t)}},{key:"clusterByConnection",value:function(e,t){var r,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");var o=this.body.nodes[e];t=this._checkOptions(t,o),t.clusterNodeProperties.x===void 0&&(t.clusterNodeProperties.x=o.x),t.clusterNodeProperties.y===void 0&&(t.clusterNodeProperties.y=o.y),t.clusterNodeProperties.fixed===void 0&&(t.clusterNodeProperties.fixed={},t.clusterNodeProperties.fixed.x=o.options.fixed.x,t.clusterNodeProperties.fixed.y=o.options.fixed.y);var s={},u={},l=o.id,h=ct.cloneOptions(o);s[l]=o;for(var f=0;f<o.edges.length;f++){var d=o.edges[f];if(this.clusteredEdges[d.id]===void 0){var c=this._getConnectedId(d,l);if(this.clusteredNodes[c]===void 0)if(c!==l)if(t.joinCondition===void 0)u[d.id]=d,s[c]=this.body.nodes[c];else{var v=ct.cloneOptions(this.body.nodes[c]);t.joinCondition(h,v)===!0&&(u[d.id]=d,s[c]=this.body.nodes[c])}else u[d.id]=d}}var m=En(r=De(s)).call(r,function(S){return s[S].id});for(var w in s)if(!!Object.prototype.hasOwnProperty.call(s,w))for(var g=s[w],E=0;E<g.edges.length;E++){var _=g.edges[E];ve(m).call(m,this._getConnectedId(_,g.id))>-1&&(u[_.id]=_)}this._cluster(s,u,t,a)}},{key:"_createClusterEdges",value:function(e,t,r,a){for(var o,s,u,l,h,f,d=De(e),c=[],v=0;v<d.length;v++){s=d[v],u=e[s];for(var m=0;m<u.edges.length;m++)o=u.edges[m],this.clusteredEdges[o.id]===void 0&&(o.toId==o.fromId?t[o.id]=o:o.toId==s?(l=r.id,h=o.fromId,f=h):(l=o.toId,h=r.id,f=l),e[f]===void 0&&c.push({edge:o,fromId:h,toId:l}))}for(var w=[],g=function(C){for(var I=0;I<w.length;I++){var T=w[I],P=C.fromId===T.fromId&&C.toId===T.toId,R=C.fromId===T.toId&&C.toId===T.fromId;if(P||R)return T}return null},E=0;E<c.length;E++){var _=c[E],S=_.edge,k=g(_);k===null?(k=this._createClusteredEdge(_.fromId,_.toId,S,a),w.push(k)):k.clusteringEdgeReplacingIds.push(S.id),this.body.edges[S.id].edgeReplacedById=k.id,this._backupEdgeOptions(S),S.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}},{key:"_cluster",value:function(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&this.clusteredNodes[s]!==void 0&&o.push(s);for(var u=0;u<o.length;++u)delete e[o[u]];if(De(e).length!=0&&!(De(e).length==1&&r.clusterNodeProperties.allowSingleNodeCluster!=!0)){var l=ke({},r.clusterNodeProperties);if(r.processProperties!==void 0){var h=[];for(var f in e)if(Object.prototype.hasOwnProperty.call(e,f)){var d=ct.cloneOptions(e[f]);h.push(d)}var c=[];for(var v in t)if(Object.prototype.hasOwnProperty.call(t,v)&&v.substr(0,12)!=="clusterEdge:"){var m=ct.cloneOptions(t[v],"edge");c.push(m)}if(l=r.processProperties(l,h,c),!l)throw new Error("The processProperties function does not return properties!")}l.id===void 0&&(l.id="cluster:"+ro());var w=l.id;l.label===void 0&&(l.label="cluster");var g=void 0;l.x===void 0&&(g=this._getClusterPosition(e),l.x=g.x),l.y===void 0&&(g===void 0&&(g=this._getClusterPosition(e)),l.y=g.y),l.id=w;var E=this.body.functions.createNode(l,$j);E.containedNodes=e,E.containedEdges=t,E.clusterEdgeProperties=r.clusterEdgeProperties,this.body.nodes[l.id]=E,this._clusterEdges(e,t,l,r.clusterEdgeProperties),l.id=void 0,a===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}},{key:"_restoreEdge",value:function(e){var t=this.clusteredEdges[e.id];t!==void 0&&(e.setOptions({physics:t.physics}),delete this.clusteredEdges[e.id])}},{key:"isCluster",value:function(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(e){for(var t=De(e),r=e[t[0]].x,a=e[t[0]].x,o=e[t[0]].y,s=e[t[0]].y,u,l=1;l<t.length;l++)u=e[t[l]],r=u.x<r?u.x:r,a=u.x>a?u.x:a,o=u.y<o?u.y:o,s=u.y>s?u.y:s;return{x:.5*(r+a),y:.5*(o+s)}}},{key:"openCluster",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");var a=this.body.nodes[e];if(a===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(a.isCluster!==!0||a.containedNodes===void 0||a.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");var o=this.findNode(e),s=ve(o).call(o,e)-1;if(s>=0){var u=o[s],l=this.body.nodes[u];l._openChildCluster(e),delete this.body.nodes[e],r===!0&&this.body.emitter.emit("_dataChanged");return}var h=a.containedNodes,f=a.containedEdges;if(t!==void 0&&t.releaseFunction!==void 0&&typeof t.releaseFunction=="function"){var d={},c={x:a.x,y:a.y};for(var v in h)if(Object.prototype.hasOwnProperty.call(h,v)){var m=this.body.nodes[v];d[v]={x:m.x,y:m.y}}var w=t.releaseFunction(c,d);for(var g in h)if(Object.prototype.hasOwnProperty.call(h,g)){var E=this.body.nodes[g];w[g]!==void 0&&(E.x=w[g].x===void 0?a.x:w[g].x,E.y=w[g].y===void 0?a.y:w[g].y)}}else ue(h,function(F){F.options.fixed.x===!1&&(F.x=a.x),F.options.fixed.y===!1&&(F.y=a.y)});for(var _ in h)if(Object.prototype.hasOwnProperty.call(h,_)){var S=this.body.nodes[_];S.vx=a.vx,S.vy=a.vy,S.setOptions({physics:!0}),delete this.clusteredNodes[_]}for(var k=[],O=0;O<a.edges.length;O++)k.push(a.edges[O]);for(var C=0;C<k.length;C++){for(var I=k[C],T=this._getConnectedId(I,e),P=this.clusteredNodes[T],R=0;R<I.clusteringEdgeReplacingIds.length;R++){var W=I.clusteringEdgeReplacingIds[R],G=this.body.edges[W];if(G!==void 0)if(P!==void 0){var Q=this.body.nodes[P.clusterId];Q.containedEdges[G.id]=G,delete f[G.id];var ee=G.fromId,te=G.toId;G.toId==T?te=P.clusterId:ee=P.clusterId,this._createClusteredEdge(ee,te,G,Q.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(G)}I.remove()}for(var le in f)Object.prototype.hasOwnProperty.call(f,le)&&this._restoreEdge(f[le]);delete this.body.nodes[e],r===!0&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(e){var t=[];if(this.isCluster(e)===!0){var r=this.body.nodes[e].containedNodes;for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&t.push(this.body.nodes[a].id)}return t}},{key:"findNode",value:function(e){for(var t=[],r=100,a=0,o;this.clusteredNodes[e]!==void 0&&a<r;){if(o=this.body.nodes[e],o===void 0)return[];t.push(o.id),e=this.clusteredNodes[e].clusterId,a++}return o=this.body.nodes[e],o===void 0?[]:(t.push(o.id),xi(t).call(t),t)}},{key:"updateClusteredNode",value:function(e,t){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(t===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(t),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(e,t){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(t===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var r=this.getClusteredEdges(e),a=0;a<r.length;a++){var o=this.body.edges[r[a]];o.setOptions(t)}this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(e){for(var t=[],r=100,a=0;e!==void 0&&this.body.edges[e]!==void 0&&a<r;)t.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,a++;return xi(t).call(t),t}},{key:"getBaseEdge",value:function(e){return this.getBaseEdges(e)[0]}},{key:"getBaseEdges",value:function(e){for(var t=[e],r=[],a=[],o=100,s=0;t.length>0&&s<o;){var u=t.pop();if(u!==void 0){var l=this.body.edges[u];if(l!==void 0){s++;var h=l.clusteringEdgeReplacingIds;if(h===void 0)a.push(u);else for(var f=0;f<h.length;++f){var d=h[f];ve(t).call(t,h)!==-1||ve(r).call(r,h)!==-1||t.push(d)}r.push(u)}}}return a}},{key:"_getConnectedId",value:function(e,t){return e.toId!=t?e.toId:(e.fromId!=t,e.fromId)}},{key:"_getHubSize",value:function(){for(var e=0,t=0,r=0,a=0,o=0;o<this.body.nodeIndices.length;o++){var s=this.body.nodes[this.body.nodeIndices[o]];s.edges.length>a&&(a=s.edges.length),e+=s.edges.length,t+=Math.pow(s.edges.length,2),r+=1}e=e/r,t=t/r;var u=t-Math.pow(e,2),l=Math.sqrt(u),h=Math.floor(e+2*l);return h>a&&(h=a),h}},{key:"_createClusteredEdge",value:function(e,t,r,a,o){var s=ct.cloneOptions(r,"edge");ke(s,a),s.from=e,s.to=t,s.id="clusterEdge:"+ro(),o!==void 0&&ke(s,o);var u=this.body.functions.createEdge(s);return u.clusteringEdgeReplacingIds=[r.id],u.connect(),this.body.edges[u.id]=u,u}},{key:"_clusterEdges",value:function(e,t,r,a){if(t instanceof Mn){var o=t,s={};s[o.id]=o,t=s}if(e instanceof At){var u=e,l={};l[u.id]=u,e=l}if(r==null)throw new Error("_clusterEdges: parameter clusterNode required");a===void 0&&(a=r.clusterEdgeProperties),this._createClusterEdges(e,t,r,a);for(var h in t)if(Object.prototype.hasOwnProperty.call(t,h)&&this.body.edges[h]!==void 0){var f=this.body.edges[h];this._backupEdgeOptions(f),f.setOptions({physics:!1})}for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(this.clusteredNodes[d]={clusterId:r.id,node:this.body.nodes[d]},this.body.nodes[d].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(e){if(e!==void 0){var t=this.clusteredNodes[e];if(t!==void 0){var r=t.clusterId;if(r!==void 0)return this.body.nodes[r]}}}},{key:"_filter",value:function(e,t){var r=[];return ue(e,function(a){t(a)&&r.push(a)}),r}},{key:"_updateState",value:function(){var e=this,t,r=[],a={},o=function(v){ue(e.body.nodes,function(m){m.isCluster===!0&&v(m)})};for(t in this.clusteredNodes)if(!!Object.prototype.hasOwnProperty.call(this.clusteredNodes,t)){var s=this.body.nodes[t];s===void 0&&r.push(t)}o(function(c){for(var v=0;v<r.length;v++)delete c.containedNodes[r[v]]});for(var u=0;u<r.length;u++)delete this.clusteredNodes[r[u]];ue(this.clusteredEdges,function(c){var v=e.body.edges[c];(v===void 0||!v.endPointsValid())&&(a[c]=c)}),o(function(c){ue(c.containedEdges,function(v,m){!v.endPointsValid()&&!a[m]&&(a[m]=m)})}),ue(this.body.edges,function(c,v){var m=!0,w=c.clusteringEdgeReplacingIds;if(w!==void 0){var g=0;ue(w,function(E){var _=e.body.edges[E];_!==void 0&&_.endPointsValid()&&(g+=1)}),m=g>0}(!c.endPointsValid()||!m)&&(a[v]=v)}),o(function(c){ue(a,function(v){delete c.containedEdges[v],ue(c.edges,function(m,w){if(m.id===v){c.edges[w]=null;return}m.clusteringEdgeReplacingIds=e._filter(m.clusteringEdgeReplacingIds,function(g){return!a[g]})}),c.edges=e._filter(c.edges,function(m){return m!==null})})}),ue(a,function(c){delete e.clusteredEdges[c]}),ue(a,function(c){delete e.body.edges[c]});var l=De(this.body.edges);ue(l,function(c){var v=e.body.edges[c],m=e._isClusteredNode(v.fromId)||e._isClusteredNode(v.toId);if(m!==e._isClusteredEdge(v.id))if(m){var w=e._getClusterNodeForNode(v.fromId);w!==void 0&&e._clusterEdges(e.body.nodes[v.fromId],v,w);var g=e._getClusterNodeForNode(v.toId);g!==void 0&&e._clusterEdges(e.body.nodes[v.toId],v,g)}else delete e._clusterEdges[c],e._restoreEdge(v)});for(var h=!1,f=!0,d=function(){var v=[];o(function(w){var g=De(w.containedNodes).length,E=w.options.allowSingleNodeCluster===!0;(E&&g<1||!E&&g<2)&&v.push(w.id)});for(var m=0;m<v.length;++m)e.openCluster(v[m],{},!1);f=v.length>0,h=h||f};f;)d();h&&this._updateState()}},{key:"_isClusteredNode",value:function(e){return this.clusteredNodes[e]!==void 0}},{key:"_isClusteredEdge",value:function(e){return this.clusteredEdges[e]!==void 0}}]),i}();function Fj(i,n){var e=typeof Ar!="undefined"&&or(i)||i["@@iterator"];if(!e){if(me(i)||(e=Mj(i))||n&&i&&typeof i.length=="number"){e&&(i=e);var t=0,r=function(){};return{s:r,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(i)},n:function(){var l=e.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Mj(i,n){var e;if(!!i){if(typeof i=="string")return Cb(i,n);var t=Je(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Ur(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Cb(i,n)}}function Cb(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}function Rj(){var i;window!==void 0&&(i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),i===void 0?window.requestAnimationFrame=function(n){n()}:window.requestAnimationFrame=i}var Nj=function(){function i(n,e){z(this,i),Rj(),this.body=n,this.canvas=e,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},je(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return j(i,[{key:"bindEventListeners",value:function(){var e=this,t;this.body.emitter.on("dragStart",function(){e.dragging=!0}),this.body.emitter.on("dragEnd",function(){e.dragging=!1}),this.body.emitter.on("zoom",function(){e.zooming=!0,window.clearTimeout(e.zoomTimeoutId),e.zoomTimeoutId=lr(function(){var r;e.zooming=!1,B(r=e._requestRedraw).call(r,e)()},250)}),this.body.emitter.on("_resizeNodes",function(){e._resizeNodes()}),this.body.emitter.on("_redraw",function(){e.renderingActive===!1&&e._redraw()}),this.body.emitter.on("_blockRedraw",function(){e.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){e.allowRedraw=!0,e.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",B(t=this._requestRedraw).call(t,this)),this.body.emitter.on("_startRendering",function(){e.renderRequests+=1,e.renderingActive=!0,e._startRendering()}),this.body.emitter.on("_stopRendering",function(){e.renderRequests-=1,e.renderingActive=e.renderRequests>0,e.renderTimer=void 0}),this.body.emitter.on("destroy",function(){e.renderRequests=0,e.allowRedraw=!1,e.renderingActive=!1,e.requiresTimeout===!0?clearTimeout(e.renderTimer):window.cancelAnimationFrame(e.renderTimer),e.body.emitter.off()})}},{key:"setOptions",value:function(e){if(e!==void 0){var t=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"];xn(t,this.options,e)}}},{key:"_requestNextFrame",value:function(e,t){if(typeof window!="undefined"){var r,a=window;return this.requiresTimeout===!0?r=lr(e,t):a.requestAnimationFrame&&(r=a.requestAnimationFrame(e)),r}}},{key:"_startRendering",value:function(){if(this.renderingActive===!0&&this.renderTimer===void 0){var e;this.renderTimer=this._requestNextFrame(B(e=this._renderStep).call(e,this),this.simulationInterval)}}},{key:"_renderStep",value:function(){this.renderingActive===!0&&(this.renderTimer=void 0,this.requiresTimeout===!0&&this._startRendering(),this._redraw(),this.requiresTimeout===!1&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var e=this;this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,this._requestNextFrame(function(){e._redraw(!1)},0))}},{key:"_redraw",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var t={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();var r=this.canvas.getContext(),a=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(r.clearRect(0,0,a,o),this.canvas.frame.clientWidth===0)return;if(r.save(),r.translate(this.body.view.translation.x,this.body.view.translation.y),r.scale(this.body.view.scale,this.body.view.scale),r.beginPath(),this.body.emitter.emit("beforeDrawing",r),r.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(r),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){var s=this._drawNodes(r,e),u=s.drawExternalLabels;t.drawExternalLabels=u}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(r),t.drawExternalLabels!=null&&t.drawExternalLabels(),e===!1&&this._drawSelectionBox(r),r.beginPath(),this.body.emitter.emit("afterDrawing",r),r.closePath(),r.restore(),e===!0&&r.clearRect(0,0,a,o)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);var t=this.body.nodes,r;for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r=t[a],r.resize(e),r.updateBoundingBox(e,r.selected));e.restore()}},{key:"_drawNodes",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.body.nodes,a=this.body.nodeIndices,o,s=[],u=[],l=20,h=this.canvas.DOMtoCanvas({x:-l,y:-l}),f=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+l,y:this.canvas.frame.canvas.clientHeight+l}),d={top:h.y,left:h.x,bottom:f.y,right:f.x},c=[],v=0;v<a.length;v++)if(o=r[a[v]],o.hover)u.push(a[v]);else if(o.isSelected())s.push(a[v]);else if(t===!0){var m=o.draw(e);m.drawExternalLabel!=null&&c.push(m.drawExternalLabel)}else if(o.isBoundingBoxOverlappingWith(d)===!0){var w=o.draw(e);w.drawExternalLabel!=null&&c.push(w.drawExternalLabel)}else o.updateBoundingBox(e,o.selected);var g,E=s.length,_=u.length;for(g=0;g<E;g++){o=r[s[g]];var S=o.draw(e);S.drawExternalLabel!=null&&c.push(S.drawExternalLabel)}for(g=0;g<_;g++){o=r[u[g]];var k=o.draw(e);k.drawExternalLabel!=null&&c.push(k.drawExternalLabel)}return{drawExternalLabels:function(){var C=Fj(c),I;try{for(C.s();!(I=C.n()).done;){var T=I.value;T()}}catch(P){C.e(P)}finally{C.f()}}}}},{key:"_drawEdges",value:function(e){for(var t=this.body.edges,r=this.body.edgeIndices,a=0;a<r.length;a++){var o=t[r[a]];o.connected===!0&&o.draw(e)}}},{key:"_drawArrows",value:function(e){for(var t=this.body.edges,r=this.body.edgeIndices,a=0;a<r.length;a++){var o=t[r[a]];o.connected===!0&&o.drawArrows(e)}}},{key:"_determineBrowserMethod",value:function(){if(typeof window!="undefined"){var e=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,ve(e).call(e,"msie 9.0")!=-1?this.requiresTimeout=!0:ve(e).call(e,"safari")!=-1&&ve(e).call(e,"chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(e){if(this.body.selectionBox.show){e.beginPath();var t=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,r=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,t,r),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,t,r),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}}]),i}(),Bj=ce,Lj=Bj.setInterval,zj=Lj;function Js(i,n){n.inputHandler=function(e){e.isFirst&&n(e)},i.on("hammer.input",n.inputHandler)}function xb(i,n){return n.inputHandler=function(e){e.isFinal&&n(e)},i.on("hammer.input",n.inputHandler)}var jj=function(){function i(n){z(this,i),this.body=n,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},je(this.options,this.defaultOptions),this.bindEventListeners()}return j(i,[{key:"bindEventListeners",value:function(){var e=this,t;this.body.emitter.once("resize",function(r){r.width!==0&&(e.body.view.translation.x=r.width*.5),r.height!==0&&(e.body.view.translation.y=r.height*.5)}),this.body.emitter.on("setSize",B(t=this.setSize).call(t,this)),this.body.emitter.on("destroy",function(){e.hammerFrame.destroy(),e.hammer.destroy(),e._cleanUp()})}},{key:"setOptions",value:function(e){var t=this;if(e!==void 0){var r=["width","height","autoResize"];xn(r,this.options,e)}if(this._cleanUp(),this.options.autoResize===!0){var a;if(window.ResizeObserver){var o=new ResizeObserver(function(){var h=t.setSize();h===!0&&t.body.emitter.emit("_requestRedraw")}),s=this.frame;o.observe(s),this._cleanupCallbacks.push(function(){o.unobserve(s)})}else{var u=zj(function(){var h=t.setSize();h===!0&&t.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(function(){clearInterval(u)})}var l=B(a=this._onResize).call(a,this);nN(window,"resize",l),this._cleanupCallbacks.push(function(){aN(window,"resize",l)})}}},{key:"_cleanUp",value:function(){var e,t,r;Se(e=xi(t=$r(r=this._cleanupCallbacks).call(r,0)).call(t)).call(e,function(a){try{a()}catch(o){console.error(o)}})}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}},{key:"_setCameraState",value:function(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,t=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,r=this.cameraState.scale;e!=1&&t!=1?r=this.cameraState.scale*.5*(e+t):e!=1?r=this.cameraState.scale*e:t!=1&&(r=this.cameraState.scale*t),this.body.view.scale=r;var a=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),o={x:a.x-this.cameraState.position.x,y:a.y-this.cameraState.position.y};this.body.view.translation.x+=o.x*this.body.view.scale,this.body.view.translation.y+=o.y*this.body.view.scale}}},{key:"_prepareValue",value:function(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(ve(e).call(e,"%")!==-1||ve(e).call(e,"px")!==-1)return e;if(ve(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var e=this;this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new An(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:An.DIRECTION_ALL}),Js(this.hammer,function(t){e.body.eventListeners.onTouch(t)}),this.hammer.on("tap",function(t){e.body.eventListeners.onTap(t)}),this.hammer.on("doubletap",function(t){e.body.eventListeners.onDoubleTap(t)}),this.hammer.on("press",function(t){e.body.eventListeners.onHold(t)}),this.hammer.on("panstart",function(t){e.body.eventListeners.onDragStart(t)}),this.hammer.on("panmove",function(t){e.body.eventListeners.onDrag(t)}),this.hammer.on("panend",function(t){e.body.eventListeners.onDragEnd(t)}),this.hammer.on("pinch",function(t){e.body.eventListeners.onPinch(t)}),this.frame.canvas.addEventListener("wheel",function(t){e.body.eventListeners.onMouseWheel(t)}),this.frame.canvas.addEventListener("mousemove",function(t){e.body.eventListeners.onMouseMove(t)}),this.frame.canvas.addEventListener("contextmenu",function(t){e.body.eventListeners.onContext(t)}),this.hammerFrame=new An(this.frame),xb(this.hammerFrame,function(t){e.body.eventListeners.onRelease(t)})}},{key:"setSize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),t=this._prepareValue(t);var r=!1,a=this.frame.canvas.width,o=this.frame.canvas.height,s=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||t!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=t)this._getCameraState(s),this.frame.style.width=e,this.frame.style.height=t,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=t,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},r=!0;else{var u=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),l=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==u||this.frame.canvas.height!==l)&&this._getCameraState(s),this.frame.canvas.width!==u&&(this.frame.canvas.width=u,r=!0),this.frame.canvas.height!==l&&(this.frame.canvas.height=l,r=!0)}return r===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(a/this.pixelRatio),oldHeight:Math.round(o/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,r}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");var t=1;typeof window!="undefined"&&(t=window.devicePixelRatio||1);var r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/r}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(e){return(e-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(e){return e*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(e){return(e-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(e){return e*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}},{key:"DOMtoCanvas",value:function(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}]),i}();function Hj(i,n){var e=je({nodes:n,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},i??{});if(!me(e.nodes))throw new TypeError("Nodes has to be an array of ids.");if(e.nodes.length===0&&(e.nodes=n),!(typeof e.minZoomLevel=="number"&&e.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof e.maxZoomLevel=="number"&&e.minZoomLevel<=e.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return e}var Wj=function(){function i(n,e){var t,r=this,a;z(this,i),this.body=n,this.canvas=e,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",B(t=this.fit).call(t,this)),this.body.emitter.on("animationFinished",function(){r.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",B(a=this.releaseNode).call(a,this))}return j(i,[{key:"setOptions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}},{key:"fit",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=Hj(e,this.body.nodeIndices);var r=this.canvas.frame.canvas.clientWidth,a=this.canvas.frame.canvas.clientHeight,o,s;if(r===0||a===0)s=1,o=ct.getRange(this.body.nodes,e.nodes);else if(t===!0){var u=0;for(var l in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,l)){var h=this.body.nodes[l];h.predefinedPosition===!0&&(u+=1)}if(u>.5*this.body.nodeIndices.length){this.fit(e,!1);return}o=ct.getRange(this.body.nodes,e.nodes);var f=this.body.nodeIndices.length;s=12.662/(f+7.4147)+.0964822;var d=Math.min(r/600,a/600);s*=d}else{this.body.emitter.emit("_resizeNodes"),o=ct.getRange(this.body.nodes,e.nodes);var c=Math.abs(o.maxX-o.minX)*1.1,v=Math.abs(o.maxY-o.minY)*1.1,m=r/c,w=a/v;s=m<=w?m:w}s>e.maxZoomLevel?s=e.maxZoomLevel:s<e.minZoomLevel&&(s=e.minZoomLevel);var g=ct.findCenter(o),E={position:g,scale:s,animation:e.animation};this.moveTo(E)}},{key:"focus",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){var r={x:this.body.nodes[e].x,y:this.body.nodes[e].y};t.position=r,t.lockedOnNode=e,this.moveTo(t)}else console.error("Node: "+e+" cannot be found.")}},{key:"moveTo",value:function(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!zi(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!zi(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!zi(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!zi(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}},{key:"animateView",value:function(e){if(e!==void 0){this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;var t=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),r={x:t.x-e.position.x,y:t.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+r.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+r.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var a;this.viewFunction=B(a=this._lockedRedraw).call(a,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var o;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=B(o=this._transitionRedraw).call(o,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}}},{key:"_lockedRedraw",value:function(){var e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},t=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),r={x:t.x-e.x,y:t.y-e.y},a=this.body.view.translation,o={x:a.x+r.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:a.y+r.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=o}},{key:"releaseNode",value:function(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;var t=uN[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*t,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*t,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*t},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var r;this.viewFunction=B(r=this._lockedRedraw).call(r,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),i}();function Ab(i){var n=i&&i.preventDefault||!1,e=i&&i.container||window,t={},r={keydown:{},keyup:{}},a={},o;for(o=97;o<=122;o++)a[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)a[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)a[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)a["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)a["num"+o]={code:96+o,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a.delete={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var s=function(h){l(h,"keydown")},u=function(h){l(h,"keyup")},l=function(h,f){if(r[f][h.keyCode]!==void 0){for(var d=r[f][h.keyCode],c=0;c<d.length;c++)(d[c].shift===void 0||d[c].shift==!0&&h.shiftKey==!0||d[c].shift==!1&&h.shiftKey==!1)&&d[c].fn(h);n==!0&&h.preventDefault()}};return t.bind=function(h,f,d){if(d===void 0&&(d="keydown"),a[h]===void 0)throw new Error("unsupported key: "+h);r[d][a[h].code]===void 0&&(r[d][a[h].code]=[]),r[d][a[h].code].push({fn:f,shift:a[h].shift})},t.bindAll=function(h,f){f===void 0&&(f="keydown");for(var d in a)a.hasOwnProperty(d)&&t.bind(d,h,f)},t.getKey=function(h){for(var f in a)if(a.hasOwnProperty(f)){if(h.shiftKey==!0&&a[f].shift==!0&&h.keyCode==a[f].code)return f;if(h.shiftKey==!1&&a[f].shift==!1&&h.keyCode==a[f].code)return f;if(h.keyCode==a[f].code&&f=="shift")return f}return"unknown key, currently not supported"},t.unbind=function(h,f,d){if(d===void 0&&(d="keydown"),a[h]===void 0)throw new Error("unsupported key: "+h);if(f!==void 0){var c=[],v=r[d][a[h].code];if(v!==void 0)for(var m=0;m<v.length;m++)v[m].fn==f&&v[m].shift==a[h].shift||c.push(r[d][a[h].code][m]);r[d][a[h].code]=c}else r[d][a[h].code]=[]},t.reset=function(){r={keydown:{},keyup:{}}},t.destroy=function(){r={keydown:{},keyup:{}},e.removeEventListener("keydown",s,!0),e.removeEventListener("keyup",u,!0)},e.addEventListener("keydown",s,!0),e.addEventListener("keyup",u,!0),t}var Uj=function(){function i(n,e){var t=this;z(this,i),this.body=n,this.canvas=e,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){t.activated=!0,t.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){t.activated=!1,t.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){t.keycharm!==void 0&&t.keycharm.destroy()}),this.options={}}return j(i,[{key:"setOptions",value:function(e){e!==void 0&&(this.options=e,this.create())}},{key:"create",value:function(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(this.navigationHammers.length!=0){for(var e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var e=this;this.cleanNavigation(),this.navigationDOM={};var t=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var a=0;a<t.length;a++){this.navigationDOM[t[a]]=document.createElement("div"),this.navigationDOM[t[a]].className="vis-button vis-"+t[a],this.navigationDOM.wrapper.appendChild(this.navigationDOM[t[a]]);var o=new An(this.navigationDOM[t[a]]);if(r[a]==="_fit"){var s;Js(o,B(s=this._fit).call(s,this))}else{var u;Js(o,B(u=this.bindToRedraw).call(u,this,r[a]))}this.navigationHammers.push(o)}var l=new An(this.canvas.frame);xb(l,function(){e._stopMovement()}),this.navigationHammers.push(l),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(e){if(this.boundFunctions[e]===void 0){var t;this.boundFunctions[e]=B(t=this[e]).call(t,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}},{key:"unbindFromRedraw",value:function(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}},{key:"_fit",value:function(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}},{key:"_stopMovement",value:function(){for(var e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var e=this.body.view.scale,t=this.body.view.scale*(1+this.options.keyboard.speed.zoom),r=this.body.view.translation,a=t/e,o=(1-a)*this.canvas.canvasViewCenter.x+r.x*a,s=(1-a)*this.canvas.canvasViewCenter.y+r.y*a;this.body.view.scale=t,this.body.view.translation={x:o,y:s},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var e=this.body.view.scale,t=this.body.view.scale/(1+this.options.keyboard.speed.zoom),r=this.body.view.translation,a=t/e,o=(1-a)*this.canvas.canvasViewCenter.x+r.x*a,s=(1-a)*this.canvas.canvasViewCenter.y+r.y*a;this.body.view.scale=t,this.body.view.translation={x:o,y:s},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var e=this;if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=Ab({container:window,preventDefault:!0}):this.keycharm=Ab({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var t,r,a,o,s,u,l,h,f,d,c,v,m,w,g,E,_,S,k,O,C,I,T,P;B(t=this.keycharm).call(t,"up",function(){e.bindToRedraw("_moveUp")},"keydown"),B(r=this.keycharm).call(r,"down",function(){e.bindToRedraw("_moveDown")},"keydown"),B(a=this.keycharm).call(a,"left",function(){e.bindToRedraw("_moveLeft")},"keydown"),B(o=this.keycharm).call(o,"right",function(){e.bindToRedraw("_moveRight")},"keydown"),B(s=this.keycharm).call(s,"=",function(){e.bindToRedraw("_zoomIn")},"keydown"),B(u=this.keycharm).call(u,"num+",function(){e.bindToRedraw("_zoomIn")},"keydown"),B(l=this.keycharm).call(l,"num-",function(){e.bindToRedraw("_zoomOut")},"keydown"),B(h=this.keycharm).call(h,"-",function(){e.bindToRedraw("_zoomOut")},"keydown"),B(f=this.keycharm).call(f,"[",function(){e.bindToRedraw("_zoomOut")},"keydown"),B(d=this.keycharm).call(d,"]",function(){e.bindToRedraw("_zoomIn")},"keydown"),B(c=this.keycharm).call(c,"pageup",function(){e.bindToRedraw("_zoomIn")},"keydown"),B(v=this.keycharm).call(v,"pagedown",function(){e.bindToRedraw("_zoomOut")},"keydown"),B(m=this.keycharm).call(m,"up",function(){e.unbindFromRedraw("_moveUp")},"keyup"),B(w=this.keycharm).call(w,"down",function(){e.unbindFromRedraw("_moveDown")},"keyup"),B(g=this.keycharm).call(g,"left",function(){e.unbindFromRedraw("_moveLeft")},"keyup"),B(E=this.keycharm).call(E,"right",function(){e.unbindFromRedraw("_moveRight")},"keyup"),B(_=this.keycharm).call(_,"=",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),B(S=this.keycharm).call(S,"num+",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),B(k=this.keycharm).call(k,"num-",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),B(O=this.keycharm).call(O,"-",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),B(C=this.keycharm).call(C,"[",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),B(I=this.keycharm).call(I,"]",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),B(T=this.keycharm).call(T,"pageup",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),B(P=this.keycharm).call(P,"pagedown",function(){e.unbindFromRedraw("_zoomOut")},"keyup")}}}]),i}();function Gj(i,n){var e=typeof Ar!="undefined"&&or(i)||i["@@iterator"];if(!e){if(me(i)||(e=Vj(i))||n&&i&&typeof i.length=="number"){e&&(i=e);var t=0,r=function(){};return{s:r,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(i)},n:function(){var l=e.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Vj(i,n){var e;if(!!i){if(typeof i=="string")return $b(i,n);var t=Je(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Ur(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $b(i,n)}}function $b(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}var qj=function(){function i(n,e,t){var r,a,o,s,u,l,h,f,d,c,v,m,w;z(this,i),this.body=n,this.canvas=e,this.selectionHandler=t,this.navigationHandler=new Uj(n,e),this.body.eventListeners.onTap=B(r=this.onTap).call(r,this),this.body.eventListeners.onTouch=B(a=this.onTouch).call(a,this),this.body.eventListeners.onDoubleTap=B(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=B(s=this.onHold).call(s,this),this.body.eventListeners.onDragStart=B(u=this.onDragStart).call(u,this),this.body.eventListeners.onDrag=B(l=this.onDrag).call(l,this),this.body.eventListeners.onDragEnd=B(h=this.onDragEnd).call(h,this),this.body.eventListeners.onMouseWheel=B(f=this.onMouseWheel).call(f,this),this.body.eventListeners.onPinch=B(d=this.onPinch).call(d,this),this.body.eventListeners.onMouseMove=B(c=this.onMouseMove).call(c,this),this.body.eventListeners.onRelease=B(v=this.onRelease).call(v,this),this.body.eventListeners.onContext=B(m=this.onContext).call(m,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=B(w=this.getPointer).call(w,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},je(this.options,this.defaultOptions),this.bindEventListeners()}return j(i,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("destroy",function(){clearTimeout(e.popupTimer),delete e.body.functions.getPointer})}},{key:"setOptions",value:function(e){if(e!==void 0){var t=["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"];Gs(t,this.options,e),jt(this.options,e,"keyboard"),e.tooltip&&(je(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=$h(e.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(e){return{x:e.x-rN(this.canvas.frame.canvas),y:e.y-iN(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}},{key:"onTap",value:function(e){var t=this.getPointer(e.center),r=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(t,r),this.selectionHandler.commitAndEmit(t,e),this.selectionHandler.generateClickEvent("click",e,t)}},{key:"onDoubleTap",value:function(e){var t=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,t)}},{key:"onHold",value:function(e){var t=this.getPointer(e.center),r=this.selectionHandler.options.multiselect;this.checkSelectionChanges(t,r),this.selectionHandler.commitAndEmit(t,e),this.selectionHandler.generateClickEvent("click",e,t),this.selectionHandler.generateClickEvent("hold",e,t)}},{key:"onRelease",value:function(e){if(new Date().valueOf()-this.touchTime>10){var t=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,t),this.touchTime=new Date().valueOf()}}},{key:"onContext",value:function(e){var t=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,t)}},{key:"checkSelectionChanges",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;t===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}},{key:"_determineDifference",value:function(e,t){var r=function(o,s){for(var u=[],l=0;l<o.length;l++){var h=o[l];ve(s).call(s,h)===-1&&u.push(h)}return u};return{nodes:r(e.nodes,t.nodes),edges:r(e.edges,t.edges)}}},{key:"onDragStart",value:function(e){if(!this.drag.dragging){this.drag.pointer===void 0&&this.onTouch(e);var t=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=je({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;var r=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)}}if(t!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=t.id,t.isSelected()===!1&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(t)),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);var a=Gj(this.selectionHandler.getSelectedNodes()),o;try{for(a.s();!(o=a.n()).done;){var s=o.value,u={id:s.id,node:s,x:s.x,y:s.y,xFixed:s.options.fixed.x,yFixed:s.options.fixed.y};s.options.fixed.x=!0,s.options.fixed.y=!0,this.drag.selection.push(u)}}catch(l){a.e(l)}finally{a.f()}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(e){var t=this;if(this.drag.pinched!==!0){this.body.emitter.emit("unlockNode");var r=this.getPointer(e.center),a=this.drag.selection;if(a&&a.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,r);var o=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;Se(a).call(a,function(h){var f=h.node;h.xFixed===!1&&(f.x=t.canvas._XconvertDOMtoCanvas(t.canvas._XconvertCanvasToDOM(h.x)+o)),h.yFixed===!1&&(f.y=t.canvas._YconvertDOMtoCanvas(t.canvas._YconvertCanvasToDOM(h.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,r,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}var u=r.x-this.drag.pointer.x,l=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+u,y:this.drag.translation.y+l},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(e){var t=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;var a=this.body.selectionBox.position,o={minX:Math.min(a.start.x,a.end.x),minY:Math.min(a.start.y,a.end.y),maxX:Math.max(a.start.x,a.end.x),maxY:Math.max(a.start.y,a.end.y)},s=St(r=this.body.nodeIndices).call(r,function(h){var f=t.body.nodes[h];return f.x>=o.minX&&f.x<=o.maxX&&f.y>=o.minY&&f.y<=o.maxY});Se(s).call(s,function(h){return t.selectionHandler.selectObject(t.body.nodes[h])});var u=this.getPointer(e.center);this.selectionHandler.commitAndEmit(u,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var l=this.drag.selection;l&&l.length?(Se(l).call(l,function(h){h.node.options.fixed.x=h.xFixed,h.node.options.fixed.y=h.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(e){var t=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);var r=this.pinch.scale*e.scale;this.zoom(r,t)}},{key:"zoom",value:function(e,t){if(this.options.zoomView===!0){var r=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);var a=void 0;this.drag!==void 0&&this.drag.dragging===!0&&(a=this.canvas.DOMtoCanvas(this.drag.pointer));var o=this.body.view.translation,s=e/r,u=(1-s)*t.x+o.x*s,l=(1-s)*t.y+o.y*s;if(this.body.view.scale=e,this.body.view.translation={x:u,y:l},a!=null){var h=this.canvas.canvasToDOM(a);this.drag.pointer.x=h.x,this.drag.pointer.y=h.y}this.body.emitter.emit("_requestRedraw"),r<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:t}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:t})}}},{key:"onMouseWheel",value:function(e){if(this.options.zoomView===!0){if(e.deltaY!==0){var t=this.body.view.scale;t*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);var r=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(t,r)}e.preventDefault()}}},{key:"onMouseMove",value:function(e){var t=this,r=this.getPointer({x:e.clientX,y:e.clientY}),a=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(r),this.popup.hidden===!1&&(a=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),a===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=lr(function(){return t._checkShowPopup(r)},this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,r)}},{key:"_checkShowPopup",value:function(e){var t=this.canvas._XconvertDOMtoCanvas(e.x),r=this.canvas._YconvertDOMtoCanvas(e.y),a={left:t,top:r,right:t,bottom:r},o=this.popupObj===void 0?void 0:this.popupObj.id,s=!1,u="node";if(this.popupObj===void 0){for(var l=this.body.nodeIndices,h=this.body.nodes,f,d=[],c=0;c<l.length;c++)f=h[l[c]],f.isOverlappingWith(a)===!0&&(s=!0,f.getTitle()!==void 0&&d.push(l[c]));d.length>0&&(this.popupObj=h[d[d.length-1]],s=!0)}if(this.popupObj===void 0&&s===!1){for(var v=this.body.edgeIndices,m=this.body.edges,w,g=[],E=0;E<v.length;E++)w=m[v[E]],w.isOverlappingWith(a)===!0&&w.connected===!0&&w.getTitle()!==void 0&&g.push(v[E]);g.length>0&&(this.popupObj=m[g[g.length-1]],u="edge")}this.popupObj!==void 0?this.popupObj.id!==o&&(this.popup===void 0&&(this.popup=new gN(this.canvas.frame)),this.popup.popupTargetType=u,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(e){var t=this.selectionHandler._pointerToPositionObject(e),r=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(r=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(t),r===!0)){var a=this.selectionHandler.getNodeAt(e);r=a===void 0?!1:a.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(r=this.body.edges[this.popup.popupTargetId].isOverlappingWith(t));r===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),i}(),Kj=Hh,Xj=Vm;Kj("Set",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},Xj);var Yj=ce,Qj=Yj.Set,Zj=Qj,Jj=Zj,Hi=Jj,Db=Wh,eu=Za.exports.getWeakData,e5=Nt,tf=Qe,t5=jh,r5=zh,Mb=Gr,Fb=Ct,Rb=Pi,i5=Rb.set,n5=Rb.getterFor,a5=Mb.find,o5=Mb.findIndex,s5=0,tu=function(i){return i.frozen||(i.frozen=new Nb)},Nb=function(){this.entries=[]},rf=function(i,n){return a5(i.entries,function(e){return e[0]===n})};Nb.prototype={get:function(i){var n=rf(this,i);if(n)return n[1]},has:function(i){return!!rf(this,i)},set:function(i,n){var e=rf(this,i);e?e[1]=n:this.entries.push([i,n])},delete:function(i){var n=o5(this.entries,function(e){return e[0]===i});return~n&&this.entries.splice(n,1),!!~n}};var u5={getConstructor:function(i,n,e,t){var r=i(function(s,u){t5(s,r,n),i5(s,{type:n,id:s5++,frozen:void 0}),u!=null&&r5(u,s[t],{that:s,AS_ENTRIES:e})}),a=n5(n),o=function(s,u,l){var h=a(s),f=eu(e5(u),!0);return f===!0?tu(h).set(u,l):f[h.id]=l,s};return Db(r.prototype,{delete:function(s){var u=a(this);if(!tf(s))return!1;var l=eu(s);return l===!0?tu(u).delete(s):l&&Fb(l,u.id)&&delete l[u.id]},has:function(u){var l=a(this);if(!tf(u))return!1;var h=eu(u);return h===!0?tu(l).has(u):h&&Fb(h,l.id)}}),Db(r.prototype,e?{get:function(u){var l=a(this);if(tf(u)){var h=eu(u);return h===!0?tu(l).get(u):h?h[l.id]:void 0}},set:function(u,l){return o(this,u,l)}}:{add:function(u){return o(this,u,!0)}}),r}},Bb=qe,l5=Wh,h5=Za.exports,f5=Hh,Lb=u5,ru=Qe,iu=Pi.enforce,d5=Sp,c5=!Bb.ActiveXObject&&"ActiveXObject"in Bb,nu=Object.isExtensible,io,zb=function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},v5=f5("WeakMap",zb,Lb);d5&&c5&&(io=Lb.getConstructor(zb,"WeakMap",!0),h5.enable(),Fn=v5.prototype,nf=Fn.delete,no=Fn.has,af=Fn.get,of=Fn.set,l5(Fn,{delete:function(i){if(ru(i)&&!nu(i)){var n=iu(this);return n.frozen||(n.frozen=new io),nf.call(this,i)||n.frozen.delete(i)}return nf.call(this,i)},has:function(n){if(ru(n)&&!nu(n)){var e=iu(this);return e.frozen||(e.frozen=new io),no.call(this,n)||e.frozen.has(n)}return no.call(this,n)},get:function(n){if(ru(n)&&!nu(n)){var e=iu(this);return e.frozen||(e.frozen=new io),no.call(this,n)?af.call(this,n):e.frozen.get(n)}return af.call(this,n)},set:function(n,e){if(ru(n)&&!nu(n)){var t=iu(this);t.frozen||(t.frozen=new io),no.call(this,n)?of.call(this,n,e):t.frozen.set(n,e)}else of.call(this,n,e);return this}}));var Fn,nf,no,af,of,p5=ce,g5=p5.WeakMap,y5=g5,m5=y5,ao=m5;function Oe(i,n,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?i!==n||!t:!n.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(i):t?t.value:n.get(i)}function sf(i,n,e,t,r){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?i!==n||!r:!n.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?r.call(i,e):r?r.value=e:n.set(i,e),e}function uf(i,n){var e=typeof Ar!="undefined"&&or(i)||i["@@iterator"];if(!e){if(me(i)||(e=b5(i))||n&&i&&typeof i.length=="number"){e&&(i=e);var t=0,r=function(){};return{s:r,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(i)},n:function(){var l=e.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function b5(i,n){var e;if(!!i){if(typeof i=="string")return jb(i,n);var t=Je(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Ur(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jb(i,n)}}function jb(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}var Wi,Ht,ai,oi,au;function Hb(i,n){var e=new Hi,t=uf(n),r;try{for(t.s();!(r=t.n()).done;){var a=r.value;i.has(a)||e.add(a)}}catch(o){t.e(o)}finally{t.f()}return e}var Wb=function(){function i(){z(this,i),Wi.set(this,new Hi),Ht.set(this,new Hi)}return j(i,[{key:"size",get:function(){return Oe(this,Ht,"f").size}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var a=0,o=t;a<o.length;a++){var s=o[a];Oe(this,Ht,"f").add(s)}}},{key:"delete",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var a=0,o=t;a<o.length;a++){var s=o[a];Oe(this,Ht,"f").delete(s)}}},{key:"clear",value:function(){Oe(this,Ht,"f").clear()}},{key:"getSelection",value:function(){return sr(Oe(this,Ht,"f"))}},{key:"getChanges",value:function(){return{added:sr(Hb(Oe(this,Wi,"f"),Oe(this,Ht,"f"))),deleted:sr(Hb(Oe(this,Ht,"f"),Oe(this,Wi,"f"))),previous:sr(new Hi(Oe(this,Wi,"f"))),current:sr(new Hi(Oe(this,Ht,"f")))}}},{key:"commit",value:function(){var e=this.getChanges();sf(this,Wi,Oe(this,Ht,"f"),"f"),sf(this,Ht,new Hi(Oe(this,Wi,"f")),"f");var t=uf(e.added),r;try{for(t.s();!(r=t.n()).done;){var a=r.value;a.select()}}catch(l){t.e(l)}finally{t.f()}var o=uf(e.deleted),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;u.unselect()}}catch(l){o.e(l)}finally{o.f()}return e}}]),i}();Wi=new ao,Ht=new ao;var w5=function(){function i(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};z(this,i),ai.set(this,new Wb),oi.set(this,new Wb),au.set(this,void 0),sf(this,au,n,"f")}return j(i,[{key:"sizeNodes",get:function(){return Oe(this,ai,"f").size}},{key:"sizeEdges",get:function(){return Oe(this,oi,"f").size}},{key:"getNodes",value:function(){return Oe(this,ai,"f").getSelection()}},{key:"getEdges",value:function(){return Oe(this,oi,"f").getSelection()}},{key:"addNodes",value:function(){var e;(e=Oe(this,ai,"f")).add.apply(e,arguments)}},{key:"addEdges",value:function(){var e;(e=Oe(this,oi,"f")).add.apply(e,arguments)}},{key:"deleteNodes",value:function(e){Oe(this,ai,"f").delete(e)}},{key:"deleteEdges",value:function(e){Oe(this,oi,"f").delete(e)}},{key:"clear",value:function(){Oe(this,ai,"f").clear(),Oe(this,oi,"f").clear()}},{key:"commit",value:function(){for(var e,t,r={nodes:Oe(this,ai,"f").commit(),edges:Oe(this,oi,"f").commit()},a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=Oe(this,au,"f")).call.apply(e,vh(t=[this,r]).call(t,o)),r}}]),i}();ai=new ao,oi=new ao,au=new ao;function Ub(i,n){var e=typeof Ar!="undefined"&&or(i)||i["@@iterator"];if(!e){if(me(i)||(e=_5(i))||n&&i&&typeof i.length=="number"){e&&(i=e);var t=0,r=function(){};return{s:r,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(i)},n:function(){var l=e.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function _5(i,n){var e;if(!!i){if(typeof i=="string")return Vb(i,n);var t=Je(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Ur(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Vb(i,n)}}function Vb(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}var E5=function(){function i(n,e){var t=this;z(this,i),this.body=n,this.canvas=e,this._selectionAccumulator=new w5,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},je(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){t.updateSelection()})}return j(i,[{key:"setOptions",value:function(e){if(e!==void 0){var t=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];xn(t,this.options,e)}}},{key:"selectOnPoint",value:function(e){var t=!1;if(this.options.selectable===!0){var r=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),r!==void 0&&(t=this.selectObject(r)),this.body.emitter.emit("_requestRedraw")}return t}},{key:"selectAdditionalOnPoint",value:function(e){var t=!1;if(this.options.selectable===!0){var r=this.getNodeAt(e)||this.getEdgeAt(e);r!==void 0&&(t=!0,r.isSelected()===!0?this.deselectObject(r):this.selectObject(r),this.body.emitter.emit("_requestRedraw"))}return t}},{key:"_initBaseEvent",value:function(e,t){var r={};return r.pointer={DOM:{x:t.x,y:t.y},canvas:this.canvas.DOMtoCanvas(t)},r.event=e,r}},{key:"generateClickEvent",value:function(e,t,r,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,s=this._initBaseEvent(t,r);if(o===!0)s.nodes=[],s.edges=[];else{var u=this.getSelection();s.nodes=u.nodes,s.edges=u.edges}a!==void 0&&(s.previousSelection=a),e=="click"&&(s.items=this.getClickedItems(r)),t.controlEdge!==void 0&&(s.controlEdge=t.controlEdge),this.body.emitter.emit(e,s)}},{key:"selectObject",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;if(e!==void 0){if(e instanceof At){if(t===!0){var r;(r=this._selectionAccumulator).addEdges.apply(r,sr(e.edges))}this._selectionAccumulator.addNodes(e)}else this._selectionAccumulator.addEdges(e);return!0}return!1}},{key:"deselectObject",value:function(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}},{key:"_getAllNodesOverlappingWith",value:function(e){for(var t=[],r=this.body.nodes,a=0;a<this.body.nodeIndices.length;a++){var o=this.body.nodeIndices[a];r[o].isOverlappingWith(e)&&t.push(o)}return t}},{key:"_pointerToPositionObject",value:function(e){var t=this.canvas.DOMtoCanvas(e);return{left:t.x-1,top:t.y+1,right:t.x+1,bottom:t.y-1}}},{key:"getNodeAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this._pointerToPositionObject(e),a=this._getAllNodesOverlappingWith(r);if(a.length>0)return t===!0?this.body.nodes[a[a.length-1]]:a[a.length-1]}},{key:"_getEdgesOverlappingWith",value:function(e,t){for(var r=this.body.edges,a=0;a<this.body.edgeIndices.length;a++){var o=this.body.edgeIndices[a];r[o].isOverlappingWith(e)&&t.push(o)}}},{key:"_getAllEdgesOverlappingWith",value:function(e){var t=[];return this._getEdgesOverlappingWith(e,t),t}},{key:"getEdgeAt",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this.canvas.DOMtoCanvas(e),a=10,o=null,s=this.body.edges,u=0;u<this.body.edgeIndices.length;u++){var l=this.body.edgeIndices[u],h=s[l];if(h.connected){var f=h.from.x,d=h.from.y,c=h.to.x,v=h.to.y,m=h.edgeType.getDistanceToEdge(f,d,c,v,r.x,r.y);m<a&&(o=l,a=m)}}if(o!==null)return t===!0?this.body.edges[o]:o}},{key:"_addToHover",value:function(e){e instanceof At?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}},{key:"_removeFromSelection",value:function(e){if(e instanceof At){var t;this._selectionAccumulator.deleteNodes(e),(t=this._selectionAccumulator).deleteEdges.apply(t,sr(e.edges))}else this._selectionAccumulator.deleteEdges(e)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var r=e.edges[t];r.hover=!0,this._addToHover(r)}}},{key:"emitBlurEvent",value:function(e,t,r){var a=this._initBaseEvent(e,t);r.hover===!0&&(r.hover=!1,r instanceof At?(a.node=r.id,this.body.emitter.emit("blurNode",a)):(a.edge=r.id,this.body.emitter.emit("blurEdge",a)))}},{key:"emitHoverEvent",value:function(e,t,r){var a=this._initBaseEvent(e,t),o=!1;return r.hover===!1&&(r.hover=!0,this._addToHover(r),o=!0,r instanceof At?(a.node=r.id,this.body.emitter.emit("hoverNode",a)):(a.edge=r.id,this.body.emitter.emit("hoverEdge",a))),o}},{key:"hoverObject",value:function(e,t){var r=this.getNodeAt(t);r===void 0&&(r=this.getEdgeAt(t));var a=!1;for(var o in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,o)&&(r===void 0||r instanceof At&&r.id!=o||r instanceof Mn)&&(this.emitBlurEvent(e,t,this.hoverObj.nodes[o]),delete this.hoverObj.nodes[o],a=!0);for(var s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(a===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(r===void 0||r instanceof Mn&&r.id!=s||r instanceof At&&!r.hover)&&(this.emitBlurEvent(e,t,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],a=!0));if(r!==void 0){var u=De(this.hoverObj.edges).length,l=De(this.hoverObj.nodes).length,h=r instanceof Mn&&u===0&&l===0,f=r instanceof At&&u===0&&l===0;(a||h||f)&&(a=this.emitHoverEvent(e,t,r)),r instanceof At&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(r)}a===!0&&this.body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){this._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(e,t){var r=!1,a=this._selectionAccumulator.commit(),o={nodes:a.nodes.previous,edges:a.edges.previous};a.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",t,e,o),r=!0),a.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",t,e,o),r=!0),a.nodes.added.length>0&&(this.generateClickEvent("selectNode",t,e),r=!0),a.edges.added.length>0&&(this.generateClickEvent("selectEdge",t,e),r=!0),r===!0&&this.generateClickEvent("select",t,e)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var e;return En(e=this._selectionAccumulator.getNodes()).call(e,function(t){return t.id})}},{key:"getSelectedEdgeIds",value:function(){var e;return En(e=this._selectionAccumulator.getEdges()).call(e,function(t){return t.id})}},{key:"setSelection",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((t.unselectAll||t.unselectAll===void 0)&&this.unselectAll(),e.nodes){var r=Ub(e.nodes),a;try{for(r.s();!(a=r.n()).done;){var o=a.value,s=this.body.nodes[o];if(!s)throw new RangeError('Node with id "'+o+'" not found');this.selectObject(s,t.highlightEdges)}}catch(d){r.e(d)}finally{r.f()}}if(e.edges){var u=Ub(e.edges),l;try{for(u.s();!(l=u.n()).done;){var h=l.value,f=this.body.edges[h];if(!f)throw new RangeError('Edge with id "'+h+'" not found');this.selectObject(f)}}catch(d){u.e(d)}finally{u.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:t})}},{key:"selectEdges",value:function(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}},{key:"updateSelection",value:function(){for(var e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(var t in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,t.id)||this._selectionAccumulator.deleteEdges(t)}},{key:"getClickedItems",value:function(e){for(var t=this.canvas.DOMtoCanvas(e),r=[],a=this.body.nodeIndices,o=this.body.nodes,s=a.length-1;s>=0;s--){var u=o[a[s]],l=u.getItemsOnPoint(t);r.push.apply(r,l)}for(var h=this.body.edgeIndices,f=this.body.edges,d=h.length-1;d>=0;d--){var c=f[h[d]],v=c.getItemsOnPoint(t);r.push.apply(r,v)}return r}}]),i}(),S5=Math.floor,lf=function(i,n){var e=i.length,t=S5(e/2);return e<8?k5(i,n):T5(lf(i.slice(0,t),n),lf(i.slice(t),n),n)},k5=function(i,n){for(var e=i.length,t=1,r,a;t<e;){for(a=t,r=i[t];a&&n(i[a-1],r)>0;)i[a]=i[--a];a!==t++&&(i[a]=r)}return i},T5=function(i,n,e){for(var t=i.length,r=n.length,a=0,o=0,s=[];a<t||o<r;)a<t&&o<r?s.push(e(i[a],n[o])<=0?i[a++]:n[o++]):s.push(a<t?i[a++]:n[o++]);return s},O5=lf,P5=pa,Gb=P5.match(/firefox\/(\d+)/i),I5=!!Gb&&+Gb[1],C5=pa,x5=/MSIE|Trident/.test(C5),A5=pa,qb=A5.match(/AppleWebKit\/(\d+)\./),$5=!!qb&&+qb[1],D5=re,M5=wa,F5=It,R5=ar,Kb=Hr,hf=Ae,N5=O5,B5=Sn,Xb=I5,L5=x5,Yb=ga,Qb=$5,Ui=[],Zb=Ui.sort,z5=hf(function(){Ui.sort(void 0)}),j5=hf(function(){Ui.sort(null)}),H5=B5("sort"),Jb=!hf(function(){if(Yb)return Yb<70;if(!(Xb&&Xb>3)){if(L5)return!0;if(Qb)return Qb<603;var i="",n,e,t,r;for(n=65;n<76;n++){switch(e=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(r=0;r<47;r++)Ui.push({k:e+r,v:t})}for(Ui.sort(function(a,o){return o.v-a.v}),r=0;r<Ui.length;r++)e=Ui[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return i!=="DGBEFHACIJK"}}),W5=z5||!j5||!H5||!Jb,U5=function(i){return function(n,e){return e===void 0?-1:n===void 0?1:i!==void 0?+i(n,e)||0:Kb(n)>Kb(e)?1:-1}};D5({target:"Array",proto:!0,forced:W5},{sort:function(n){n!==void 0&&M5(n);var e=F5(this);if(Jb)return n===void 0?Zb.call(e):Zb.call(e,n);var t=[],r=R5(e.length),a,o;for(o=0;o<r;o++)o in e&&t.push(e[o]);for(t=N5(t,U5(n)),a=t.length,o=0;o<a;)e[o]=t[o++];for(;o<r;)delete e[o++];return e}});var V5=Ze,G5=V5("Array").sort,q5=G5,e0=Array.prototype,K5=function(i){var n=i.sort;return i===e0||i instanceof Array&&n===e0.sort?q5:n},X5=K5,Y5=X5,ff=Y5,Q5=wa,Z5=It,J5=rs,e3=ar,t0=function(i){return function(n,e,t,r){Q5(e);var a=Z5(n),o=J5(a),s=e3(a.length),u=i?s-1:0,l=i?-1:1;if(t<2)for(;;){if(u in o){r=o[u],u+=l;break}if(u+=l,i?u<0:s<=u)throw TypeError("Reduce of empty array with no initial value")}for(;i?u>=0:s>u;u+=l)u in o&&(r=e(r,o[u],u,a));return r}},t3={left:t0(!1),right:t0(!0)},r3=ca,i3=qe,n3=r3(i3.process)=="process",a3=re,o3=t3.left,s3=Sn,r0=ga,u3=n3,l3=s3("reduce"),h3=!u3&&r0>79&&r0<83;a3({target:"Array",proto:!0,forced:!l3||h3},{reduce:function(n){return o3(this,n,arguments.length,arguments.length>1?arguments[1]:void 0)}});var f3=Ze,d3=f3("Array").reduce,c3=d3,i0=Array.prototype,v3=function(i){var n=i.reduce;return i===i0||i instanceof Array&&n===i0.reduce?c3:n},p3=v3,g3=p3,n0=g3,a0={};(function(i){(function(n,e){e(i)})(bl,function(n){n.__esModule=!0,n.sort=w;function e(g,E){if(!(g instanceof E))throw new TypeError("Cannot call a class as a function")}var t=32,r=7,a=256,o=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function s(g){return g<1e5?g<100?g<10?0:1:g<1e4?g<1e3?2:3:4:g<1e7?g<1e6?5:6:g<1e9?g<1e8?7:8:9}function u(g,E){if(g===E)return 0;if(~~g===g&&~~E===E){if(g===0||E===0)return g<E?-1:1;if(g<0||E<0){if(E>=0)return-1;if(g>=0)return 1;g=-g,E=-E}var _=s(g),S=s(E),k=0;return _<S?(g*=o[S-_-1],E/=10,k=-1):_>S&&(E*=o[_-S-1],g/=10,k=1),g===E?k:g<E?-1:1}var O=String(g),C=String(E);return O===C?0:O<C?-1:1}function l(g){for(var E=0;g>=t;)E|=g&1,g>>=1;return g+E}function h(g,E,_,S){var k=E+1;if(k===_)return 1;if(S(g[k++],g[E])<0){for(;k<_&&S(g[k],g[k-1])<0;)k++;f(g,E,k)}else for(;k<_&&S(g[k],g[k-1])>=0;)k++;return k-E}function f(g,E,_){for(_--;E<_;){var S=g[E];g[E++]=g[_],g[_--]=S}}function d(g,E,_,S,k){for(S===E&&S++;S<_;S++){for(var O=g[S],C=E,I=S;C<I;){var T=C+I>>>1;k(O,g[T])<0?I=T:C=T+1}var P=S-C;switch(P){case 3:g[C+3]=g[C+2];case 2:g[C+2]=g[C+1];case 1:g[C+1]=g[C];break;default:for(;P>0;)g[C+P]=g[C+P-1],P--}g[C]=O}}function c(g,E,_,S,k,O){var C=0,I=0,T=1;if(O(g,E[_+k])>0){for(I=S-k;T<I&&O(g,E[_+k+T])>0;)C=T,T=(T<<1)+1,T<=0&&(T=I);T>I&&(T=I),C+=k,T+=k}else{for(I=k+1;T<I&&O(g,E[_+k-T])<=0;)C=T,T=(T<<1)+1,T<=0&&(T=I);T>I&&(T=I);var P=C;C=k-T,T=k-P}for(C++;C<T;){var R=C+(T-C>>>1);O(g,E[_+R])>0?C=R+1:T=R}return T}function v(g,E,_,S,k,O){var C=0,I=0,T=1;if(O(g,E[_+k])<0){for(I=k+1;T<I&&O(g,E[_+k-T])<0;)C=T,T=(T<<1)+1,T<=0&&(T=I);T>I&&(T=I);var P=C;C=k-T,T=k-P}else{for(I=S-k;T<I&&O(g,E[_+k+T])>=0;)C=T,T=(T<<1)+1,T<=0&&(T=I);T>I&&(T=I),C+=k,T+=k}for(C++;C<T;){var R=C+(T-C>>>1);O(g,E[_+R])<0?T=R:C=R+1}return T}var m=function(){function g(E,_){e(this,g),this.array=null,this.compare=null,this.minGallop=r,this.length=0,this.tmpStorageLength=a,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=E,this.compare=_,this.length=E.length,this.length<2*a&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return g.prototype.pushRun=function(_,S){this.runStart[this.stackSize]=_,this.runLength[this.stackSize]=S,this.stackSize+=1},g.prototype.mergeRuns=function(){for(;this.stackSize>1;){var _=this.stackSize-2;if(_>=1&&this.runLength[_-1]<=this.runLength[_]+this.runLength[_+1]||_>=2&&this.runLength[_-2]<=this.runLength[_]+this.runLength[_-1])this.runLength[_-1]<this.runLength[_+1]&&_--;else if(this.runLength[_]>this.runLength[_+1])break;this.mergeAt(_)}},g.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var _=this.stackSize-2;_>0&&this.runLength[_-1]<this.runLength[_+1]&&_--,this.mergeAt(_)}},g.prototype.mergeAt=function(_){var S=this.compare,k=this.array,O=this.runStart[_],C=this.runLength[_],I=this.runStart[_+1],T=this.runLength[_+1];this.runLength[_]=C+T,_===this.stackSize-3&&(this.runStart[_+1]=this.runStart[_+2],this.runLength[_+1]=this.runLength[_+2]),this.stackSize--;var P=v(k[I],k,O,C,0,S);O+=P,C-=P,C!==0&&(T=c(k[O+C-1],k,I,T,T-1,S),T!==0&&(C<=T?this.mergeLow(O,C,I,T):this.mergeHigh(O,C,I,T)))},g.prototype.mergeLow=function(_,S,k,O){var C=this.compare,I=this.array,T=this.tmp,P=0;for(P=0;P<S;P++)T[P]=I[_+P];var R=0,W=k,G=_;if(I[G++]=I[W++],--O==0){for(P=0;P<S;P++)I[G+P]=T[R+P];return}if(S===1){for(P=0;P<O;P++)I[G+P]=I[W+P];I[G+O]=T[R];return}for(var Q=this.minGallop;;){var ee=0,te=0,le=!1;do if(C(I[W],T[R])<0){if(I[G++]=I[W++],te++,ee=0,--O==0){le=!0;break}}else if(I[G++]=T[R++],ee++,te=0,--S==1){le=!0;break}while((ee|te)<Q);if(le)break;do{if(ee=v(I[W],T,R,S,0,C),ee!==0){for(P=0;P<ee;P++)I[G+P]=T[R+P];if(G+=ee,R+=ee,S-=ee,S<=1){le=!0;break}}if(I[G++]=I[W++],--O==0){le=!0;break}if(te=c(T[R],I,W,O,0,C),te!==0){for(P=0;P<te;P++)I[G+P]=I[W+P];if(G+=te,W+=te,O-=te,O===0){le=!0;break}}if(I[G++]=T[R++],--S==1){le=!0;break}Q--}while(ee>=r||te>=r);if(le)break;Q<0&&(Q=0),Q+=2}if(this.minGallop=Q,Q<1&&(this.minGallop=1),S===1){for(P=0;P<O;P++)I[G+P]=I[W+P];I[G+O]=T[R]}else{if(S===0)throw new Error("mergeLow preconditions were not respected");for(P=0;P<S;P++)I[G+P]=T[R+P]}},g.prototype.mergeHigh=function(_,S,k,O){var C=this.compare,I=this.array,T=this.tmp,P=0;for(P=0;P<O;P++)T[P]=I[k+P];var R=_+S-1,W=O-1,G=k+O-1,Q=0,ee=0;if(I[G--]=I[R--],--S==0){for(Q=G-(O-1),P=0;P<O;P++)I[Q+P]=T[P];return}if(O===1){for(G-=S,R-=S,ee=G+1,Q=R+1,P=S-1;P>=0;P--)I[ee+P]=I[Q+P];I[G]=T[W];return}for(var te=this.minGallop;;){var le=0,F=0,$=!1;do if(C(T[W],I[R])<0){if(I[G--]=I[R--],le++,F=0,--S==0){$=!0;break}}else if(I[G--]=T[W--],F++,le=0,--O==1){$=!0;break}while((le|F)<te);if($)break;do{if(le=S-v(T[W],I,_,S,S-1,C),le!==0){for(G-=le,R-=le,S-=le,ee=G+1,Q=R+1,P=le-1;P>=0;P--)I[ee+P]=I[Q+P];if(S===0){$=!0;break}}if(I[G--]=T[W--],--O==1){$=!0;break}if(F=O-c(I[R],T,0,O,O-1,C),F!==0){for(G-=F,W-=F,O-=F,ee=G+1,Q=W+1,P=0;P<F;P++)I[ee+P]=T[Q+P];if(O<=1){$=!0;break}}if(I[G--]=I[R--],--S==0){$=!0;break}te--}while(le>=r||F>=r);if($)break;te<0&&(te=0),te+=2}if(this.minGallop=te,te<1&&(this.minGallop=1),O===1){for(G-=S,R-=S,ee=G+1,Q=R+1,P=S-1;P>=0;P--)I[ee+P]=I[Q+P];I[G]=T[W]}else{if(O===0)throw new Error("mergeHigh preconditions were not respected");for(Q=G-(O-1),P=0;P<O;P++)I[Q+P]=T[P]}},g}();function w(g,E,_,S){if(!Array.isArray(g))throw new TypeError("Can only sort arrays");E?typeof E!="function"&&(S=_,_=E,E=u):E=u,_||(_=0),S||(S=g.length);var k=S-_;if(!(k<2)){var O=0;if(k<t){O=h(g,_,S,E),d(g,_,S,_+O,E);return}var C=new m(g,E),I=l(k);do{if(O=h(g,_,S,E),O<I){var T=k;T>I&&(T=I),d(g,_,_+T,_+O,E),O=T}C.pushRun(_,O),C.mergeRuns(),k-=O,_+=O}while(k!==0);C.forceMergeRuns()}}})})(a0);var ou=a0;function o0(i){var n=y3();return function(){var t=K(i),r;if(n){var a=K(this).constructor;r=D(t,arguments,a)}else r=t.apply(this,arguments);return we(this,r)}}function y3(){if(typeof Reflect=="undefined"||!D||D.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(D(Boolean,[],function(){})),!0}catch(i){return!1}}var s0=function(){function i(){z(this,i)}return j(i,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(e){return this.fake_use(e),this.abstract()}},{key:"setPosition",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,t,r),this.abstract()}},{key:"getTreeSize",value:function(e){return this.fake_use(e),this.abstract()}},{key:"sort",value:function(e){this.fake_use(e),this.abstract()}},{key:"fix",value:function(e,t){this.fake_use(e,t),this.abstract()}},{key:"shift",value:function(e,t){this.fake_use(e,t),this.abstract()}}]),i}(),m3=function(i){ge(e,i);var n=o0(e);function e(t){var r;return z(this,e),r=n.call(this),r.layout=t,r}return j(e,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(r){return r.x}},{key:"setPosition",value:function(r,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(r,o),r.x=a}},{key:"getTreeSize",value:function(r){var a=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,r);return{min:a.min_x,max:a.max_x}}},{key:"sort",value:function(r){ou.sort(r,function(a,o){return a.x-o.x})}},{key:"fix",value:function(r,a){r.y=this.layout.options.hierarchical.levelSeparation*a,r.options.fixed.y=!0}},{key:"shift",value:function(r,a){this.layout.body.nodes[r].x+=a}}]),e}(s0),b3=function(i){ge(e,i);var n=o0(e);function e(t){var r;return z(this,e),r=n.call(this),r.layout=t,r}return j(e,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(r){return r.y}},{key:"setPosition",value:function(r,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&this.layout.hierarchical.addToOrdering(r,o),r.y=a}},{key:"getTreeSize",value:function(r){var a=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,r);return{min:a.min_y,max:a.max_y}}},{key:"sort",value:function(r){ou.sort(r,function(a,o){return a.y-o.y})}},{key:"fix",value:function(r,a){r.x=this.layout.options.hierarchical.levelSeparation*a,r.options.fixed.x=!0}},{key:"shift",value:function(r,a){this.layout.body.nodes[r].y+=a}}]),e}(s0),w3=re,_3=Gr.every,E3=Sn,S3=E3("every");w3({target:"Array",proto:!0,forced:!S3},{every:function(n){return _3(this,n,arguments.length>1?arguments[1]:void 0)}});var k3=Ze,T3=k3("Array").every,O3=T3,u0=Array.prototype,P3=function(i){var n=i.every;return i===u0||i instanceof Array&&n===u0.every?O3:n},I3=P3,C3=I3,l0=C3;function A3(i,n){var e=typeof Ar!="undefined"&&or(i)||i["@@iterator"];if(!e){if(me(i)||(e=x3(i))||n&&i&&typeof i.length=="number"){e&&(i=e);var t=0,r=function(){};return{s:r,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(i)},n:function(){var l=e.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function x3(i,n){var e;if(!!i){if(typeof i=="string")return h0(i,n);var t=Je(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Ur(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h0(i,n)}}function h0(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}function $3(i,n){var e=new Hi;return Se(i).call(i,function(t){var r;Se(r=t.edges).call(r,function(a){a.connected&&e.add(a)})}),Se(e).call(e,function(t){var r=t.from.id,a=t.to.id;n[r]==null&&(n[r]=0),(n[a]==null||n[r]>=n[a])&&(n[a]=n[r]+1)}),n}function D3(i){return f0(function(n){var e,t;return l0(e=St(t=n.edges).call(t,function(r){return i.has(r.toId)})).call(e,function(r){return r.to===n})},function(n,e){return e>n},"from",i)}function M3(i){return f0(function(n){var e,t;return l0(e=St(t=n.edges).call(t,function(r){return i.has(r.toId)})).call(e,function(r){return r.from===n})},function(n,e){return e<n},"to",i)}function f0(i,n,e,t){var r,a=Ai(null),o=n0(r=sr(Zm(t).call(t))).call(r,function(c,v){return c+1+v.edges.length},0),s=e+"Id",u=e==="to"?1:-1,l=A3(t),h;try{var f=function(){var v=$e(h.value,2),m=v[0],w=v[1];if(!t.has(m)||!i(w))return"continue";a[m]=0;for(var g=[w],E=0,_=void 0,S=function(){var C,I;if(!t.has(m))return"continue";var T=a[_.id]+u;if(Se(C=St(I=_.edges).call(I,function(P){return P.connected&&P.to!==P.from&&P[e]!==_&&t.has(P.toId)&&t.has(P.fromId)})).call(C,function(P){var R=P[s],W=a[R];(W==null||n(T,W))&&(a[R]=T,g.push(P[e]))}),E>o)return{v:{v:$3(t,a)}};++E};_=g.pop();){var k=S();if(k!=="continue"&&Ee(k)==="object")return k.v}};for(l.s();!(h=l.n()).done;){var d=f();if(d!=="continue"&&Ee(d)==="object")return d.v}}catch(c){l.e(c)}finally{l.f()}return a}var F3=function(){function i(){z(this,i),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return j(i,[{key:"addRelation",value:function(e,t){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(t),this.parentReference[t]===void 0&&(this.parentReference[t]=[]),this.parentReference[t].push(e)}},{key:"checkIfTree",value:function(){for(var e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(e,t){t!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=t,this.treeIndex=Math.max(t,this.treeIndex))}},{key:"ensureLevel",value:function(e){this.levels[e]===void 0&&(this.levels[e]=0)}},{key:"getMaxLevel",value:function(e){var t=this,r={},a=function o(s){if(r[s]!==void 0)return r[s];var u=t.levels[s];if(t.childrenReference[s]){var l=t.childrenReference[s];if(l.length>0)for(var h=0;h<l.length;h++)u=Math.max(u,o(l[h]))}return r[s]=u,u};return a(e)}},{key:"levelDownstream",value:function(e,t){this.levels[t.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[t.id]=this.levels[e.id]+1)}},{key:"setMinLevelToZero",value:function(e){var t=1e9;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.levels[r]!==void 0&&(t=Math.min(this.levels[r],t));for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&this.levels[a]!==void 0&&(this.levels[a]-=t)}},{key:"getTreeSize",value:function(e,t){var r=1e9,a=-1e9,o=1e9,s=-1e9;for(var u in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,u)&&this.trees[u]===t){var l=e[u];r=Math.min(l.x,r),a=Math.max(l.x,a),o=Math.min(l.y,o),s=Math.max(l.y,s)}return{min_x:r,max_x:a,min_y:o,max_y:s}}},{key:"hasSameParent",value:function(e,t){var r=this.parentReference[e.id],a=this.parentReference[t.id];if(r===void 0||a===void 0)return!1;for(var o=0;o<r.length;o++)for(var s=0;s<a.length;s++)if(r[o]==a[s])return!0;return!1}},{key:"inSameSubNetwork",value:function(e,t){return this.trees[e.id]===this.trees[t.id]}},{key:"getLevels",value:function(){return De(this.distributionOrdering)}},{key:"addToOrdering",value:function(e,t){this.distributionOrdering[t]===void 0&&(this.distributionOrdering[t]=[]);var r=!1,a=this.distributionOrdering[t];for(var o in a)if(a[o]===e){r=!0;break}r||(this.distributionOrdering[t].push(e),this.distributionIndex[e.id]=this.distributionOrdering[t].length-1)}}]),i}(),R3=function(){function i(n){z(this,i),this.body=n,this._resetRNG(Math.random()+":"+As()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},je(this.options,this.defaultOptions),this.bindEventListeners()}return j(i,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("_dataChanged",function(){e.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){e.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){e.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(e.options.hierarchical.enabled===!0){var t=e.direction.curveType();e.body.emitter.emit("_forceDisableDynamicCurves",t,!1)}})}},{key:"setOptions",value:function(e,t){if(e!==void 0){var r=this.options.hierarchical,a=r.enabled;if(xn(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),jt(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),r.enabled===!0)return a===!0&&this.body.emitter.emit("refresh",!0),r.direction==="RL"||r.direction==="DU"?r.levelSeparation>0&&(r.levelSeparation*=-1):r.levelSeparation<0&&(r.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(t);if(a===!0)return this.body.emitter.emit("refresh"),ke(t,this.optionsBackup)}return t}},{key:"_resetRNG",value:function(e){this.initialRandomSeed=e,this._rng=Vs(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(e){if(this.options.hierarchical.enabled===!0){var t=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:t.enabled===void 0?!0:t.enabled,solver:"hierarchicalRepulsion"},t.enabled=t.enabled===void 0?!0:t.enabled,t.solver=t.solver||"barnesHut"):Ee(e.physics)==="object"?(t.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,t.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(t.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});var r=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:r};else{var a=e.edges.smooth;a.type!==void 0&&a.type!=="dynamic"&&(r=a.type),this.optionsBackup.edges={smooth:{enabled:a.enabled===void 0?!0:a.enabled,type:a.type===void 0?"dynamic":a.type,roundness:a.roundness===void 0?.5:a.roundness,forceDirection:a.forceDirection===void 0?!1:a.forceDirection}},e.edges.smooth={enabled:a.enabled===void 0?!0:a.enabled,type:r,roundness:a.roundness===void 0?.5:a.roundness,forceDirection:a.forceDirection===void 0?!1:a.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",r)}return e}},{key:"positionInitially",value:function(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);for(var t=e.length+50,r=0;r<e.length;r++){var a=e[r],o=2*Math.PI*this._rng();a.x===void 0&&(a.x=t*Math.cos(o)),a.y===void 0&&(a.y=t*Math.sin(o))}}}},{key:"layoutNetwork",value:function(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){for(var e=this.body.nodeIndices,t=0,r=0;r<e.length;r++){var a=this.body.nodes[e[r]];a.predefinedPosition===!0&&(t+=1)}if(t<.5*e.length){var o=10,s=0,u=this.options.clusterThreshold,l={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>u){for(var h=e.length;e.length>u&&s<=o;){s+=1;var f=e.length;s%3==0?this.body.modules.clustering.clusterBridges(l):this.body.modules.clustering.clusterOutliers(l);var d=e.length;if(f==d&&s%3!=0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*h)})}s>o&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();for(var c=70,v=0;v<e.length;v++){var m=this.body.nodes[e[v]];m.predefinedPosition===!1&&(m.x+=(.5-this._rng())*c,m.y+=(.5-this._rng())*c)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var e=ct.getRangeCore(this.body.nodes,this.body.nodeIndices),t=ct.findCenter(e),r=0;r<this.body.nodeIndices.length;r++){var a=this.body.nodes[this.body.nodeIndices[r]];a.x-=t.x,a.y-=t.y}}},{key:"_declusterAll",value:function(){for(var e=!0;e===!0;){e=!1;for(var t=0;t<this.body.nodeIndices.length;t++)this.body.nodes[this.body.nodeIndices[t]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[t],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){var e,t,r=!1,a=!1;this.lastNodeOnLevel={},this.hierarchical=new F3;for(t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&(e=this.body.nodes[t],e.options.level!==void 0?(r=!0,this.hierarchical.levels[t]=e.options.level):a=!0);if(a===!0&&r===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(a===!0){var o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(var s in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,s)&&this.hierarchical.ensureLevel(s);var u=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(u),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var e=this,t=!1,r={},a=function(){for(var _=s(),S=0,k=0;k<_.length-1;k++){var O=_[k].max-_[k+1].min;S+=O+e.options.hierarchical.treeSpacing,o(k+1,S)}},o=function(_,S){var k=e.hierarchical.trees;for(var O in k)Object.prototype.hasOwnProperty.call(k,O)&&k[O]===_&&e.direction.shift(O,S)},s=function(){for(var _=[],S=0;S<e.hierarchical.numTrees();S++)_.push(e.direction.getTreeSize(S));return _},u=function E(_,S){if(!S[_.id]&&(S[_.id]=!0,e.hierarchical.childrenReference[_.id])){var k=e.hierarchical.childrenReference[_.id];if(k.length>0)for(var O=0;O<k.length;O++)E(e.body.nodes[k[O]],S)}},l=function(_){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,k=1e9,O=1e9,C=1e9,I=-1e9;for(var T in _)if(Object.prototype.hasOwnProperty.call(_,T)){var P=e.body.nodes[T],R=e.hierarchical.levels[P.id],W=e.direction.getPosition(P),G=e._getSpaceAroundNode(P,_),Q=$e(G,2),ee=Q[0],te=Q[1];k=Math.min(ee,k),O=Math.min(te,O),R<=S&&(C=Math.min(W,C),I=Math.max(W,I))}return[C,I,k,O]},h=function(_,S){var k=e.hierarchical.getMaxLevel(_.id),O=e.hierarchical.getMaxLevel(S.id);return Math.min(k,O)},f=function(_,S,k){for(var O=e.hierarchical,C=0;C<S.length;C++){var I=S[C],T=O.distributionOrdering[I];if(T.length>1)for(var P=0;P<T.length-1;P++){var R=T[P],W=T[P+1];O.hasSameParent(R,W)&&O.inSameSubNetwork(R,W)&&_(R,W,k)}}},d=function(_,S){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,O=e.direction.getPosition(_),C=e.direction.getPosition(S),I=Math.abs(C-O),T=e.options.hierarchical.nodeSpacing;if(I>T){var P={},R={};u(_,P),u(S,R);var W=h(_,S),G=l(P,W),Q=l(R,W),ee=G[1],te=Q[0],le=Q[2],F=Math.abs(ee-te);if(F>T){var $=ee-te+T;$<-le+T&&($=-le+T),$<0&&(e._shiftBlock(S.id,$),t=!0,k===!0&&e._centerParent(S))}}},c=function(_,S){for(var k=S.id,O=S.edges,C=e.hierarchical.levels[S.id],I=e.options.hierarchical.levelSeparation*e.options.hierarchical.levelSeparation,T={},P=[],R=0;R<O.length;R++){var W=O[R];if(W.toId!=W.fromId){var G=W.toId==k?W.from:W.to;T[O[R].id]=G,e.hierarchical.levels[G.id]<C&&P.push(W)}}var Q=function(X,U){for(var ne=0,fe=0;fe<U.length;fe++)if(T[U[fe].id]!==void 0){var pe=e.direction.getPosition(T[U[fe].id])-X;ne+=pe/Math.sqrt(pe*pe+I)}return ne},ee=function(X,U){for(var ne=0,fe=0;fe<U.length;fe++)if(T[U[fe].id]!==void 0){var pe=e.direction.getPosition(T[U[fe].id])-X;ne-=I*Math.pow(pe*pe+I,-1.5)}return ne},te=function(X,U){for(var ne=e.direction.getPosition(S),fe={},pe=0;pe<X;pe++){var Ne=Q(ne,U),_e=ee(ne,U),Ue=40,cr=Math.max(-Ue,Math.min(Ue,Math.round(Ne/_e)));if(ne=ne-cr,fe[ne]!==void 0)break;fe[ne]=pe}return ne},le=function(X){var U=e.direction.getPosition(S);if(r[S.id]===void 0){var ne={};u(S,ne),r[S.id]=ne}var fe=l(r[S.id]),pe=fe[2],Ne=fe[3],_e=X-U,Ue=0;_e>0?Ue=Math.min(_e,Ne-e.options.hierarchical.nodeSpacing):_e<0&&(Ue=-Math.min(-_e,pe-e.options.hierarchical.nodeSpacing)),Ue!=0&&(e._shiftBlock(S.id,Ue),t=!0)},F=function(X){var U=e.direction.getPosition(S),ne=e._getSpaceAroundNode(S),fe=$e(ne,2),pe=fe[0],Ne=fe[1],_e=X-U,Ue=U;_e>0?Ue=Math.min(U+(Ne-e.options.hierarchical.nodeSpacing),X):_e<0&&(Ue=Math.max(U-(pe-e.options.hierarchical.nodeSpacing),X)),Ue!==U&&(e.direction.setPosition(S,Ue),t=!0)},$=te(_,P);le($),$=te(_,O),F($)},v=function(_){var S=e.hierarchical.getLevels();S=xi(S).call(S);for(var k=0;k<_;k++){t=!1;for(var O=0;O<S.length;O++)for(var C=S[O],I=e.hierarchical.distributionOrdering[C],T=0;T<I.length;T++)c(1e3,I[T]);if(t!==!0)break}},m=function(_){var S=e.hierarchical.getLevels();S=xi(S).call(S);for(var k=0;k<_&&(t=!1,f(d,S,!0),t===!0);k++);},w=function(){for(var _ in e.body.nodes)Object.prototype.hasOwnProperty.call(e.body.nodes,_)&&e._centerParent(e.body.nodes[_])},g=function(){var _=e.hierarchical.getLevels();_=xi(_).call(_);for(var S=0;S<_.length;S++)for(var k=_[S],O=e.hierarchical.distributionOrdering[k],C=0;C<O.length;C++)e._centerParent(O[C])};this.options.hierarchical.blockShifting===!0&&(m(5),w()),this.options.hierarchical.edgeMinimization===!0&&v(20),this.options.hierarchical.parentCentralization===!0&&g(),a()}},{key:"_getSpaceAroundNode",value:function(e,t){var r=!0;t===void 0&&(r=!1);var a=this.hierarchical.levels[e.id];if(a!==void 0){var o=this.hierarchical.distributionIndex[e.id],s=this.direction.getPosition(e),u=this.hierarchical.distributionOrdering[a],l=1e9,h=1e9;if(o!==0){var f=u[o-1];if(r===!0&&t[f.id]===void 0||r===!1){var d=this.direction.getPosition(f);l=s-d}}if(o!=u.length-1){var c=u[o+1];if(r===!0&&t[c.id]===void 0||r===!1){var v=this.direction.getPosition(c);h=Math.min(h,v-s)}}return[l,h]}else return[0,0]}},{key:"_centerParent",value:function(e){if(this.hierarchical.parentReference[e.id])for(var t=this.hierarchical.parentReference[e.id],r=0;r<t.length;r++){var a=t[r],o=this.body.nodes[a],s=this.hierarchical.childrenReference[a];if(s!==void 0){var u=this._getCenterPosition(s),l=this.direction.getPosition(o),h=this._getSpaceAroundNode(o),f=$e(h,2),d=f[0],c=f[1],v=l-u;(v<0&&Math.abs(v)<c-this.options.hierarchical.nodeSpacing||v>0&&Math.abs(v)<d-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(o,u)}}}},{key:"_placeNodesByHierarchy",value:function(e){this.positionedNodes={};for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var r,a=De(e[t]);a=this._indexArrayToNodes(a),ff(r=this.direction).call(r,a);for(var o=0,s=0;s<a.length;s++){var u=a[s];if(this.positionedNodes[u.id]===void 0){var l=this.options.hierarchical.nodeSpacing,h=l*o;o>0&&(h=this.direction.getPosition(a[s-1])+l),this.direction.setPosition(u,h,t),this._validatePositionAndContinue(u,t,h),o++}}}}},{key:"_placeBranchNodes",value:function(e,t){var r,a=this.hierarchical.childrenReference[e];if(a!==void 0){for(var o=[],s=0;s<a.length;s++)o.push(this.body.nodes[a[s]]);ff(r=this.direction).call(r,o);for(var u=0;u<o.length;u++){var l=o[u],h=this.hierarchical.levels[l.id];if(h>t&&this.positionedNodes[l.id]===void 0){var f=this.options.hierarchical.nodeSpacing,d=void 0;u===0?d=this.direction.getPosition(this.body.nodes[e]):d=this.direction.getPosition(o[u-1])+f,this.direction.setPosition(l,d,h),this._validatePositionAndContinue(l,h,d)}else return}var c=this._getCenterPosition(o);this.direction.setPosition(this.body.nodes[e],c,t)}}},{key:"_validatePositionAndContinue",value:function(e,t,r){if(!!this.hierarchical.isTree){if(this.lastNodeOnLevel[t]!==void 0){var a=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[t]]);if(r-a<this.options.hierarchical.nodeSpacing){var o=a+this.options.hierarchical.nodeSpacing-r,s=this._findCommonParent(this.lastNodeOnLevel[t],e.id);this._shiftBlock(s.withChild,o)}}this.lastNodeOnLevel[t]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,t)}}},{key:"_indexArrayToNodes",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.body.nodes[e[r]]);return t}},{key:"_getDistribution",value:function(){var e={},t,r;for(t in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,t)){r=this.body.nodes[t];var a=this.hierarchical.levels[t]===void 0?0:this.hierarchical.levels[t];this.direction.fix(r,a),e[a]===void 0&&(e[a]={}),e[a][t]=r}return e}},{key:"_getActiveEdges",value:function(e){var t=this,r=[];return ue(e.edges,function(a){var o;ve(o=t.body.edgeIndices).call(o,a.id)!==-1&&r.push(a)}),r}},{key:"_getHubSizes",value:function(){var e=this,t={},r=this.body.nodeIndices;ue(r,function(o){var s=e.body.nodes[o],u=e._getActiveEdges(s).length;t[u]=!0});var a=[];return ue(t,function(o){a.push(Number(o))}),ff(ou).call(ou,a,function(o,s){return s-o}),a}},{key:"_determineLevelsByHubsize",value:function(){for(var e=this,t=function(l,h){e.hierarchical.levelDownstream(l,h)},r=this._getHubSizes(),a=function(l){var h=r[l];if(h===0)return"break";ue(e.body.nodeIndices,function(f){var d=e.body.nodes[f];h===e._getActiveEdges(d).length&&e._crawlNetwork(t,f)})},o=0;o<r.length;++o){var s=a(o);if(s==="break")break}}},{key:"_determineLevelsCustomCallback",value:function(){var e=this,t=1e5,r=function(s,u,l){},a=function(s,u,l){var h=e.hierarchical.levels[s.id];h===void 0&&(h=e.hierarchical.levels[s.id]=t);var f=r(ct.cloneOptions(s,"node"),ct.cloneOptions(u,"node"),ct.cloneOptions(l,"edge"));e.hierarchical.levels[u.id]=h+f};this._crawlNetwork(a),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var e,t=this,r=n0(e=this.body.nodeIndices).call(e,function(a,o){return a.set(o,t.body.nodes[o]),a},new Gm);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=M3(r):this.hierarchical.levels=D3(r),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var e=this,t=function(a,o){e.hierarchical.levels[o.id]>e.hierarchical.levels[a.id]&&e.hierarchical.addRelation(a.id,o.id)};this._crawlNetwork(t),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0,a={},o=function d(c,v){if(a[c.id]===void 0){e.hierarchical.setTreeIndex(c,v),a[c.id]=!0;for(var m,w=e._getActiveEdges(c),g=0;g<w.length;g++){var E=w[g];E.connected===!0&&(E.toId==c.id?m=E.from:m=E.to,c.id!=m.id&&(t(c,m,E),d(m,v)))}}};if(r===void 0)for(var s=0,u=0;u<this.body.nodeIndices.length;u++){var l=this.body.nodeIndices[u];if(a[l]===void 0){var h=this.body.nodes[l];o(h,s),s+=1}}else{var f=this.body.nodes[r];if(f===void 0){console.error("Node not found:",r);return}o(f)}}},{key:"_shiftBlock",value:function(e,t){var r=this,a={},o=function s(u){if(!a[u]){a[u]=!0,r.direction.shift(u,t);var l=r.hierarchical.childrenReference[u];if(l!==void 0)for(var h=0;h<l.length;h++)s(l[h])}};o(e)}},{key:"_findCommonParent",value:function(e,t){var r=this,a={},o=function u(l,h){var f=r.hierarchical.parentReference[h];if(f!==void 0)for(var d=0;d<f.length;d++){var c=f[d];l[c]=!0,u(l,c)}},s=function u(l,h){var f=r.hierarchical.parentReference[h];if(f!==void 0)for(var d=0;d<f.length;d++){var c=f[d];if(l[c]!==void 0)return{foundParent:c,withChild:h};var v=u(l,c);if(v.foundParent!==null)return v}return{foundParent:null,withChild:h}};return o(a,e),s(a,t)}},{key:"setDirectionStrategy",value:function(){var e=this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU";e?this.direction=new m3(this):this.direction=new b3(this)}},{key:"_getCenterPosition",value:function(e){for(var t=1e9,r=-1e9,a=0;a<e.length;a++){var o=void 0;if(e[a].id!==void 0)o=e[a];else{var s=e[a];o=this.body.nodes[s]}var u=this.direction.getPosition(o);t=Math.min(t,u),r=Math.max(r,u)}return .5*(t+r)}}]),i}();function B3(i,n){var e=typeof Ar!="undefined"&&or(i)||i["@@iterator"];if(!e){if(me(i)||(e=N3(i))||n&&i&&typeof i.length=="number"){e&&(i=e);var t=0,r=function(){};return{s:r,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(i)},n:function(){var l=e.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function N3(i,n){var e;if(!!i){if(typeof i=="string")return d0(i,n);var t=Je(e=Object.prototype.toString.call(i)).call(e,8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Ur(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d0(i,n)}}function d0(i,n){(n==null||n>i.length)&&(n=i.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=i[e];return t}var L3=function(){function i(n,e,t,r){var a=this,o,s;z(this,i),this.body=n,this.canvas=e,this.selectionHandler=t,this.interactionHandler=r,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},je(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){a._clean()}),this.body.emitter.on("_dataChanged",B(o=this._restore).call(o,this)),this.body.emitter.on("_resetData",B(s=this._restore).call(s,this))}return j(i,[{key:"_restore",value:function(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(e,t,r){t!==void 0&&(t.locale!==void 0?this.options.locale=t.locale:this.options.locale=r.locale,t.locales!==void 0?this.options.locales=t.locales:this.options.locales=r.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,ke(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,t;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var r=this.selectionHandler.getSelectedNodeCount(),a=this.selectionHandler.getSelectedEdgeCount(),o=r+a,s=this.options.locales[this.options.locale],u=!1;this.options.addNode!==!1&&(this._createAddNodeButton(s),u=!0),this.options.addEdge!==!1&&(u===!0?this._createSeperator(1):u=!0,this._createAddEdgeButton(s)),r===1&&typeof this.options.editNode=="function"?(u===!0?this._createSeperator(2):u=!0,this._createEditNodeButton(s)):a===1&&r===0&&this.options.editEdge!==!1&&(u===!0?this._createSeperator(3):u=!0,this._createEditEdgeButton(s)),o!==0&&(r>0&&this.options.deleteNode!==!1?(u===!0&&this._createSeperator(4),this._createDeleteButton(s)):r===0&&this.options.deleteEdge!==!1&&(u===!0&&this._createSeperator(4),this._createDeleteButton(s))),this._bindElementEvents(this.closeDiv,B(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",B(t=this.showManipulatorToolbar).call(t,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var t,r=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(r),this._createSeperator(),this._createDescription(r.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,B(t=this.toggleEditMode).call(t,this))}this._temporaryBindEvent("click",B(e=this._performAddNode).call(e,this))}},{key:"editNode",value:function(){var e=this;this.editMode!==!0&&this.enableEditMode(),this._clean();var t=this.selectionHandler.getSelectedNodes()[0];if(t!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(t.isCluster!==!0){var r=ke({},t.options,!1);if(r.x=t.x,r.y=t.y,this.options.editNode.length===2)this.options.editNode(r,function(a){a!=null&&e.inMode==="editNode"&&e.body.data.nodes.getDataSet().update(a),e.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var e,t,r,a,o;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var s,u=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(u),this._createSeperator(),this._createDescription(u.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,B(s=this.toggleEditMode).call(s,this))}this._temporaryBindUI("onTouch",B(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",B(t=this._finishConnect).call(t,this)),this._temporaryBindUI("onDrag",B(r=this._dragControlNode).call(r,this)),this._temporaryBindUI("onRelease",B(a=this._finishConnect).call(a,this)),this._temporaryBindUI("onDragStart",B(o=this._dragStartEdge).call(o,this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",Ee(this.options.editEdge)==="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){var e=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(e.from.id,e.to.id);return}if(this.guiEnabled===!0){var t,r=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(r),this._createSeperator(),this._createDescription(r.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,B(t=this.toggleEditMode).call(t,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var a,o,s,u,l=this.body.edges[this.edgeBeingEditedId],h=this._getNewTargetNode(l.from.x,l.from.y),f=this._getNewTargetNode(l.to.x,l.to.y);this.temporaryIds.nodes.push(h.id),this.temporaryIds.nodes.push(f.id),this.body.nodes[h.id]=h,this.body.nodeIndices.push(h.id),this.body.nodes[f.id]=f,this.body.nodeIndices.push(f.id),this._temporaryBindUI("onTouch",B(a=this._controlNodeTouch).call(a,this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",B(o=this._controlNodeDragStart).call(o,this)),this._temporaryBindUI("onDrag",B(s=this._controlNodeDrag).call(s,this)),this._temporaryBindUI("onDragEnd",B(u=this._controlNodeDragEnd).call(u,this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(d){var c=l.edgeType.findBorderPositions(d);h.selected===!1&&(h.x=c.from.x,h.y=c.from.y),f.selected===!1&&(f.x=c.to.x,f.y=c.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var e=this;this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";var t=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds(),a=void 0;if(t.length>0){for(var o=0;o<t.length;o++)if(this.body.nodes[t[o]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(a=this.options.deleteNode)}else r.length>0&&typeof this.options.deleteEdge=="function"&&(a=this.options.deleteEdge);if(typeof a=="function"){var s={nodes:t,edges:r};if(a.length===2)a(s,function(u){u!=null&&e.inMode==="delete"?(e.body.data.edges.getDataSet().remove(u.edges),e.body.data.nodes.getDataSet().remove(u.nodes),e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar()):(e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(t),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,t;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(t=this.options.locales[this.options.locale])===null||t===void 0?void 0:t.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}},{key:"_getNewTargetNode",value:function(e,t){var r=ke({},this.options.controlNodeStyle);r.id="targetNode"+ro(),r.hidden=!1,r.physics=!1,r.x=e,r.y=t;var a=this.body.functions.createNode(r);return a.shape.boundingBox={left:e,right:e,top:t,bottom:t},a}},{key:"_createEditButton",value:function(){var e;this._clean(),this.manipulationDOM={},Zr(this.editModeDiv);var t=this.options.locales[this.options.locale],r=this._createButton("editMode","vis-edit vis-edit-mode",t.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(r),this._bindElementEvents(r,B(e=this.toggleEditMode).call(e,this))}},{key:"_clean",value:function(){this.inMode=!1,this.guiEnabled===!0&&(Zr(this.editModeDiv),Zr(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var e,t=B3($r(e=this._domEventListenerCleanupQueue).call(e,0)),r;try{for(t.s();!(r=t.n()).done;){var a=r.value;a()}}catch(o){t.e(o)}finally{t.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),Zr(this.manipulationDiv),Zr(this.editModeDiv),Zr(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}},{key:"_createAddNodeButton",value:function(e){var t,r=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(r),this._bindElementEvents(r,B(t=this.addNodeMode).call(t,this))}},{key:"_createAddEdgeButton",value:function(e){var t,r=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(r),this._bindElementEvents(r,B(t=this.addEdgeMode).call(t,this))}},{key:"_createEditNodeButton",value:function(e){var t,r=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(r),this._bindElementEvents(r,B(t=this.editNode).call(t,this))}},{key:"_createEditEdgeButton",value:function(e){var t,r=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(r),this._bindElementEvents(r,B(t=this.editEdgeMode).call(t,this))}},{key:"_createDeleteButton",value:function(e){var t,r;this.options.rtl?r="vis-delete-rtl":r="vis-delete";var a=this._createButton("delete",r,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(a),this._bindElementEvents(a,B(t=this.deleteSelected).call(t,this))}},{key:"_createBackButton",value:function(e){var t,r=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(r),this._bindElementEvents(r,B(t=this.showManipulatorToolbar).call(t,this))}},{key:"_createButton",value:function(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+t,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=a,this.manipulationDOM[e+"Label"].innerText=r,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}},{key:"_createDescription",value:function(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(e,t){this.temporaryEventFunctions.push({event:e,boundFunction:t}),this.body.emitter.on(e,t)}},{key:"_temporaryBindUI",value:function(e,t){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=t;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+Fa(De(this.body.eventListeners)))}},{key:"_unbindTemporaryUIs",value:function(){for(var e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var e=0;e<this.temporaryEventFunctions.length;e++){var t=this.temporaryEventFunctions[e].event,r=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(t,r)}this.temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(e,t){var r=new An(e,{});Js(r,t),this._domEventListenerCleanupQueue.push(function(){r.destroy()});var a=function(s){var u=s.keyCode,l=s.key;(l==="Enter"||l===" "||u===13||u===32)&&t()};e.addEventListener("keyup",a,!1),this._domEventListenerCleanupQueue.push(function(){e.removeEventListener("keyup",a,!1)})}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var e=0;e<this.temporaryIds.edges.length;e++){var t;this.body.edges[this.temporaryIds.edges[e]].disconnect(),delete this.body.edges[this.temporaryIds.edges[e]];var r=ve(t=this.body.edgeIndices).call(t,this.temporaryIds.edges[e]);if(r!==-1){var a;$r(a=this.body.edgeIndices).call(a,r,1)}}for(var o=0;o<this.temporaryIds.nodes.length;o++){var s;delete this.body.nodes[this.temporaryIds.nodes[o]];var u=ve(s=this.body.nodeIndices).call(s,this.temporaryIds.nodes[o]);if(u!==-1){var l;$r(l=this.body.nodeIndices).call(l,u,1)}}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=je({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var e=this.lastTouch,t=this.selectionHandler._pointerToPositionObject(e),r=this.body.nodes[this.temporaryIds.nodes[0]],a=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var s=r.isOverlappingWith(t),u=a.isOverlappingWith(t);s===!0?(this.selectedControlNode=r,o.edgeType.from=r):u===!0&&(this.selectedControlNode=a,o.edgeType.to=a),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(e){this.body.emitter.emit("disablePhysics");var t=this.body.functions.getPointer(e.center),r=this.canvas.DOMtoCanvas(t);this.selectedControlNode!==void 0?(this.selectedControlNode.x=r.x,this.selectedControlNode.y=r.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(e){var t=this.body.functions.getPointer(e.center),r=this.selectionHandler._pointerToPositionObject(t),a=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode!==void 0){this.selectionHandler.unselectAll();for(var o=this.selectionHandler._getAllNodesOverlappingWith(r),s=void 0,u=o.length-1;u>=0;u--)if(o[u]!==this.selectedControlNode.id){s=this.body.nodes[o[u]];break}if(s!==void 0&&this.selectedControlNode!==void 0)if(s.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var l=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===l.id?this._performEditEdge(s.id,a.to.id):this._performEditEdge(a.from.id,s.id)}else a.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=je({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var t=this.lastTouch,r=this.selectionHandler.getNodeAt(t);if(r!==void 0)if(r.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var a=this._getNewTargetNode(r.x,r.y);this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id);var o=this.body.functions.createEdge({id:"connectionEdge"+ro(),from:r.id,to:a.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[o.id]=o,this.body.edgeIndices.push(o.id),this.temporaryIds.nodes.push(a.id),this.temporaryIds.edges.push(o.id)}this.touchTime=new Date().valueOf()}}},{key:"_dragControlNode",value:function(e){var t=this.body.functions.getPointer(e.center),r=this.selectionHandler._pointerToPositionObject(t),a=void 0;this.temporaryIds.edges[0]!==void 0&&(a=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(r),s=void 0,u=o.length-1;u>=0;u--){var l;if(ve(l=this.temporaryIds.nodes).call(l,o[u])===-1){s=this.body.nodes[o[u]];break}}if(e.controlEdge={from:a,to:s?s.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,t),this.temporaryIds.nodes[0]!==void 0){var h=this.body.nodes[this.temporaryIds.nodes[0]];h.x=this.canvas._XconvertDOMtoCanvas(t.x),h.y=this.canvas._YconvertDOMtoCanvas(t.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}},{key:"_finishConnect",value:function(e){var t=this.body.functions.getPointer(e.center),r=this.selectionHandler._pointerToPositionObject(t),a=void 0;this.temporaryIds.edges[0]!==void 0&&(a=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(r),s=void 0,u=o.length-1;u>=0;u--){var l;if(ve(l=this.temporaryIds.nodes).call(l,o[u])===-1){s=this.body.nodes[o[u]];break}}this._cleanupTemporaryNodesAndEdges(),s!==void 0&&(s.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[a]!==void 0&&this.body.nodes[s.id]!==void 0&&this._performAddEdge(a,s.id)),e.controlEdge={from:a,to:s?s.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,t),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(e){var t=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,t,void 0,!0)}},{key:"_performAddNode",value:function(e){var t=this,r={id:ro(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(r,function(a){a!=null&&t.inMode==="addNode"&&t.body.data.nodes.getDataSet().add(a),t.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(e,t){var r=this,a={from:e,to:t};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(a,function(o){o!=null&&r.inMode==="addEdge"&&(r.body.data.edges.getDataSet().add(o),r.selectionHandler.unselectAll(),r.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(a),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(e,t){var r=this,a={id:this.edgeBeingEditedId,from:e,to:t,label:this.body.data.edges.get(this.edgeBeingEditedId).label},o=this.options.editEdge;if(Ee(o)==="object"&&(o=o.editWithoutDrag),typeof o=="function")if(o.length===2)o(a,function(s){s==null||r.inMode!=="editEdge"?(r.body.edges[a.id].updateEdgeType(),r.body.emitter.emit("_redraw"),r.showManipulatorToolbar()):(r.body.data.edges.getDataSet().update(s),r.selectionHandler.unselectAll(),r.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(a),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),i}(),L="string",N="boolean",x="number",oo="array",Y="object",c0="dom",z3="any",df=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],cf={borderWidth:{number:x},borderWidthSelected:{number:x,undefined:"undefined"},brokenImage:{string:L,undefined:"undefined"},chosen:{label:{boolean:N,function:"function"},node:{boolean:N,function:"function"},__type__:{object:Y,boolean:N}},color:{border:{string:L},background:{string:L},highlight:{border:{string:L},background:{string:L},__type__:{object:Y,string:L}},hover:{border:{string:L},background:{string:L},__type__:{object:Y,string:L}},__type__:{object:Y,string:L}},opacity:{number:x,undefined:"undefined"},fixed:{x:{boolean:N},y:{boolean:N},__type__:{object:Y,boolean:N}},font:{align:{string:L},color:{string:L},size:{number:x},face:{string:L},background:{string:L},strokeWidth:{number:x},strokeColor:{string:L},vadjust:{number:x},multi:{boolean:N,string:L},bold:{color:{string:L},size:{number:x},face:{string:L},mod:{string:L},vadjust:{number:x},__type__:{object:Y,string:L}},boldital:{color:{string:L},size:{number:x},face:{string:L},mod:{string:L},vadjust:{number:x},__type__:{object:Y,string:L}},ital:{color:{string:L},size:{number:x},face:{string:L},mod:{string:L},vadjust:{number:x},__type__:{object:Y,string:L}},mono:{color:{string:L},size:{number:x},face:{string:L},mod:{string:L},vadjust:{number:x},__type__:{object:Y,string:L}},__type__:{object:Y,string:L}},group:{string:L,number:x,undefined:"undefined"},heightConstraint:{minimum:{number:x},valign:{string:L},__type__:{object:Y,boolean:N,number:x}},hidden:{boolean:N},icon:{face:{string:L},code:{string:L},size:{number:x},color:{string:L},weight:{string:L,number:x},__type__:{object:Y}},id:{string:L,number:x},image:{selected:{string:L,undefined:"undefined"},unselected:{string:L,undefined:"undefined"},__type__:{object:Y,string:L}},imagePadding:{top:{number:x},right:{number:x},bottom:{number:x},left:{number:x},__type__:{object:Y,number:x}},label:{string:L,undefined:"undefined"},labelHighlightBold:{boolean:N},level:{number:x,undefined:"undefined"},margin:{top:{number:x},right:{number:x},bottom:{number:x},left:{number:x},__type__:{object:Y,number:x}},mass:{number:x},physics:{boolean:N},scaling:{min:{number:x},max:{number:x},label:{enabled:{boolean:N},min:{number:x},max:{number:x},maxVisible:{number:x},drawThreshold:{number:x},__type__:{object:Y,boolean:N}},customScalingFunction:{function:"function"},__type__:{object:Y}},shadow:{enabled:{boolean:N},color:{string:L},size:{number:x},x:{number:x},y:{number:x},__type__:{object:Y,boolean:N}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:N,array:oo},borderRadius:{number:x},interpolation:{boolean:N},useImageSize:{boolean:N},useBorderWithImage:{boolean:N},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Y}},size:{number:x},title:{string:L,dom:c0,undefined:"undefined"},value:{number:x,undefined:"undefined"},widthConstraint:{minimum:{number:x},maximum:{number:x},__type__:{object:Y,boolean:N,number:x}},x:{number:x},y:{number:x},__type__:{object:Y}},j3={configure:{enabled:{boolean:N},filter:{boolean:N,string:L,array:oo,function:"function"},container:{dom:c0},showButton:{boolean:N},__type__:{object:Y,boolean:N,string:L,array:oo,function:"function"}},edges:{arrows:{to:{enabled:{boolean:N},scaleFactor:{number:x},type:{string:df},imageHeight:{number:x},imageWidth:{number:x},src:{string:L},__type__:{object:Y,boolean:N}},middle:{enabled:{boolean:N},scaleFactor:{number:x},type:{string:df},imageWidth:{number:x},imageHeight:{number:x},src:{string:L},__type__:{object:Y,boolean:N}},from:{enabled:{boolean:N},scaleFactor:{number:x},type:{string:df},imageWidth:{number:x},imageHeight:{number:x},src:{string:L},__type__:{object:Y,boolean:N}},__type__:{string:["from","to","middle"],object:Y}},endPointOffset:{from:{number:x},to:{number:x},__type__:{object:Y,number:x}},arrowStrikethrough:{boolean:N},background:{enabled:{boolean:N},color:{string:L},size:{number:x},dashes:{boolean:N,array:oo},__type__:{object:Y,boolean:N}},chosen:{label:{boolean:N,function:"function"},edge:{boolean:N,function:"function"},__type__:{object:Y,boolean:N}},color:{color:{string:L},highlight:{string:L},hover:{string:L},inherit:{string:["from","to","both"],boolean:N},opacity:{number:x},__type__:{object:Y,string:L}},dashes:{boolean:N,array:oo},font:{color:{string:L},size:{number:x},face:{string:L},background:{string:L},strokeWidth:{number:x},strokeColor:{string:L},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:x},multi:{boolean:N,string:L},bold:{color:{string:L},size:{number:x},face:{string:L},mod:{string:L},vadjust:{number:x},__type__:{object:Y,string:L}},boldital:{color:{string:L},size:{number:x},face:{string:L},mod:{string:L},vadjust:{number:x},__type__:{object:Y,string:L}},ital:{color:{string:L},size:{number:x},face:{string:L},mod:{string:L},vadjust:{number:x},__type__:{object:Y,string:L}},mono:{color:{string:L},size:{number:x},face:{string:L},mod:{string:L},vadjust:{number:x},__type__:{object:Y,string:L}},__type__:{object:Y,string:L}},hidden:{boolean:N},hoverWidth:{function:"function",number:x},label:{string:L,undefined:"undefined"},labelHighlightBold:{boolean:N},length:{number:x,undefined:"undefined"},physics:{boolean:N},scaling:{min:{number:x},max:{number:x},label:{enabled:{boolean:N},min:{number:x},max:{number:x},maxVisible:{number:x},drawThreshold:{number:x},__type__:{object:Y,boolean:N}},customScalingFunction:{function:"function"},__type__:{object:Y}},selectionWidth:{function:"function",number:x},selfReferenceSize:{number:x},selfReference:{size:{number:x},angle:{number:x},renderBehindTheNode:{boolean:N},__type__:{object:Y}},shadow:{enabled:{boolean:N},color:{string:L},size:{number:x},x:{number:x},y:{number:x},__type__:{object:Y,boolean:N}},smooth:{enabled:{boolean:N},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:x},forceDirection:{string:["horizontal","vertical","none"],boolean:N},__type__:{object:Y,boolean:N}},title:{string:L,undefined:"undefined"},width:{number:x},widthConstraint:{maximum:{number:x},__type__:{object:Y,boolean:N,number:x}},value:{number:x,undefined:"undefined"},__type__:{object:Y}},groups:{useDefaultGroups:{boolean:N},__any__:cf,__type__:{object:Y}},interaction:{dragNodes:{boolean:N},dragView:{boolean:N},hideEdgesOnDrag:{boolean:N},hideEdgesOnZoom:{boolean:N},hideNodesOnDrag:{boolean:N},hover:{boolean:N},keyboard:{enabled:{boolean:N},speed:{x:{number:x},y:{number:x},zoom:{number:x},__type__:{object:Y}},bindToWindow:{boolean:N},autoFocus:{boolean:N},__type__:{object:Y,boolean:N}},multiselect:{boolean:N},navigationButtons:{boolean:N},selectable:{boolean:N},selectConnectedEdges:{boolean:N},hoverConnectedEdges:{boolean:N},tooltipDelay:{number:x},zoomView:{boolean:N},zoomSpeed:{number:x},__type__:{object:Y}},layout:{randomSeed:{undefined:"undefined",number:x,string:L},improvedLayout:{boolean:N},clusterThreshold:{number:x},hierarchical:{enabled:{boolean:N},levelSeparation:{number:x},nodeSpacing:{number:x},treeSpacing:{number:x},blockShifting:{boolean:N},edgeMinimization:{boolean:N},parentCentralization:{boolean:N},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Y,boolean:N}},__type__:{object:Y}},manipulation:{enabled:{boolean:N},initiallyActive:{boolean:N},addNode:{boolean:N,function:"function"},addEdge:{boolean:N,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Y,boolean:N,function:"function"}},deleteNode:{boolean:N,function:"function"},deleteEdge:{boolean:N,function:"function"},controlNodeStyle:cf,__type__:{object:Y,boolean:N}},nodes:cf,physics:{enabled:{boolean:N},barnesHut:{theta:{number:x},gravitationalConstant:{number:x},centralGravity:{number:x},springLength:{number:x},springConstant:{number:x},damping:{number:x},avoidOverlap:{number:x},__type__:{object:Y}},forceAtlas2Based:{theta:{number:x},gravitationalConstant:{number:x},centralGravity:{number:x},springLength:{number:x},springConstant:{number:x},damping:{number:x},avoidOverlap:{number:x},__type__:{object:Y}},repulsion:{centralGravity:{number:x},springLength:{number:x},springConstant:{number:x},nodeDistance:{number:x},damping:{number:x},__type__:{object:Y}},hierarchicalRepulsion:{centralGravity:{number:x},springLength:{number:x},springConstant:{number:x},nodeDistance:{number:x},damping:{number:x},avoidOverlap:{number:x},__type__:{object:Y}},maxVelocity:{number:x},minVelocity:{number:x},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:N},iterations:{number:x},updateInterval:{number:x},onlyDynamicEdges:{boolean:N},fit:{boolean:N},__type__:{object:Y,boolean:N}},timestep:{number:x},adaptiveTimestep:{boolean:N},wind:{x:{number:x},y:{number:x},__type__:{object:Y}},__type__:{object:Y,boolean:N}},autoResize:{boolean:N},clickToUse:{boolean:N},locale:{string:L},locales:{__any__:{any:z3},__type__:{object:Y}},height:{string:L},width:{string:L},__type__:{object:Y}},v0={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},H3=function(n,e,t){var r;return!!(ur(n).call(n,"physics")&&ur(r=v0.physics.solver).call(r,e)&&t.physics.solver!==e&&e!=="wind")},W3=function(){function i(){z(this,i)}return j(i,[{key:"getDistances",value:function(e,t,r){for(var a={},o=e.edges,s=0;s<t.length;s++){var u=t[s],l={};a[u]=l;for(var h=0;h<t.length;h++)l[t[h]]=s==h?0:1e9}for(var f=0;f<r.length;f++){var d=o[r[f]];d.connected===!0&&a[d.fromId]!==void 0&&a[d.toId]!==void 0&&(a[d.fromId][d.toId]=1,a[d.toId][d.fromId]=1)}for(var c=t.length,v=0;v<c;v++)for(var m=t[v],w=a[m],g=0;g<c-1;g++)for(var E=t[g],_=a[E],S=g+1;S<c;S++){var k=t[S],O=a[k],C=Math.min(_[k],_[m]+w[k]);_[k]=C,O[E]=C}return a}}]),i}(),U3=function(){function i(n,e,t){z(this,i),this.body=n,this.springLength=e,this.springConstant=t,this.distanceSolver=new W3}return j(i,[{key:"setOptions",value:function(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}},{key:"solve",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this.distanceSolver.getDistances(this.body,e,t);this._createL_matrix(a),this._createK_matrix(a),this._createE_matrix();for(var o=.01,s=1,u=0,l=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),h=5,f=1e9,d=0,c=0,v=0,m=0,w=0;f>o&&u<l;){u+=1;var g=this._getHighestEnergyNode(r),E=$e(g,4);for(d=E[0],f=E[1],c=E[2],v=E[3],m=f,w=0;m>s&&w<h;){w+=1,this._moveNode(d,c,v);var _=this._getEnergy(d),S=$e(_,3);m=S[0],c=S[1],v=S[2]}}}},{key:"_getHighestEnergyNode",value:function(e){for(var t=this.body.nodeIndices,r=this.body.nodes,a=0,o=t[0],s=0,u=0,l=0;l<t.length;l++){var h=t[l];if(r[h].predefinedPosition!==!0||r[h].isCluster===!0&&e===!0||r[h].options.fixed.x!==!0||r[h].options.fixed.y!==!0){var f=this._getEnergy(h),d=$e(f,3),c=d[0],v=d[1],m=d[2];a<c&&(a=c,o=h,s=v,u=m)}}return[o,a,s,u]}},{key:"_getEnergy",value:function(e){var t=$e(this.E_sums[e],2),r=t[0],a=t[1],o=Math.sqrt(Math.pow(r,2)+Math.pow(a,2));return[o,r,a]}},{key:"_moveNode",value:function(e,t,r){for(var a=this.body.nodeIndices,o=this.body.nodes,s=0,u=0,l=0,h=o[e].x,f=o[e].y,d=this.K_matrix[e],c=this.L_matrix[e],v=0;v<a.length;v++){var m=a[v];if(m!==e){var w=o[m].x,g=o[m].y,E=d[m],_=c[m],S=1/Math.pow(Math.pow(h-w,2)+Math.pow(f-g,2),1.5);s+=E*(1-_*Math.pow(f-g,2)*S),u+=E*(_*(h-w)*(f-g)*S),l+=E*(1-_*Math.pow(h-w,2)*S)}}var k=s,O=u,C=t,I=l,T=r,P=(C/k+T/O)/(O/k-I/O),R=-(O*P+C)/k;o[e].x+=R,o[e].y+=P,this._updateE_matrix(e)}},{key:"_createL_matrix",value:function(e){var t=this.body.nodeIndices,r=this.springLength;this.L_matrix=[];for(var a=0;a<t.length;a++){this.L_matrix[t[a]]={};for(var o=0;o<t.length;o++)this.L_matrix[t[a]][t[o]]=r*e[t[a]][t[o]]}}},{key:"_createK_matrix",value:function(e){var t=this.body.nodeIndices,r=this.springConstant;this.K_matrix=[];for(var a=0;a<t.length;a++){this.K_matrix[t[a]]={};for(var o=0;o<t.length;o++)this.K_matrix[t[a]][t[o]]=r*Math.pow(e[t[a]][t[o]],-2)}}},{key:"_createE_matrix",value:function(){var e=this.body.nodeIndices,t=this.body.nodes;this.E_matrix={},this.E_sums={};for(var r=0;r<e.length;r++)this.E_matrix[e[r]]=[];for(var a=0;a<e.length;a++){for(var o=e[a],s=t[o].x,u=t[o].y,l=0,h=0,f=a;f<e.length;f++){var d=e[f];if(d!==o){var c=t[d].x,v=t[d].y,m=1/Math.sqrt(Math.pow(s-c,2)+Math.pow(u-v,2));this.E_matrix[o][f]=[this.K_matrix[o][d]*(s-c-this.L_matrix[o][d]*(s-c)*m),this.K_matrix[o][d]*(u-v-this.L_matrix[o][d]*(u-v)*m)],this.E_matrix[d][a]=this.E_matrix[o][f],l+=this.E_matrix[o][f][0],h+=this.E_matrix[o][f][1]}}this.E_sums[o]=[l,h]}}},{key:"_updateE_matrix",value:function(e){for(var t=this.body.nodeIndices,r=this.body.nodes,a=this.E_matrix[e],o=this.K_matrix[e],s=this.L_matrix[e],u=r[e].x,l=r[e].y,h=0,f=0,d=0;d<t.length;d++){var c=t[d];if(c!==e){var v=a[d],m=v[0],w=v[1],g=r[c].x,E=r[c].y,_=1/Math.sqrt(Math.pow(u-g,2)+Math.pow(l-E,2)),S=o[c]*(u-g-s[c]*(u-g)*_),k=o[c]*(l-E-s[c]*(l-E)*_);a[d]=[S,k],h+=S,f+=k;var O=this.E_sums[c];O[0]+=S-m,O[1]+=k-w}}this.E_sums[e]=[h,f]}}]),i}();function q(i,n,e){var t,r,a,o,s=this;if(!(this instanceof q))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:zN,clickToUse:!1},je(this.options,this.defaultOptions),this.body={container:i,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:B(t=this.on).call(t,this),off:B(r=this.off).call(r,this),emit:B(a=this.emit).call(a,this),once:B(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new WN(function(){return s.body.emitter.emit("_requestRedraw")}),this.groups=new W2,this.canvas=new jj(this.body),this.selectionHandler=new E5(this.body,this.canvas),this.interactionHandler=new qj(this.body,this.canvas,this.selectionHandler),this.view=new Wj(this.body,this.canvas),this.renderer=new Nj(this.body,this.canvas),this.physics=new kj(this.body),this.layoutEngine=new R3(this.body),this.clustering=new Dj(this.body),this.manipulation=new L3(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new gz(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new vj(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new U3(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(e),this.setData(n)}wp(q.prototype);q.prototype.setOptions=function(i){var n=this;if(i===null&&(i=void 0),i!==void 0){var e=yN.validate(i,j3);e===!0&&console.error("%cErrors have been found in the supplied options object.",Tm);var t=["locale","locales","clickToUse"];if(xn(t,this.options,i),i.locale!==void 0&&(i.locale=jN(i.locales||this.options.locales,i.locale)),i=this.layoutEngine.setOptions(i.layout,i),this.canvas.setOptions(i),this.groups.setOptions(i.groups),this.nodesHandler.setOptions(i.nodes),this.edgesHandler.setOptions(i.edges),this.physics.setOptions(i.physics),this.manipulation.setOptions(i.manipulation,i,this.options),this.interactionHandler.setOptions(i.interaction),this.renderer.setOptions(i.interaction),this.selectionHandler.setOptions(i.interaction),i.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in i&&(this.configurator||(this.configurator=new pN(this,this.body.container,v0,this.canvas.pixelRatio,H3)),this.configurator.setOptions(i.configure)),this.configurator&&this.configurator.options.enabled===!0){var r={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};ke(r.nodes,this.nodesHandler.options),ke(r.edges,this.edgesHandler.options),ke(r.layout,this.layoutEngine.options),ke(r.interaction,this.selectionHandler.options),ke(r.interaction,this.renderer.options),ke(r.interaction,this.interactionHandler.options),ke(r.manipulation,this.manipulation.options),ke(r.physics,this.physics.options),ke(r.global,this.canvas.options),ke(r.global,this.options),this.configurator.setModuleOptions(r)}i.clickToUse!==void 0?i.clickToUse===!0?this.activator===void 0&&(this.activator=new vN(this.canvas.frame),this.activator.on("change",function(){n.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};q.prototype._updateVisibleIndices=function(){var i=this.body.nodes,n=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&!this.clustering._isClusteredNode(e)&&i[e].options.hidden===!1&&this.body.nodeIndices.push(i[e].id);for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t)){var r=n[t],a=i[r.fromId],o=i[r.toId],s=a!==void 0&&o!==void 0,u=!this.clustering._isClusteredEdge(t)&&r.options.hidden===!1&&s&&a.options.hidden===!1&&o.options.hidden===!1;u&&this.body.edgeIndices.push(r.id)}};q.prototype.bindEventListeners=function(){var i=this;this.body.emitter.on("_dataChanged",function(){i.edgesHandler._updateState(),i.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){i.clustering._updateState(),i._updateVisibleIndices(),i._updateValueRange(i.body.nodes),i._updateValueRange(i.body.edges),i.body.emitter.emit("startSimulation"),i.body.emitter.emit("_requestRedraw")})};q.prototype.setData=function(i){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),i&&i.dot&&(i.nodes||i.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(i&&i.options),i&&i.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var n=PN(i.dot);this.setData(n);return}else if(i&&i.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var e=IN(i.gephi);this.setData(e);return}else this.nodesHandler.setData(i&&i.nodes,!0),this.edgesHandler.setData(i&&i.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};q.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(var i in this.body.nodes)!Object.prototype.hasOwnProperty.call(this.body.nodes,i)||delete this.body.nodes[i];for(var n in this.body.edges)!Object.prototype.hasOwnProperty.call(this.body.edges,n)||delete this.body.edges[n];Zr(this.body.container)};q.prototype._updateValueRange=function(i){var n,e=void 0,t=void 0,r=0;for(n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var a=i[n].getValue();a!==void 0&&(e=e===void 0?a:Math.min(a,e),t=t===void 0?a:Math.max(a,t),r+=a)}if(e!==void 0&&t!==void 0)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&i[n].setValueRange(e,t,r)};q.prototype.isActive=function(){return!this.activator||this.activator.active};q.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};q.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};q.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};q.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};q.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};q.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};q.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};q.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};q.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};q.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};q.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};q.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};q.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};q.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};q.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};q.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};q.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};q.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};q.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};q.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};q.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};q.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};q.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};q.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};q.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};q.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};q.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};q.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};q.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};q.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};q.prototype.getConnectedNodes=function(i){return this.body.nodes[i]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};q.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};q.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};q.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};q.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};q.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};q.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};q.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};q.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};q.prototype.getNodeAt=function(){var i=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return i!==void 0&&i.id!==void 0?i.id:i};q.prototype.getEdgeAt=function(){var i=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return i!==void 0&&i.id!==void 0?i.id:i};q.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};q.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};q.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};q.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};q.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};q.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};q.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};q.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};q.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};q.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};q.prototype.getOptionsFromConfigurator=function(){var i={};return this.configurator&&(i=this.configurator.getOptions.apply(this.configurator)),i};var p0;(function(i){i[i.Single=1]="Single",i[i.Double=2]="Double",i[i.Triple=3]="Triple"})(p0||(p0={}));var vf=class{constructor(n,e,t,r){this._getterNodes=[],n=n.map((u,l,h)=>{let f=2*Math.PI*(l/h.length+.75),d=225+h.length*10;return Object.assign({},u,{x:d*Math.cos(f),y:d*Math.sin(f)})}),e=e.map(u=>Object.assign({},u));let a=this.nodes=new Pr(n),o=this.edges=new Pr(e);a.update(a.get().map(u=>{let l=o.get({filter:c=>c.from==u.id}),h=o.get({filter:c=>c.to==u.id}),d=(c=>new Set(c.map(v=>v.from+v.to)))(h).size*1.5;return l.length==0&&this._getterNodes.push(u.id),{id:u.id,shape:u.group!="__CONTEXT"?l.length>0?"dot":"diamond":null,borderWidth:d,borderWidthSelected:d,size:20+l.length*3}}));let s={physics:!1,nodes:{shape:"dot",font:{size:16}},edges:{arrows:"to",selectionWidth:u=>Math.max(3,u*1.5)},groups:{__CONTEXT:{shape:"box",shapeProperties:{borderRadius:1},color:"#bbb",font:{size:18}}}};this.network=new q(t,{nodes:a,edges:o},s),this._state=Object.assign({onlyInteractions:!1},r||{}),this.clicks=[0,0]}start(){this.network.on("click",()=>{this.network_displaySelection(this.clicks_track())}),this.redraw()}setState(n){this._state=n,this.redraw()}redraw(){this.network_displaySelection(1)}edges_displayAll(){this.edges_display(null)}edges_hideAll(){this.edges_display(null,!1)}edges_display(n,e=!0){n==null&&(n=this.edges.get().map(r=>r.id));let t=n.map(r=>({id:r,hidden:!e}));if(e&&this._state.onlyInteractions){let r=this.network_selectedNodes();t.forEach(a=>{let o=this.edges.get(a.id);!r.includes(o.to)&&!r.includes(o.from)&&this._getterNodes.includes(o.to)&&(a.hidden=!0)})}this.edges.update(t)}clicks_track(){let n=Date.now(),e=1;return n-this.clicks[1]<600?e=3:n-this.clicks[0]<500&&(e=2),this.clicks.unshift(n),this.clicks.pop(),e}network_selectedNodes(){return this.network.getSelection().nodes}network_displaySelection(n){let e=this.network.getSelection();if(e.nodes.length==0&&e.edges.length==0){this.edges_displayAll();return}this.edges_hideAll();let t=n==1;e.nodes.length>0&&n==3?this.edges_display(e.nodes.flatMap(r=>this.nodes_uniPathFrom(r))):e.nodes.length>0?this.nodes_displayEdgesFor(e.nodes,t):this.nodes_displayEdgesFor(e.edges.flatMap(r=>this.network.getConnectedNodes(r)),t)}network_connectedEdges(n){return this.network.getConnectedEdges(n)}nodes_get(n){return this.nodes.get(n)}nodes_displayEdgesFor(n,e){let t=this.nodes.get(n),r=e?o=>t.some(s=>s.id==o.id):o=>t.some(s=>s.group==o.group),a=this.nodes.get({filter:r}).map(o=>o.id).flatMap(o=>this.network_connectedEdges(o));this.edges_display(a)}nodes_uniPathFrom(n,e=[]){e.push(n);let t=o=>this.edges.get(this.network_connectedEdges(o)).filter(s=>s.from==o),r=t(n);return r.filter(o=>t(o.to).length>0).map(o=>o.id).concat(r.filter(o=>!e.includes(o.to)).flatMap(o=>this.nodes_uniPathFrom(o.to,e)))}};var pf={onlyInteractions:!1},su=null,V3=()=>{su&&su.setState(pf)},G3={view:()=>Xi("#app",{onupdate:()=>V3()},[Xi("#toolbar",[Xi("input[type=checkbox]",{checked:pf.onlyInteractions,onclick:i=>pf.onlyInteractions=i.target.checked})," Display interactions only"]),Xi("#mynetwork",{oncreate:async i=>{let n=await fetch("RoleConventionsSniff.json").then(e=>e.json());su=new vf(n.nodes,n.edges,i.dom),su.start()}})])};Xi.mount(document.body,G3);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */
/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 7.1.2
 * @date    2021-01-08T20:37:11.601Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */
/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 9.1.0
 * @date    2021-08-29T08:43:14.666Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */
